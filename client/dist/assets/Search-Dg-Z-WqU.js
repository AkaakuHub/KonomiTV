import{d as _,q as t,s as h,x as q,z as f,c as b,a as u,b as c,A as B,U as w,B as S,o as M,_ as R}from"./index-BMzJ-zKE.js";import{B as U,R as V}from"./RecordedProgramList-Bdjx60x2.js";import{H as x,N as I}from"./Navigation-DvcS7P9h.js";import{S as N}from"./SPHeaderBar-DvZRVtAv.js";import{V as O}from"./Videos-ALvBvXhN.js";import"./VDialog-B9rIm9Gz.js";import"./VChip-Bacto39r.js";import"./VTextField-BVdddEjb.js";import"./VAvatar-BoOVMS1I.js";import"./VCard-87YMq5wN.js";import"./ssrBoot-n_bHimPb.js";import"./VSelect-Ct3uHyzZ.js";const P={class:"route-container"},$={class:"videos-search-container-wrapper"},k={class:"videos-search-container"},C=_({__name:"Search",setup(E){const a=f(),i=S(),r=t(""),l=t([]),p=t(0),o=t(!0),s=t(1),n=t("desc"),d=async()=>{const e=await O.searchVideos(r.value,n.value,s.value);e&&(l.value=e.recorded_programs,p.value=e.total),o.value=!1},v=async e=>{s.value=e,o.value=!0,await i.replace({query:{...a.query,page:e.toString()}})},g=async e=>{n.value=e,s.value=1,o.value=!0,await i.replace({query:{...a.query,order:e,page:"1"}})};return h(()=>a.query,async e=>{e.query!==r.value&&(s.value=1),r.value=e.query,await d()},{deep:!0}),q(async()=>{r.value=a.query.query,a.query.page&&(s.value=parseInt(a.query.page)),a.query.order&&(n.value=a.query.order),await d()}),(e,m)=>(M(),b("div",P,[u(x),c("main",null,[u(I),c("div",$,[u(N),c("div",k,[u(U,{crumbs:[{name:"ホーム",path:"/"},{name:"ビデオをみる",path:"/videos/"},{name:"検索結果",path:`/videos/search?query=${encodeURIComponent(r.value)}`,disabled:!0}]},null,8,["crumbs"]),u(V,{title:B(w).isSmartphoneVertical()?"検索結果":`「${r.value}」の検索結果`,programs:l.value,total:p.value,page:s.value,sortOrder:n.value,isLoading:o.value,showBackButton:!0,breadcrumbs:[{name:"ビデオをみる",path:"/videos/"},{name:"検索結果",path:`/videos/search?query=${encodeURIComponent(r.value)}`}],"onUpdate:page":v,"onUpdate:sortOrder":m[0]||(m[0]=y=>g(y)),emptyMessage:`「${r.value}」に一致する録画番組は<br class='d-sm-none'>見つかりませんでした。`,emptySubMessage:"別のキーワードで検索をお試しください。",showEmptyMessage:!o.value},null,8,["title","programs","total","page","sortOrder","isLoading","breadcrumbs","emptyMessage","showEmptyMessage"])])])])]))}}),X=R(C,[["__scopeId","data-v-c8298c40"]]);export{X as default};
