import{B as p,R as v}from"./RecordedProgramList-AfJiUWHV.js";import{H as _,N as f}from"./Navigation-BcdRt14-.js";import{S as h}from"./SPHeaderBar-CruxpcWc.js";import{V as g}from"./Videos-CKDbuMG6.js";import{d as R,q as a,s as w,x as B,c as P,a as t,b as r,o as E,_ as H}from"./index-DH1f9dYl.js";import"./VDialog-DaFexD3d.js";import"./VChip-ChPvFtb1.js";import"./VTextField-CXR-0iJd.js";import"./VAvatar-BM0Or8i_.js";import"./VCard-DYa0VC_g.js";import"./ssrBoot-oPbPoIaF.js";import"./VSelect-DWAfwCQP.js";const S={class:"route-container"},V={class:"videos-home-container-wrapper"},b={class:"videos-home-container"},y=30*1e3,A=R({__name:"Home",setup(I){const n=a([]),i=a(0),s=a(!0),o=a(null),m={recentPrograms:async()=>{const e=await g.fetchVideos("desc",1);e&&(n.value=e.recorded_programs.slice(0,10),i.value=e.total),s.value=!1}},c=async()=>{try{await Promise.all(Object.values(m).map(e=>e()))}catch(e){console.error("Failed to update sections:",e)}},u=()=>{o.value===null&&(c(),o.value=window.setInterval(c,y))},d=()=>{o.value!==null&&(clearInterval(o.value),o.value=null)};return w(()=>{u()}),B(()=>{d()}),(e,l)=>(E(),P("div",S,[t(_),r("main",null,[t(f),r("div",V,[t(h),r("div",b,[t(p,{crumbs:[{name:"ビデオをみる",path:"/videos/"},{name:"ホーム",path:"/videos/",disabled:!0}]}),t(v,{title:"新着の録画番組",programs:n.value,total:i.value,hideSort:!0,hidePagination:!0,showMoreButton:!0,showSearch:!0,isLoading:s.value,showEmptyMessage:!s.value,onMore:l[0]||(l[0]=N=>e.$router.push("/videos/programs"))},null,8,["programs","total","isLoading","showEmptyMessage"])])])])]))}}),D=H(A,[["__scopeId","data-v-5af4c163"]]);export{D as default};
