import{d as O,$ as f,W as B,N as Y,r as N,o as u,j as ee,h as _,b as s,w as S,c as h,e,i as F,F as Z,g as L,t as G,L as p,k as i,V as g,cr as P,M as b,U as D,R as $,p as te,q as se,_ as ie,G as T,cs as le,cm as W,n as ae}from"./index-ovfGBpEq.js";import{V as Q,a as q,b as ne,c as oe}from"./VCard-nzsgkSw-.js";import{V as z}from"./ssrBoot-BewYrz-P.js";import{c as R}from"./VSelect-Y7-ZG8tZ.js";import{V as J}from"./VDialog-CyEHvMjI.js";import{V as de}from"./Navigation-CMdfOFEv.js";import{S as re}from"./Base-BXD-2772.js";import{b as k}from"./VTextField-BBBeyrSu.js";import{V as X}from"./VSlider-BC9Gy1GO.js";import{V as A}from"./VSwitch-CkdzOLqE.js";import"./VAvatar-B1QLPsTD.js";const C=y=>(te("data-v-6599ce25"),y=y(),se(),y),_e=C(()=>e("span",{class:"ml-3"},"アカウントの管理",-1)),ce={class:"px-5 pb-6"},ue=C(()=>e("div",{class:"user-manage-settings__label"},[i(" 管理者ユーザーには、サーバー設定やアカウントの管理権限が与えられます。"),e("br"),i(" 変更内容はすぐに反映されます。"),e("br")],-1)),me=C(()=>e("div",{class:"user-manage-settings__label text-error-lighten-1"},[e("strong",null,"アカウントを削除すると、そのアカウントに紐づくすべてのユーザーデータが削除されます。元に戻すことはできません。")],-1)),ve={key:0,class:"user-manage-settings__label"},pe=C(()=>e("div",null,[e("b",null,"まだ KonomiTV アカウントが一つも作成されていません。")],-1)),he=C(()=>e("div",{class:"mt-1"},"KonomiTV アカウントを作成すると、より便利な機能が使えます！ぜひログインしての利用をおすすめします。",-1)),ge=[pe,he],fe={key:1,class:"user-accounts"},be=["src"],Ve={class:"user-account__info"},ke={class:"user-account__name"},ye={class:"user-account__id"},we=["disabled","onClick"],Ce=C(()=>e("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1)),xe=[Ce],Te=C(()=>e("br",null,null,-1)),Ue=O({__name:"AccountManageSettings",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(y,{emit:o}){const M=y,j=o,l=f(!1);B(()=>M.modelValue,t=>{l.value=t}),B(l,t=>{j("update:modelValue",t)});const x=Y(),v=f([]),E=f({}),V=f({});B(V,t=>{for(const[n,r]of Object.entries(t)){const d=v.value.find(w=>w.id===Number(n));if(d){const w=r==="管理者";d.is_admin!==w&&P.updateSpecifiedUser(d.name,w).then(K=>{K?(b.success(`ユーザー ${d.name} の権限を ${r} に変更しました。`),U()):V.value[d.id]=d.is_admin?"管理者":"一般"}).catch(()=>{V.value[d.id]=d.is_admin?"管理者":"一般"})}}},{deep:!0});function U(){P.fetchAllUsers().then(async t=>{var n;if(t!==null){v.value=t;for(const r of v.value)P.fetchSpecifiedUserIcon(r.name).then(d=>{E.value[r.id]=d??""}),V.value[r.id]=r.is_admin?"管理者":"一般"}else{const r=await x.fetchUser(!0);r!==null&&r.name===((n=x.user)==null?void 0:n.name)&&!r.is_admin&&(b.warning("ログイン中ユーザーの管理者権限が剥奪されました。3秒後にリロードします。"),await D.sleep(3),location.reload())}})}x.fetchUser().then(t=>{t!=null&&t.is_admin&&U()});const m=f(!1),a=f(null);function c(t){a.value=t,m.value=!0}function I(){a.value&&P.deleteSpecifiedUser(a.value).then(t=>{t&&(v.value=v.value.filter(n=>n.name!==a.value),b.success(`ユーザー ${a.value} を削除しました。`),U()),m.value=!1})}return(t,n)=>{const r=N("Icon");return u(),ee(J,{"max-width":"570",transition:"slide-y-transition",modelValue:l.value,"onUpdate:modelValue":n[4]||(n[4]=d=>l.value=d)},{default:_(()=>[s(q,{class:"user-manage-settings"},{default:_(()=>[s(Q,{class:"px-5 pt-6 pb-3 d-flex align-center font-weight-bold",style:{height:"60px"}},{default:_(()=>[s(r,{icon:"fluent:person-board-20-filled",height:"26px"}),_e,s(z),S((u(),h("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:n[0]||(n[0]=d=>l.value=!1)},[s(r,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[$]])]),_:1}),e("div",ce,[ue,me,v.value.length===0?(u(),h("div",ve,ge)):F("",!0),v.value.length>0?(u(),h("div",fe,[(u(!0),h(Z,null,L(v.value,d=>{var w;return u(),h("div",{key:d.id,class:"user-account"},[e("img",{class:"user-account__icon",src:E.value[d.id]},null,8,be),e("div",Ve,[e("span",ke,G(d.name),1),e("span",ye,"User ID: "+G(d.id),1)]),s(R,{class:"user-account__role",color:"primary",density:"compact",variant:"outlined","hide-details":"",items:["一般","管理者"],modelValue:V.value[d.id],"onUpdate:modelValue":K=>V.value[d.id]=K},null,8,["modelValue","onUpdate:modelValue"]),S((u(),h("button",{class:"user-account__delete-button",disabled:d.name===((w=p(x).user)==null?void 0:w.name),onClick:K=>c(d.name)},xe,8,we)),[[$]])])}),128))])):F("",!0)])]),_:1}),s(J,{"max-width":"385",modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=d=>m.value=d)},{default:_(()=>[s(q,null,{default:_(()=>[s(Q,{class:"d-flex justify-center pt-6 font-weight-bold"},{default:_(()=>[i("本当にアカウントを削除しますか？")]),_:1}),s(ne,{class:"pt-2 pb-0"},{default:_(()=>[i(" アカウントに紐づくすべてのユーザーデータが削除されます。元に戻すことはできません。"),Te,i(" 本当にアカウントを削除しますか？ ")]),_:1}),s(oe,{class:"pt-4 px-6 pb-6"},{default:_(()=>[s(z),s(g,{color:"text",variant:"text",onClick:n[1]||(n[1]=d=>m.value=!1)},{default:_(()=>[i("キャンセル")]),_:1}),s(g,{color:"error",variant:"flat",onClick:n[2]||(n[2]=d=>I())},{default:_(()=>[i("削除")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),Se=ie(Ue,[["__scopeId","data-v-6599ce25"]]);class H{static async updateDatabase(){const o=await T.post("/maintenance/update-database");if(o.type==="error")switch(o.data.detail){default:T.showGenericError(o,"データベースを更新できませんでした。");break}}static async restartServer(){const o=await T.post("/maintenance/restart");if(o.type==="error")switch(o.data.detail){default:T.showGenericError(o,"サーバーを再起動できませんでした。");break}}static async shutdownServer(){const o=await T.post("/maintenance/shutdown");if(o.type==="error")switch(o.data.detail){default:T.showGenericError(o,"サーバーをシャットダウンできませんでした。");break}}}const $e={class:"settings__heading"},Me=e("span",{class:"ml-2"},"サーバー設定",-1),Ee=e("div",{class:"settings__description"},[i(" サーバー設定を変更するには、管理者アカウントでログインしている必要があります。"),e("br")],-1),Ke=e("div",{class:"settings__description mt-1"},[i(" [サーバー設定を更新] ボタンを押さずにこのページから離れると、変更内容は破棄されます。"),e("br"),i(" 変更を反映するには KonomiTV サーバーの再起動が必要です。"),e("br")],-1),Pe={class:"settings__content-heading"},De=e("span",{class:"ml-2"},"全般",-1),Ie={class:"settings__item"},Be=e("div",{class:"settings__item-heading"},"利用するバックエンド",-1),Ae=e("div",{class:"settings__item-label"},[i(" EDCB・Mirakurun のいずれかを選択してください。"),e("br"),i(" バックエンドに Mirakurun が選択されているときは、録画予約機能は利用できません。"),e("br")],-1),He={class:"settings__item"},Ne=e("div",{class:"settings__item-heading"},"EDCB (EpgTimerNW) の TCP API の URL",-1),Ze=e("div",{class:"settings__item-label"},[i(" バックエンドに EDCB が選択されているときに利用されます。"),e("br"),i(" tcp://edcb-namedpipe/ と指定すると、TCP API の代わりに名前付きパイプを使って通信します (ローカルのみ)。"),e("br")],-1),Le=e("div",{class:"settings__item-label mt-1"},[i(" 一部 Windows 環境では localhost の名前解決が遅いため、ストリーミング開始までの待機時間が長くなる場合があります。 EDCB と同じ PC に KonomiTV をインストールしている場合、localhost ではなく 127.0.0.1 の利用を推奨します。"),e("br")],-1),Re={class:"settings__item"},je=e("div",{class:"settings__item-heading"},"Mirakurun / mirakc の HTTP API の URL",-1),Fe=e("div",{class:"settings__item-label"},[i(" バックエンドに Mirakurun が選択されているときに利用されます。"),e("br")],-1),Ge=e("div",{class:"settings__item-label mt-1"},[i(" 一部 Windows 環境では localhost の名前解決が遅いため、ストリーミング開始までの待機時間が長くなる場合があります。 Mirakurun / mirakc と同じ PC に KonomiTV をインストールしている場合、localhost ではなく 127.0.0.1 の利用を推奨します。"),e("br")],-1),We={class:"settings__item"},Qe=e("div",{class:"settings__item-heading"},"利用するエンコーダー",-1),qe=e("div",{class:"settings__item-label"},[i(" FFmpeg はソフトウェアエンコーダーです。"),e("br"),i(" すべての PC で利用できますが、CPU に多大な負荷がかかり、パフォーマンスが悪いです。"),e("br")],-1),ze=e("div",{class:"settings__item-label mt-1"},[i(" QSVEncC・NVEncC・VCEEncC・rkmppenc はハードウェアエンコーダーです。"),e("br"),i(" CPU 負荷が低く、パフォーマンスがとても高いです（おすすめ）。"),e("br")],-1),Je={class:"settings__item"},Xe=e("div",{class:"settings__item-heading"},"番組情報の更新間隔 (分)",-1),Oe=e("div",{class:"settings__item-label"},[i(" 番組情報を EDCB または Mirakurun / mirakc から取得する間隔を設定します。デフォルトは 5 (分) です。"),e("br")],-1),Ye={class:"settings__item settings__item--switch"},et=e("label",{class:"settings__item-heading",for:"debug"},"デバッグモードを有効にする",-1),tt=e("label",{class:"settings__item-label",for:"debug"},[i(" 有効にすると、デバッグログも出力されるようになります。"),e("br")],-1),st={class:"settings__item settings__item--switch"},it=e("label",{class:"settings__item-heading",for:"debug_encoder"},"エンコーダーのログを有効にする",-1),lt=e("label",{class:"settings__item-label",for:"debug_encoder"},[i(" 有効にすると、エンコーダーのログが server/logs/ 以下に保存されます。 さらにデバッグモードが有効のときは、デバッグログとしてリアルタイムにエンコーダーのログが出力されます。"),e("br")],-1),at={class:"settings__content-heading mt-6"},nt=e("span",{class:"ml-2"},"サーバー",-1),ot={class:"settings__item"},dt=e("div",{class:"settings__item-heading"},"KonomiTV サーバーのリッスンポート",-1),rt=e("div",{class:"settings__item-label"},[i(" デフォルトのリッスンポートは 7000 です。"),e("br")],-1),_t={class:"settings__item"},ct=e("div",{class:"settings__item-heading"},"HTTPS リバースプロキシのカスタム HTTPS 証明書/秘密鍵ファイルへの絶対パス",-1),ut=e("div",{class:"settings__item-label"},[i(" 設定すると、カスタム HTTPS 証明書を使って HTTPS リバースプロキシを開始します。"),e("br"),i(" カスタム HTTPS 証明書を有効化すると、https://192-168-x-xx.local.konomi.tv:7000/ の URL では KonomiTV にアクセスできなくなります。"),e("br"),i(" 基本空欄のままで問題ありません。HTTPS 証明書について詳細に理解している方のみ設定してください。"),e("br")],-1),mt={class:"settings__content-heading mt-6"},vt=e("span",{class:"ml-2"},"テレビのライブストリーミング",-1),pt={class:"settings__item settings__item--switch"},ht=e("label",{class:"settings__item-heading",for:"always_receive_tv_from_mirakurun"},"常に Mirakurun / mirakc から放送波を受信する",-1),gt=e("label",{class:"settings__item-label",for:"always_receive_tv_from_mirakurun"},[i(" 利用するバックエンドが EDCB のとき、常に Mirakurun / mirakc から放送波を受信するかを設定します。 バックエンドに Mirakurun が選択されているときは効果がありません。"),e("br")],-1),ft=e("label",{class:"settings__item-label mt-1",for:"always_receive_tv_from_mirakurun"},[i(" KonomiTV から EDCB と Mirakurun / mirakc 両方にアクセスできる必要があります。"),e("br"),i(" EDCB はチューナー起動やチャンネル切り替えに時間がかかるため、Mirakurun / mirakc が利用できる環境であれば、この設定を有効にするとより快適に使えます。"),e("br")],-1),bt={class:"settings__item"},Vt=e("div",{class:"settings__item-heading"},"誰も見ていないチャンネルのエンコードタスクを維持する秒数",-1),kt=e("div",{class:"settings__item-label"},[i(" 10 秒に設定したなら、10 秒間誰も見ていない状態が継続したらエンコードタスク（エンコーダー）を終了します。"),e("br"),i(" 0 秒に設定すると、ネット回線が瞬断したりリロードしただけでチューナーとエンコーダーの再起動が必要になり、再生復帰までに時間がかかります。余裕をもたせておく事をおすすめします。"),e("br")],-1),yt={class:"settings__item"},wt=e("div",{class:"settings__item-heading"},"NX-Jikkyo コメントサーバーの URL",-1),Ct=e("div",{class:"settings__item-label"},[i(" ニコニコ実況が長期間サーバーダウンしている場合に、代替のコメントサーバー (NX-Jikkyo 互換) を利用できます。"),e("br")],-1),xt=e("div",{class:"settings__item-label mt-1"},[i(" URL (ex: https://nx-jikkyo.tsukumijima.net/) を指定すると、そのコメントサーバーからリアルタイムに実況コメントを取得します。"),e("br"),i(" 代替コメントサーバー利用時は、ニコニコアカウントへのログイン状態に関係なくコメントを表示・投稿できます。"),e("br")],-1),Tt=e("div",{class:"settings__item-label mt-1"},[i(" なお、録画再生時の実況過去ログは、常に「ニコニコ実況 過去ログ API」(https://jikkyo.tsukumijima.net/) から取得されます。"),e("br")],-1),Ut={class:"settings__content-heading mt-6"},St=e("span",{class:"ml-2"},"ビデオのオンデマンドストリーミング",-1),$t={class:"settings__item"},Mt=e("div",{class:"settings__item-heading"},"録画済み番組の保存先フォルダの絶対パス",-1),Et=e("div",{class:"settings__item-label",style:{"padding-bottom":"2px"}},[i(" 複数の保存先フォルダを指定できます。"),e("br")],-1),Kt={class:"d-flex align-center mt-3"},Pt=["onClick"],Dt=e("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1),It=[Dt],Bt=e("span",{class:"ml-1"},"保存先フォルダを追加",-1),At={class:"settings__content-heading mt-6"},Ht=e("span",{class:"ml-2"},"キャプチャ",-1),Nt={class:"settings__item"},Zt=e("div",{class:"settings__item-heading"},"アップロードしたキャプチャ画像の保存先フォルダの絶対パス",-1),Lt=e("div",{class:"settings__item-label"},[i(" クライアントの [キャプチャの保存先] 設定で [KonomiTV サーバーにアップロード] または [ブラウザでのダウンロードと、KonomiTV サーバーへのアップロードを両方行う] が選択されているときに利用されます。"),e("br")],-1),Rt=e("div",{class:"settings__item-label mt-1",style:{"padding-bottom":"2px"}},[i(" 複数の保存先フォルダを指定できます。先頭から順に利用され、保存先フォルダがいっぱいになったら次の保存先フォルダに保存されます。"),e("br")],-1),jt={class:"d-flex align-center mt-3"},Ft=["onClick"],Gt=e("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1),Wt=[Gt],Qt=e("span",{class:"ml-1"},"保存先フォルダを追加",-1),qt={class:"settings__content-heading mt-8"},zt=e("span",{class:"ml-2"},"アカウント",-1),Jt={class:"settings__item"},Xt=e("div",{class:"settings__item-heading"},"アカウントの管理",-1),Ot=e("div",{class:"settings__item-label"},[i(" 現在 KonomiTV に登録されているすべてのアカウントの一覧の確認、管理者権限の付与/剥奪、アカウントの削除ができます。"),e("br")],-1),Yt={class:"settings__item-label mt-1"},es=e("br",null,null,-1),ts=e("span",{class:"ml-1"},"アカウントの管理設定を開く",-1),ss={class:"settings__content-heading mt-8"},is=e("span",{class:"ml-2"},"メンテナンス",-1),ls=e("div",{class:"settings__item"},[e("div",{class:"settings__item-heading"},"KonomiTV のデータベースを更新"),e("div",{class:"settings__item-label"},[i(" KonomiTV のデータベースに保存されている、チャンネル情報・番組情報・Twitter アカウント情報などの外部 API に依存するデータをすべて更新します。"),e("br"),i(" 即座に外部 API からのデータ更新を反映させたいときに利用してください。"),e("br")])],-1),as=e("span",{class:"ml-2"},"データベースを更新",-1),ns=e("div",{class:"settings__item"},[e("div",{class:"settings__item-heading text-error-lighten-1"},"KonomiTV サーバーを再起動"),e("div",{class:"settings__item-label"},[i(" KonomiTV サーバーを再起動します。サーバー設定の変更を反映するには再起動が必要です。"),e("br"),e("strong",null,"再起動を実行すると、すべての視聴中セッションが切断されます。"),i("十分注意してください。"),e("br")])],-1),os=e("span",{class:"ml-2"},"KonomiTV サーバーを再起動",-1),ds=e("div",{class:"settings__item"},[e("div",{class:"settings__item-heading text-error-lighten-1"},"KonomiTV サーバーをシャットダウン"),e("div",{class:"settings__item-label"},[i(" KonomiTV サーバーをシャットダウンします。"),e("br"),e("strong",null,"シャットダウンを実行すると、再度手動で KonomiTV サーバーを起動するまで KonomiTV にアクセスできなくなります。"),i("十分注意してください。"),e("br")]),e("div",{class:"settings__item-label mt-1"},[i(" なお、Linux 版 KonomiTV サーバーはプロセス管理を PM2 / Docker に委譲しているため、シャットダウン後は自動で再起動されます。完全にシャットダウンするには、PM2 / Docker 側でサービスを停止してください。"),e("br")])],-1),rs=e("span",{class:"ml-2"},"KonomiTV サーバーをシャットダウン",-1),ks=O({__name:"Server",setup(y){const o=D.isSmartphoneHorizontal(),M=f(!0);Y().fetchUser().then(m=>{m&&m.is_admin&&(M.value=!1)});const l=f(structuredClone(le));W.fetchServerSettings().then(m=>{m&&(l.value=m)});async function x(){l.value.server.custom_https_certificate===""&&(l.value.server.custom_https_certificate=null),l.value.server.custom_https_private_key===""&&(l.value.server.custom_https_private_key=null),l.value.tv.alternative_comment_server_url===""&&(l.value.tv.alternative_comment_server_url=null),await W.updateServerSettings(l.value)===!0&&b.success(`サーバー設定を更新しました。
変更を反映するためには、KonomiTV サーバーを再起動してください。`)}const v=f(!1);async function E(){b.show("データベースを更新しています..."),await H.updateDatabase(),b.success("データベースを更新しました。")}async function V(){for(await H.restartServer(),b.show("KonomiTV サーバーを再起動しています..."),await D.sleep(1);await de.fetchServerVersion(!0)===null;)await D.sleep(1);b.success("KonomiTV サーバーを再起動しました。")}async function U(){await H.shutdownServer(),b.success("KonomiTV サーバーをシャットダウンしました。")}return(m,a)=>{const c=N("Icon"),I=N("router-link");return u(),ee(re,null,{default:_(()=>[e("h2",$e,[S((u(),h("a",{class:"settings__back-button",onClick:a[0]||(a[0]=t=>m.$router.back())},[s(c,{icon:"fluent:arrow-left-12-filled",width:"25px"})])),[[$]]),s(c,{icon:"fluent:server-surface-16-filled",width:"22px"}),Me]),Ee,Ke,e("div",{class:ae(["settings__content",{"settings__content--disabled":M.value}])},[e("div",Pe,[s(c,{icon:"fa-solid:sliders-h",width:"22px",style:{padding:"0 3px"}}),De]),e("div",Ie,[Be,Ae,s(R,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:p(o)?"compact":"default",items:["EDCB","Mirakurun"],modelValue:l.value.general.backend,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.general.backend=t)},null,8,["density","modelValue"])]),e("div",He,[Ne,Ze,Le,s(k,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:p(o)?"compact":"default",modelValue:l.value.general.edcb_url,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.general.edcb_url=t)},null,8,["density","modelValue"])]),e("div",Re,[je,Fe,Ge,s(k,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:p(o)?"compact":"default",modelValue:l.value.general.mirakurun_url,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.general.mirakurun_url=t)},null,8,["density","modelValue"])]),e("div",We,[Qe,qe,ze,s(R,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:p(o)?"compact":"default",items:[{title:"FFmpeg : ソフトウェアエンコーダー",value:"FFmpeg"},{title:"QSVEncC : Intel Graphics 搭載 CPU / Intel Arc GPU で利用可能",value:"QSVEncC"},{title:"NVEncC : NVIDIA GPU で利用可能",value:"NVEncC"},{title:"VCEEncC : AMD GPU で利用可能",value:"VCEEncC"},{title:"rkmppenc : Rockchip RK3588 系 SoC 搭載 SBC で利用可能",value:"rkmppenc"}],modelValue:l.value.general.encoder,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.general.encoder=t)},null,8,["density","modelValue"])]),e("div",Je,[Xe,Oe,s(X,{class:"settings__item-form",color:"primary","show-ticks":"always","thumb-label":"","hide-details":"",min:.5,max:60,step:.5,density:p(o)?"compact":"default",modelValue:l.value.general.program_update_interval,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.general.program_update_interval=t)},null,8,["density","modelValue"])]),e("div",Ye,[et,tt,s(A,{class:"settings__item-switch",color:"primary",id:"debug","hide-details":"",modelValue:l.value.general.debug,"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.general.debug=t)},null,8,["modelValue"])]),e("div",st,[it,lt,s(A,{class:"settings__item-switch",color:"primary",id:"debug_encoder","hide-details":"",modelValue:l.value.general.debug_encoder,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.general.debug_encoder=t)},null,8,["modelValue"])]),e("div",at,[s(c,{icon:"fluent:server-surface-16-filled",width:"22px"}),nt]),e("div",ot,[dt,rt,s(k,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:p(o)?"compact":"default",modelValue:l.value.server.port,"onUpdate:modelValue":a[8]||(a[8]=t=>l.value.server.port=t)},null,8,["density","modelValue"])]),e("div",_t,[ct,ut,s(k,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",label:"例: C:\\path\\to\\cert.pem",density:p(o)?"compact":"default",modelValue:l.value.server.custom_https_certificate,"onUpdate:modelValue":a[9]||(a[9]=t=>l.value.server.custom_https_certificate=t)},null,8,["density","modelValue"]),s(k,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",label:"例: C:\\path\\to\\key.pem",density:p(o)?"compact":"default",modelValue:l.value.server.custom_https_private_key,"onUpdate:modelValue":a[10]||(a[10]=t=>l.value.server.custom_https_private_key=t)},null,8,["density","modelValue"])]),e("div",mt,[s(c,{icon:"fluent:tv-20-filled",width:"22px"}),vt]),e("div",pt,[ht,gt,ft,s(A,{class:"settings__item-switch",color:"primary",id:"always_receive_tv_from_mirakurun","hide-details":"",modelValue:l.value.general.always_receive_tv_from_mirakurun,"onUpdate:modelValue":a[11]||(a[11]=t=>l.value.general.always_receive_tv_from_mirakurun=t)},null,8,["modelValue"])]),e("div",bt,[Vt,kt,s(X,{class:"settings__item-form",color:"primary","show-ticks":"always","thumb-label":"","hide-details":"",min:0,max:60,step:1,density:p(o)?"compact":"default",modelValue:l.value.tv.max_alive_time,"onUpdate:modelValue":a[12]||(a[12]=t=>l.value.tv.max_alive_time=t)},null,8,["density","modelValue"])]),e("div",yt,[wt,Ct,xt,Tt,s(k,{class:"settings__item-form mt-5",color:"primary",variant:"outlined","hide-details":"",label:"例: https://nx-jikkyo.tsukumijima.net/",density:p(o)?"compact":"default",modelValue:l.value.tv.alternative_comment_server_url,"onUpdate:modelValue":a[13]||(a[13]=t=>l.value.tv.alternative_comment_server_url=t)},null,8,["density","modelValue"])]),e("div",Ut,[s(c,{icon:"fluent:movies-and-tv-20-filled",width:"22px"}),St]),e("div",$t,[Mt,Et,(u(!0),h(Z,null,L(l.value.video.recorded_folders,(t,n)=>(u(),h("div",{key:"recorded-folder-"+n},[e("div",Kt,[s(k,{class:"settings__item-form mt-0",color:"primary",variant:"outlined","hide-details":"",placeholder:"例: E:\\TV-Record",density:p(o)?"compact":"default",modelValue:l.value.video.recorded_folders[n],"onUpdate:modelValue":r=>l.value.video.recorded_folders[n]=r},null,8,["density","modelValue","onUpdate:modelValue"]),S((u(),h("button",{class:"settings__item-delete-button",onClick:r=>l.value.video.recorded_folders.splice(n,1)},It,8,Pt)),[[$]])])]))),128)),s(g,{class:"mt-3",color:"background-lighten-2",variant:"flat",height:"40px",onClick:a[14]||(a[14]=t=>l.value.video.recorded_folders.push(""))},{default:_(()=>[s(c,{icon:"fluent:add-12-filled",height:"17px"}),Bt]),_:1})]),e("div",At,[s(c,{icon:"fluent:image-multiple-16-filled",width:"22px"}),Ht]),e("div",Nt,[Zt,Lt,Rt,(u(!0),h(Z,null,L(l.value.capture.upload_folders,(t,n)=>(u(),h("div",{key:"upload-folder-"+n},[e("div",jt,[s(k,{class:"settings__item-form mt-0",color:"primary",variant:"outlined","hide-details":"",placeholder:"例: E:\\TV-Capture",density:p(o)?"compact":"default",modelValue:l.value.capture.upload_folders[n],"onUpdate:modelValue":r=>l.value.capture.upload_folders[n]=r},null,8,["density","modelValue","onUpdate:modelValue"]),S((u(),h("button",{class:"settings__item-delete-button",onClick:r=>l.value.capture.upload_folders.splice(n,1)},Wt,8,Ft)),[[$]])])]))),128)),s(g,{class:"mt-3",color:"background-lighten-2",variant:"flat",height:"40px",onClick:a[15]||(a[15]=t=>l.value.capture.upload_folders.push(""))},{default:_(()=>[s(c,{icon:"fluent:add-12-filled",height:"17px"}),Qt]),_:1})]),s(g,{class:"settings__save-button bg-secondary mt-6",variant:"flat",onClick:a[16]||(a[16]=t=>x())},{default:_(()=>[s(c,{icon:"fluent:save-16-filled",class:"mr-2",height:"23px"}),i("サーバー設定を更新 ")]),_:1}),e("div",qt,[s(c,{icon:"fluent:person-board-20-filled",width:"22px"}),zt]),e("div",Jt,[Xt,Ot,e("div",Yt,[i(" ログイン中ユーザーの設定変更は、別途 "),s(I,{class:"link",to:"/settings/account"},{default:_(()=>[i("アカウント設定画面")]),_:1}),i(" から行ってください。"),es])]),s(g,{class:"settings__save-button mt-4",variant:"flat",onClick:a[17]||(a[17]=t=>v.value=!v.value)},{default:_(()=>[s(c,{icon:"fluent:person-board-20-filled",height:"20px"}),ts]),_:1}),e("div",ss,[s(c,{icon:"fluent:wrench-settings-20-filled",width:"22px"}),is]),ls,s(g,{class:"settings__save-button mt-5",color:"background-lighten-2",variant:"flat",onClick:a[18]||(a[18]=t=>E())},{default:_(()=>[s(c,{icon:"iconoir:database-backup",height:"20px"}),as]),_:1}),ns,s(g,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:a[19]||(a[19]=t=>V())},{default:_(()=>[s(c,{icon:"fluent:arrow-counterclockwise-20-filled",height:"20px"}),os]),_:1}),ds,s(g,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:a[20]||(a[20]=t=>U())},{default:_(()=>[s(c,{icon:"fluent:power-20-filled",height:"20px"}),rs]),_:1})],2),s(Se,{modelValue:v.value,"onUpdate:modelValue":a[21]||(a[21]=t=>v.value=t)},null,8,["modelValue"])]),_:1})}}});export{ks as default};
