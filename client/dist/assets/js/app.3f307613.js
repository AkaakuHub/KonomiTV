(function(t){function e(e){for(var a,r,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},s={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0215":function(t,e,n){"use strict";n("a1e0")},"0744":function(t,e,n){},1817:function(t,e,n){"use strict";n("e02d")},1826:function(t,e,n){},1834:function(t,e,n){},"272b":function(t,e,n){},"392a":function(t,e,n){"use strict";n("1826")},"477a":function(t,e,n){"use strict";n("272b")},"4d37":function(t,e,n){},5452:function(t,e,n){"use strict";n("af35")},"590c":function(t,e,n){"use strict";n("ec57")},"598f":function(t,e,n){"use strict";n("cee1")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"675d":function(t,e,n){},"7dd2":function(t,e,n){"use strict";n("8b36")},"82a4":function(t,e,n){},"8b36":function(t,e,n){},9132:function(t,e,n){"use strict";n("eadf")},"92b8":function(t,e,n){"use strict";n("eee7")},"9c0c":function(t,e,n){},a1e0:function(t,e,n){},a420:function(t,e,n){"use strict";n("1834")},af35:function(t,e,n){},b3c5:function(t,e,n){"use strict";n("0744")},b452:function(t,e,n){},b707:function(t,e,n){"use strict";n("675d")},ba01:function(t,e,n){"use strict";n("4d37")},c04d:function(t,e,n){"use strict";n("82a4")},c1d7:function(t,e,n){"use strict";n("b452")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("5ea9"),s=n("71ba"),i=n("2b0e"),r=n("130e"),o=n("e508"),c=(n("a899"),n("211d")),l=n.n(c),u=n("e37d"),d=(n("096e"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("transition",[n("router-view")],1)],1)}),p=[],_=(n("5c0b"),n("2877")),m=n("6544"),h=n.n(m),v=n("7496"),g={},f=Object(_["a"])(g,d,p,!1,null,null,null),w=f.exports;h()(f,{VApp:v["a"]});var b=n("c671"),y=b["a"].extend({render:function(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},[this.genWindowItem()])}}),x=n("80d2"),C=n("fe57"),k=(n("4e827"),n("c740"),n("027c")),T=k["a"].extend({data:function(){return{items:[]}},methods:{register:function(t){var e=this,n=this.items[this.internalIndex];this.items.push(t),this.items.sort((function(t,n){var a=e.$slots.default.findIndex((function(e){return t.$vnode.key===e.key})),s=e.$slots.default.findIndex((function(t){return n.$vnode.key===t.key}));return a-s})),t.$on("change",(function(){return e.onClick(t)})),this.mandatory&&!this.selectedValues.length&&this.updateMandatory(),this.updateItem(t,this.items.indexOf(t)),void 0!==n&&this.updateInternalValue(this.items.indexOf(n))},unregister:function(t){var e=this.items[this.internalIndex];this.constructor.super.options.methods.unregister.call(this,t),void 0!==e&&this.updateInternalValue(this.items.indexOf(e))}}}),I=C["a"].extend({methods:{genBar:function(t,e){var n=this,a={style:{height:Object(x["g"])(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakpoint:this.mobileBreakpoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:function(t){n.internalValue=t}},ref:"items"};return this.setTextColor(this.computedColor,a),this.setBackgroundColor(this.backgroundColor,a),this.$createElement(T,a,[this.genSlider(e),t])}}}),S=n("aac8"),A=S["a"].extend({data:function(){return{items:[]}},methods:{register:function(t){var e=this,n=this.items[this.internalIndex];this.items.push(t),this.items.sort((function(t,n){var a=e.$slots.default.findIndex((function(e){return t.$vnode.key===e.key})),s=e.$slots.default.findIndex((function(t){return n.$vnode.key===t.key}));return a-s})),t.$on("change",(function(){return e.onClick(t)})),this.mandatory&&!this.selectedValues.length&&this.updateMandatory(),this.updateItem(t,this.items.indexOf(t)),void 0!==n&&this.items.indexOf(n)!==this.internalValue&&this.updateInternalValue(this.items.indexOf(n))},unregister:function(t){var e=this.items[this.internalIndex];this.constructor.super.options.methods.unregister.call(this,t),void 0!==e&&this.updateInternalValue(this.items.indexOf(e))},updateReverse:function(t,e){var n=this.items.length,a=n-1;return n<=2?t<e:this.continuous?t===a&&0===e||(0!==t||e!==a)&&t<e:t<e}}}),O=n("1da1"),R=n("d4ec"),P=n("bee2"),V=(n("96cf"),n("e9c4"),n("ac1f"),n("00b4"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("5319"),n("99af"),n("fb6a"),function(){function t(){Object(R["a"])(this,t)}return Object(P["a"])(t,null,[{key:"getSettingsItem",value:function(e){var n=JSON.parse(localStorage.getItem("KonomiTV-Settings"))||t.default_settings;return e in n?n[e]:e in this.default_settings?this.default_settings[e]:null}},{key:"setSettingsItem",value:function(e,n){var a=JSON.parse(localStorage.getItem("KonomiTV-Settings"))||t.default_settings;e in this.default_settings&&(a[e]=n,localStorage.setItem("KonomiTV-Settings",JSON.stringify(a)))}},{key:"getAccessToken",value:function(){return localStorage.getItem("KonomiTV-AccessToken")}},{key:"saveAccessToken",value:function(t){localStorage.setItem("KonomiTV-AccessToken",t)}},{key:"CtrlOrCmd",value:function(){return/iPhone|iPad|Macintosh/i.test(navigator.userAgent)?"Cmd":"Ctrl"}},{key:"deleteAccessToken",value:function(){null!==localStorage.getItem("KonomiTV-AccessToken")&&localStorage.removeItem("KonomiTV-AccessToken")}},{key:"downloadBlobImage",value:function(t,e){var n=URL.createObjectURL(t),a=document.createElement("a");a.download=e,a.href=n,a.click(),URL.revokeObjectURL(n)}},{key:"escapeHTML",value:function(t){var e={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};return t.replace(/[&"'<>]/g,(function(t){return e[t]}))}},{key:"getWindowFeatures",value:function(){var t=650,e=window.screen.height>=800?800:window.screen.height-100,n=(window.screen.height-e)/2,a=(window.screen.width-t)/2;return"toolbar=0,status=0,top=".concat(n,",left=").concat(a,",width=").concat(t,",height=").concat(e,",modal=yes,alwaysRaised=yes")}},{key:"sleep",value:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t,1e3*e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"typeof",value:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}},{key:"URLtoLink",value:function(e){e=t.escapeHTML(e);var n=/(https?:\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi;return e.replace(n,'<a href="$1" target="_blank">$1</a>')}}]),t}());V.version="0.5.2",V.api_base_url=function(){return"".concat(window.location.protocol,"//").concat(window.location.host,"/api")}(),V.default_settings={pinned_channel_ids:[],is_display_latest_panel:!0,selected_twitter_account_id:null,saved_twitter_hashtags:[],tv_streaming_quality:"1080p",is_display_superimpose_tv:!0,panel_display_state:"RestorePreviousState",panel_active_tab:"Program",capture_save_mode:"Browser",capture_caption_mode:"Both",comment_speed_rate:1,comment_font_size:34,comment_delay_time:1.5,twitter_active_tab:"Capture",tweet_hashtag_position:"Append",tweet_capture_watermark_position:"None"};var j=n("ade3"),E=n("2909"),N=(n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("4d90"),n("466d"),n("a4d3"),n("e01a"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("1c35")),D=n("5a0c"),L=n.n(D),$=(n("5999"),n("1ed7")),F=function(){function t(){Object(R["a"])(this,t)}return Object(P["a"])(t,null,[{key:"decorateProgramInfo",value:function(t,e){if(null!==t&&null!==t[e]){var n=V.escapeHTML(t[e]),a="新|終|再|交|映|手|声|多|副|字|文|CC|OP|二|S|B|SS|無|無料C|S1|S2|S3|MV|双|デ|D|N|W|P|H|HV|SD|天|解|料|前|後初|生|販|吹|PPV|演|移|他|収|・|英|韓|中|字/日|字/日英|3D|2K|4K|8K|5.1|7.1|22.2|60P|120P|d|HC|HDR|SHV|UHD|VOD|配|初",s=new RegExp("\\((二|字|再)\\)","g"),i=new RegExp("\\[(".concat(a,")\\]"),"g");return n.replace(s,'<span class="decorate-symbol">$1</span>').replace(i,'<span class="decorate-symbol">$1</span>')}return"title"==e?"放送休止":"この時間は放送を休止しています。"}},{key:"generatePlayerBackgroundURL",value:function(){var t=12,e=Math.floor(Math.random()*t)+1;return"/assets/images/player-backgrounds/".concat(e.toString().padStart(2,"0"),".jpg")}},{key:"getAttribute",value:function(t,e,n){return null!==t&&void 0!==t[e]&&null!==t[e]?t[e]:n}},{key:"getChannelType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.match("(?<channel_type>[a-z]+)[0-9]+").groups.channel_type.toUpperCase();return"GR"===n&&e?"地デジ":n}},{key:"getChannelForceType",value:function(t){return null===t?"normal":t>=1e3?"festival":t>=200?"so-many":t>=100?"many":"normal"}},{key:"getChannelFromRemoconID",value:function(t,e,n){e=e.replace("GR","地デジ");for(var a=t.get(e),s=0;s<a.length;s++){var i=a[s];if(i.remocon_id===n)return i}return null}},{key:"getPreviousAndCurrentAndNextChannel",value:function(t,e){for(var n=t.get(this.getChannelType(e,!0)),a=0;a<n.length;a++){var s=n[a];if(s.channel_id===e){var i=a-1;-1===i&&(i=n.length-1);var r=a+1;return r===n.length&&(r=0),[n[i],n[a],n[r]]}}}},{key:"getProgramProgress",value:function(t){if(null!==t){var e=L()(L()()).diff(t.start_time,"second");return e/t.duration*100}return 0}},{key:"getProgramTime",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==t&&"2000-01-01T00:00:00+09:00"!==t.start_time){L.a.locale("ja");var n=L()(t.start_time),a=L()(t.end_time),s=t.duration/60;return!0===e?"".concat(n.format("HH:mm")," ～ ").concat(a.format("HH:mm")):"".concat(n.format("YYYY/MM/DD (dd) HH:mm")," ～ ").concat(a.format("HH:mm")," (").concat(s,"分)")}return!0===e?"--:-- ～ --:--":"----/--/-- (-) --:-- ～ --:-- (--分)"}},{key:"setEXIFDataToCapture",value:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,n){var a,s,i,r,o,c,l,u,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={capture_time:L()().format("YYYY-MM-DDTHH:mm:ss+09:00"),network_id:n.network_id,service_id:n.service_id,event_id:n.event_id,title:n.title,description:n.description,start_time:n.start_time,end_time:n.end_time,duration:n.duration},r=L()().format("YYYY:MM:DD HH:mm:ss"),o={"0th":(a={},Object(j["a"])(a,$["TagValues"].ImageIFD.XResolution,[72,1]),Object(j["a"])(a,$["TagValues"].ImageIFD.YResolution,[72,1]),Object(j["a"])(a,$["TagValues"].ImageIFD.ResolutionUnit,2),Object(j["a"])(a,$["TagValues"].ImageIFD.YCbCrPositioning,1),Object(j["a"])(a,$["TagValues"].ImageIFD.DateTime,r),Object(j["a"])(a,$["TagValues"].ImageIFD.Software,"KonomiTV version ".concat(V.version)),Object(j["a"])(a,$["TagValues"].ImageIFD.XPComment,Object(E["a"])(N["Buffer"].from(JSON.stringify(i),"ucs2"))),a),Exif:(s={},Object(j["a"])(s,$["TagValues"].ExifIFD.ExifVersion,"0230"),Object(j["a"])(s,$["TagValues"].ExifIFD.ComponentsConfiguration,"\0"),Object(j["a"])(s,$["TagValues"].ExifIFD.FlashpixVersion,"0100"),Object(j["a"])(s,$["TagValues"].ExifIFD.ColorSpace,1),Object(j["a"])(s,$["TagValues"].ExifIFD.DateTimeOriginal,r),Object(j["a"])(s,$["TagValues"].ExifIFD.DateTimeDigitized,r),s)},c=$["dump"](o),t.next=6,new Promise((function(t,n){var a=new FileReader;a.onload=function(){return t(a.result)},a.onerror=n,a.readAsBinaryString(e)}));case 6:for(l=t.sent,u=$["insert"](c,l),d=new Uint8Array(u.length),p=0;p<d.length;p++)d[p]=255&u.charCodeAt(p);return t.abrupt("return",new Blob([d],{type:e.type}));case 11:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}(),B=V,H=n("bc3a"),M=n.n(H),U=M.a.create();U.interceptors.request.use((function(t){void 0===t.baseURL&&(t.baseURL=B.api_base_url);var e=B.getAccessToken();return null!==e&&(t.headers["Authorization"]="Bearer ".concat(e)),t.headers["X-KonomiTV-Version"]=B.version,t}));var z=U,K=n("f309"),q=n("2db4"),W=n("8336"),Y=n("132d");i["default"].use(K["a"]),i["default"].component("v-snackbar",q["a"]),i["default"].component("v-btn",W["a"]),i["default"].component("v-icon",Y["a"]);var G=new K["a"]({theme:{dark:!0,themes:{dark:{primary:"#E64F97",secondary:"#E33157",twitter:{base:"#4F82E6",lighten1:"#799FEC",lighten2:"#41A5F1"},gray:"#66514C",black:"#110A09",background:{base:"#1E1310",lighten1:"#2F221F",lighten2:"#433532",lighten3:"#4c3c38"},text:{base:"#FFEAEA",darken1:"#D9C7C7",darken2:"#8E7F7E",darken3:"#786968"}}},options:{customProperties:!0}}}),J=n("8c4f"),X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"route-container"},[n("Header"),n("main",[n("Navigation"),n("div",{staticClass:"channels-container channels-container--home",class:{"channels-container--loading":t.is_loading}},[n("v-tabs-fix",{staticClass:"channels-tab",attrs:{centered:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(Array.from(t.channels_list),(function(e){var a=e[0];return n("v-tab",{key:a,staticClass:"channels-tab__item"},[t._v(t._s(a))])})),1),n("v-tabs-items-fix",{staticClass:"channels-list",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(Array.from(t.channels_list),(function(e){var a=e[0],s=e[1];return n("v-tab-item-fix",{key:a,staticClass:"channels-tabitem"},[n("div",{staticClass:"channels",class:"channels--tab-"+a+" channels--length-"+s.length},[t._l(s,(function(e){return n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticClass:"channel",attrs:{to:"/tv/watch/"+e.channel_id}},[n("div",{staticClass:"channel__broadcaster"},[n("img",{staticClass:"channel__broadcaster-icon",attrs:{src:t.Utils.api_base_url+"/channels/"+e.channel_id+"/logo"}}),n("div",{staticClass:"channel__broadcaster-content"},[n("span",{staticClass:"channel__broadcaster-name"},[t._v("Ch: "+t._s(e.channel_number)+" "+t._s(e.channel_name))]),n("div",{staticClass:"channel__broadcaster-status"},[n("div",{staticClass:"channel__broadcaster-status-force",class:"channel__broadcaster-status-force--"+t.TVUtils.getChannelForceType(e.channel_force)},[n("Icon",{attrs:{icon:"fa-solid:fire-alt",height:"12px"}}),n("span",{staticClass:"ml-1"},[t._v("勢い:")]),n("span",{staticClass:"ml-1"},[t._v(t._s(t.TVUtils.getAttribute(e,"channel_force","--"))+" コメ/分")])],1),n("div",{staticClass:"channel__broadcaster-status-viewers ml-4"},[n("Icon",{attrs:{icon:"fa-solid:eye",height:"14px"}}),n("span",{staticClass:"ml-1"},[t._v("視聴数:")]),n("span",{staticClass:"ml-1"},[t._v(t._s(e.viewers))])],1)])]),n("div",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip",value:t.isPinnedChannel(e.channel_id)?"ピン留めを外す":"ピン留めする",expression:"isPinnedChannel(channel.channel_id) ? 'ピン留めを外す' : 'ピン留めする'"}],staticClass:"channel__broadcaster-pin",class:{"channel__broadcaster-pin--pinned":t.isPinnedChannel(e.channel_id)},on:{click:function(n){n.preventDefault(),n.stopPropagation(),t.isPinnedChannel(e.channel_id)?t.removePinnedChannel(e.channel_id):t.addPinnedChannel(e.channel_id)},mousedown:function(t){t.preventDefault(),t.stopPropagation()}}},[n("Icon",{attrs:{icon:"fluent:pin-20-filled",width:"24px"}})],1)]),n("div",{staticClass:"channel__program-present"},[n("span",{staticClass:"channel__program-present-title",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(e.program_present,"title"))}}),n("span",{staticClass:"channel__program-present-time"},[t._v(t._s(t.TVUtils.getProgramTime(e.program_present)))]),n("span",{staticClass:"channel__program-present-description",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(e.program_present,"description"))}})]),n("v-spacer"),n("div",{staticClass:"channel__program-following"},[n("div",{staticClass:"channel__program-following-title"},[n("span",{staticClass:"channel__program-following-title-decorate"},[t._v("NEXT")]),n("Icon",{staticClass:"channel__program-following-title-icon",attrs:{icon:"fluent:fast-forward-20-filled",width:"16px"}}),n("span",{staticClass:"channel__program-following-title-text",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(e.program_following,"title"))}})],1),n("span",{staticClass:"channel__program-following-time"},[t._v(t._s(t.TVUtils.getProgramTime(e.program_following)))])]),n("div",{staticClass:"channel__progressbar"},[n("div",{staticClass:"channel__progressbar-progress",style:"width:"+t.TVUtils.getProgramProgress(e.program_present)+"%;"})])],1)})),"ピン留め"===a&&0===s.length?n("div",{staticClass:"d-flex justify-center align-center w-100"},[n("div",{staticClass:"d-flex justify-center align-center flex-column"},[n("h2",[t._v("ピン留めされているチャンネルがありません。")]),n("div",{staticClass:"mt-4 text--text text--darken-1"},[t._v("各チャンネルの "),n("Icon",{staticStyle:{position:"relative",bottom:"-5px"},attrs:{icon:"fluent:pin-20-filled",width:"22px"}}),t._v(" アイコンから、よくみるチャンネルをこのタブにピン留めできます。")],1),n("div",{staticClass:"mt-2 text--text text--darken-1"},[t._v("チャンネルをピン留めすると、このタブが最初に表示されます。")])])]):t._e()],2)])})),1)],1)],1)],1)},Z=[],Q=n("b85c"),tt=(n("4ec9"),n("4de4"),n("a434"),n("7db0"),n("caad"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{staticClass:"header",attrs:{absolute:"",color:"background",elevation:"8",width:"100%"}},[n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"logo ml-3 ml-md-6",attrs:{to:"/tv/"}},[n("img",{staticClass:"logo__image",attrs:{src:"/assets/images/logo.svg",height:"21"}})]),n("v-spacer"),n("v-btn",{staticClass:"mr-3 mr-md-6",attrs:{icon:""}},[n("v-icon",[t._v("mdi-dots-vertical")])],1)],1)}),et=[],nt=(n("5452"),n("2fa4")),at=n("71d9"),st=n("269a"),it=n.n(st),rt=n("5607"),ot={},ct=Object(_["a"])(ot,tt,et,!1,null,null,null),lt=ct.exports;h()(ct,{VBtn:W["a"],VIcon:Y["a"],VSpacer:nt["a"],VToolbar:at["a"]}),it()(ct,{Ripple:rt["a"]});var ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigation-container elevation-8"},[n("nav",{staticClass:"navigation"},[n("div",{staticClass:"navigation-scroll"},[n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/tv/"}},[n("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:tv-20-regular",width:"26px"}}),n("span",{staticClass:"navigation__link-text"},[t._v("テレビをみる")])],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/videos/"}},[n("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:movies-and-tv-20-regular",width:"26px"}}),n("span",{staticClass:"navigation__link-text"},[t._v("ビデオをみる")])],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/timetable/"}},[n("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:calendar-ltr-20-regular",width:"26px"}}),n("span",{staticClass:"navigation__link-text"},[t._v("番組表")])],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/captures/"}},[n("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:image-multiple-24-regular",width:"26px"}}),n("span",{staticClass:"navigation__link-text"},[t._v("キャプチャ")])],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/watchlists/"}},[n("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"ic:round-playlist-play",width:"26px"}}),n("span",{staticClass:"navigation__link-text"},[t._v("ウォッチリスト")])],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/histories/"}},[n("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:history-16-regular",width:"26px"}}),n("span",{staticClass:"navigation__link-text"},[t._v("視聴履歴")])],1),n("v-spacer"),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/settings/"}},[n("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:settings-20-regular",width:"26px"}}),n("span",{staticClass:"navigation__link-text"},[t._v("設定")])],1),n("a",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",href:"https://github.com/tsukumijima/KonomiTV"}},[n("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:info-16-regular",width:"26px"}}),n("span",{staticClass:"navigation__link-text"},[t._v("version "+t._s(t.Utils.version))])],1)],1)])])},dt=[],pt=i["default"].extend({name:"Navigation",data:function(){return{Utils:B}}}),_t=pt,mt=(n("a420"),Object(_["a"])(_t,ut,dt,!1,null,"3201c226",null)),ht=mt.exports;h()(mt,{VSpacer:nt["a"]}),it()(mt,{Ripple:rt["a"]});var vt=i["default"].extend({name:"Home",components:{Header:lt,Navigation:ht},data:function(){return{Utils:B,TVUtils:F,tab:null,is_loading:!0,interval_ids:[],channels_list:new Map,pinned_channel_ids:[]}},created:function(){var t=this;this.update();var e=60-Math.floor((new Date).getTime()/1e3)%60;this.interval_ids.push(window.setTimeout((function(){t.update(),t.interval_ids.push(window.setInterval((function(){t.update()}),3e4))}),1e3*e))},beforeDestroy:function(){var t,e=Object(Q["a"])(this.interval_ids);try{for(e.s();!(t=e.n()).done;){var n=t.value;window.clearInterval(n)}}catch(a){e.e(a)}finally{e.f()}},methods:{update:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["default"].axios.get("/channels");case 3:n=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e["catch"](0),console.error(e.t0),e.abrupt("return");case 10:a=function(t){return t.is_display},t.channels_list=new Map,n.data.GR.length>0&&t.channels_list.set("地デジ",n.data.GR.filter(a)),n.data.BS.length>0&&t.channels_list.set("BS",n.data.BS.filter(a)),n.data.CS.length>0&&t.channels_list.set("CS",n.data.CS.filter(a)),n.data.CATV.length>0&&t.channels_list.set("CATV",n.data.CATV.filter(a)),n.data.SKY.length>0&&t.channels_list.set("SKY",n.data.SKY.filter(a)),n.data.STARDIGIO.length>0&&t.channels_list.set("StarDigio",n.data.STARDIGIO.filter(a)),t.updatePinnedChannelList(!!t.is_loading),t.is_loading=!1;case 20:case"end":return e.stop()}}),e,null,[[0,6]])})))()},addPinnedChannel:function(t){this.pinned_channel_ids=B.getSettingsItem("pinned_channel_ids"),this.pinned_channel_ids.push(t),B.setSettingsItem("pinned_channel_ids",this.pinned_channel_ids),this.updatePinnedChannelList()},removePinnedChannel:function(t){this.pinned_channel_ids=B.getSettingsItem("pinned_channel_ids"),this.pinned_channel_ids.splice(this.pinned_channel_ids.indexOf(t),1),B.setSettingsItem("pinned_channel_ids",this.pinned_channel_ids),this.updatePinnedChannelList()},updatePinnedChannelList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.pinned_channel_ids=B.getSettingsItem("pinned_channel_ids");var n,a=[],s=Object(Q["a"])(this.pinned_channel_ids);try{var i=function(){var e=n.value,s=F.getChannelType(e,!0);a.push(t.channels_list.get(s).find((function(t){return t.channel_id===e})))};for(s.s();!(n=s.n()).done;)i()}catch(r){s.e(r)}finally{s.f()}this.channels_list.has("ピン留め")?this.channels_list.set("ピン留め",a):this.channels_list=new Map([["ピン留め",a]].concat(Object(E["a"])(this.channels_list))),0===a.length&&!0===e&&(this.tab=1)},isPinnedChannel:function(t){return this.pinned_channel_ids.includes(t)}}}),gt=vt,ft=(n("92b8"),n("c1d7"),n("71a3")),wt=Object(_["a"])(gt,X,Z,!1,null,"031aa91d",null),bt=wt.exports;h()(wt,{VSpacer:nt["a"],VTab:ft["a"]}),it()(wt,{Ripple:rt["a"]});var yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"route-container"},[n("main",{staticClass:"watch-container",class:{"watch-container--control-display":t.is_control_display,"watch-container--panel-display":t.is_panel_display,"watch-container--fullscreen":t.is_fullscreen}},[n("nav",{staticClass:"watch-navigation",on:{mousemove:function(e){return t.controlDisplayTimer(e)},touchmove:function(e){return t.controlDisplayTimer(e)},click:function(e){return t.controlDisplayTimer(e)}}},[n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__icon",attrs:{to:"/tv/"}},[n("img",{staticClass:"watch-navigation__icon-image",attrs:{src:"/assets/images/icon.svg",width:"23px"}})]),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.right",value:"テレビをみる",expression:"'テレビをみる'",modifiers:{right:!0}}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/tv/"}},[n("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:tv-20-regular",width:"26px"}})],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.right",value:"ビデオをみる",expression:"'ビデオをみる'",modifiers:{right:!0}}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/videos/"}},[n("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:movies-and-tv-20-regular",width:"26px"}})],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.right",value:"番組表",expression:"'番組表'",modifiers:{right:!0}}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/timetable/"}},[n("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:calendar-ltr-20-regular",width:"26px"}})],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.right",value:"キャプチャ",expression:"'キャプチャ'",modifiers:{right:!0}}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/captures/"}},[n("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:image-multiple-24-regular",width:"26px"}})],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.right",value:"ウォッチリスト",expression:"'ウォッチリスト'",modifiers:{right:!0}}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/watchlists/"}},[n("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"ic:round-playlist-play",width:"26px"}})],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.right",value:"視聴履歴",expression:"'視聴履歴'",modifiers:{right:!0}}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/histories/"}},[n("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:history-16-regular",width:"26px"}})],1),n("v-spacer"),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.right",value:"設定",expression:"'設定'",modifiers:{right:!0}}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/settings/"}},[n("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:settings-20-regular",width:"26px"}})],1),n("a",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.right",value:"version "+t.Utils.version,expression:"`version ${Utils.version}`",modifiers:{right:!0}}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",href:"https://github.com/tsukumijima/KonomiTV"}},[n("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:info-16-regular",width:"26px"}})],1)],1),n("div",{staticClass:"watch-content",on:{mousemove:function(e){return t.controlDisplayTimer(e,!0)},touchmove:function(e){return t.controlDisplayTimer(e,!0)},click:function(e){return t.controlDisplayTimer(e,!0)}}},[n("header",{staticClass:"watch-header"},[n("img",{staticClass:"watch-header__broadcaster",attrs:{src:t.Utils.api_base_url+"/channels/"+t.$route.params.channel_id+"/logo"}}),n("span",{staticClass:"watch-header__program-title",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(t.channel.program_present,"title"))}}),n("span",{staticClass:"watch-header__program-time"},[t._v(t._s(t.TVUtils.getProgramTime(t.channel.program_present,!0)))]),n("v-spacer"),n("span",{staticClass:"watch-header__now"},[t._v(t._s(t.time))])],1),n("div",{staticClass:"watch-player",class:{"watch-player--loading":t.is_loading}},[n("div",{staticClass:"watch-player__background",class:{"watch-player__background--display":t.is_background_display},style:{backgroundImage:"url("+t.background_url+")"}},[n("img",{staticClass:"watch-player__background-logo",attrs:{src:"/assets/images/logo.svg"}})]),n("div",{staticClass:"watch-player__dplayer"}),n("div",{staticClass:"watch-player__button",on:{mousemove:function(e){return t.controlDisplayTimer(e)},touchmove:function(e){return t.controlDisplayTimer(e)},click:function(e){return t.controlDisplayTimer(e)}}},[n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.top",value:"前のチャンネル",expression:"'前のチャンネル'",modifiers:{top:!0}}],staticClass:"switch-button switch-button-up",attrs:{to:"/tv/watch/"+t.channel_previous.channel_id}},[n("Icon",{staticClass:"switch-button-icon",attrs:{icon:"fluent:ios-arrow-left-24-filled",width:"32px",rotate:"1"}})],1),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"switch-button switch-button-panel switch-button-panel--open",on:{click:function(e){t.is_panel_display=!t.is_panel_display}}},[n("Icon",{staticClass:"switch-button-icon",attrs:{icon:"fluent:navigation-16-filled",width:"32px"}})],1),n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"tooltip",rawName:"v-tooltip.bottom",value:"次のチャンネル",expression:"'次のチャンネル'",modifiers:{bottom:!0}}],staticClass:"switch-button switch-button-down",attrs:{to:"/tv/watch/"+t.channel_next.channel_id}},[n("Icon",{staticClass:"switch-button-icon",attrs:{icon:"fluent:ios-arrow-right-24-filled",width:"33px",rotate:"1"}})],1)],1)])]),n("div",{staticClass:"watch-panel",on:{mousemove:function(e){return t.controlDisplayTimer(e)},touchmove:function(e){return t.controlDisplayTimer(e)},click:function(e){return t.controlDisplayTimer(e)}}},[n("div",{staticClass:"watch-panel__header"},[n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-close-button",on:{click:function(e){t.is_panel_display=!1}}},[n("Icon",{staticClass:"panel-close-button__icon",attrs:{icon:"akar-icons:chevron-right",width:"25px"}}),n("span",{staticClass:"panel-close-button__text"},[t._v("閉じる")])],1),n("v-spacer"),n("div",{staticClass:"panel-broadcaster"},[n("img",{staticClass:"panel-broadcaster__icon",attrs:{src:t.Utils.api_base_url+"/channels/"+t.$route.params.channel_id+"/logo"}}),n("div",{staticClass:"panel-broadcaster__number"},[t._v(t._s(t.channel.channel_number))]),n("div",{staticClass:"panel-broadcaster__name"},[t._v(t._s(t.channel.channel_name))])])],1),n("div",{staticClass:"watch-panel__content-container"},[n("Program",{staticClass:"watch-panel__content",class:{"watch-panel__content--active":"Program"===t.panel_active_tab},attrs:{channel:t.channel}}),n("Channel",{staticClass:"watch-panel__content",class:{"watch-panel__content--active":"Channel"===t.panel_active_tab},attrs:{channels_list:t.channels_list}}),n("Comment",{ref:"Comment",staticClass:"watch-panel__content",class:{"watch-panel__content--active":"Comment"===t.panel_active_tab},attrs:{channel:t.channel,player:t.player}}),n("Twitter",{ref:"Twitter",staticClass:"watch-panel__content",class:{"watch-panel__content--active":"Twitter"===t.panel_active_tab},attrs:{channel:t.channel,player:t.player}})],1),n("div",{staticClass:"watch-panel__navigation"},[n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-navigation-button",class:{"panel-navigation-button--active":"Program"===t.panel_active_tab},on:{click:function(e){t.panel_active_tab="Program"}}},[n("Icon",{staticClass:"panel-navigation-button__icon",attrs:{icon:"fa-solid:info-circle",width:"33px"}}),n("span",{staticClass:"panel-navigation-button__text"},[t._v("番組情報")])],1),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-navigation-button",class:{"panel-navigation-button--active":"Channel"===t.panel_active_tab},on:{click:function(e){t.panel_active_tab="Channel"}}},[n("Icon",{staticClass:"panel-navigation-button__icon",attrs:{icon:"fa-solid:broadcast-tower",width:"34px"}}),n("span",{staticClass:"panel-navigation-button__text"},[t._v("チャンネル")])],1),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-navigation-button",class:{"panel-navigation-button--active":"Comment"===t.panel_active_tab},on:{click:function(e){t.panel_active_tab="Comment"}}},[n("Icon",{staticClass:"panel-navigation-button__icon",attrs:{icon:"bi:chat-left-text-fill",width:"29px"}}),n("span",{staticClass:"panel-navigation-button__text"},[t._v("コメント")])],1),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-navigation-button",class:{"panel-navigation-button--active":"Twitter"===t.panel_active_tab},on:{click:function(e){t.panel_active_tab="Twitter"}}},[n("Icon",{staticClass:"panel-navigation-button__icon",attrs:{icon:"fa-brands:twitter",width:"34px"}}),n("span",{staticClass:"panel-navigation-button__text"},[t._v("Twitter")])],1)])])]),n("v-dialog",{attrs:{"max-width":"1000",transition:"slide-y-transition"},model:{value:t.shortcut_key_modal,callback:function(e){t.shortcut_key_modal=e},expression:"shortcut_key_modal"}},[n("v-card",[n("v-card-title",{staticClass:"px-5 pt-4 pb-3 d-flex align-center font-weight-bold"},[n("Icon",{attrs:{icon:"fluent:keyboard-20-filled",height:"28px"}}),n("span",{staticClass:"ml-3"},[t._v("キーボードショートカット")])],1),n("div",{staticClass:"px-5 pb-4"},[n("v-row",t._l(t.shortcut_key_list,(function(e,a){return n("v-col",{key:a,attrs:{cols:"6"}},t._l(e,(function(e){return n("div",{key:e.name,staticClass:"mt-3"},[n("div",{staticClass:"text-subtitle-1 d-flex align-center font-weight-bold"},[n("Icon",{attrs:{icon:e.icon,height:e.icon_height}}),n("span",{staticClass:"ml-2"},[t._v(t._s(e.name))])],1),t._l(e.shortcuts,(function(e){return n("div",{key:e.name,staticClass:"mt-3"},[n("div",{staticClass:"text-subtitle-2 mt-2 d-flex align-center font-weight-medium"},[n("span",{staticClass:"mr-2",domProps:{innerHTML:t._s(e.name)}}),n("div",{staticClass:"ml-auto d-flex align-center flex-shrink-0"},t._l(e.keys,(function(a,s){return n("div",{key:a.name,staticClass:"ml-auto d-flex align-center"},[n("span",{staticClass:"shortcut-key"},[t._l(a.name.split(";"),(function(t){return n("Icon",{directives:[{name:"show",rawName:"v-show",value:!0===a.icon,expression:"key.icon === true"}],key:t,attrs:{icon:t,height:"18px"}})})),!1===a.icon?n("span",{domProps:{innerHTML:t._s(a.name)}}):t._e()],2),s<e.keys.length-1?n("span",{staticClass:"shortcut-key-plus"},[t._v("+")]):t._e()])})),0)])])}))],2)})),0)})),1)],1),n("v-divider"),n("v-card-actions",{staticClass:"px-5 py-3"},[n("v-spacer"),n("v-btn",{attrs:{color:"background lighten-2 px-3",elevation:"0"},on:{click:function(e){t.shortcut_key_modal=!1}}},[t._v("閉じる")])],1)],1)],1)],1)},xt=[],Ct=n("3835"),kt=(n("b0c0"),n("38cf"),n("a9e3"),n("498a"),n("f7a5")),Tt=n.n(kt),It=n("40b9"),St=n.n(It),At={id:"NID0-SID0",service_id:0,network_id:0,event_id:0,channel_id:"gr000",title:"取得中…",description:"取得中…",detail:{},start_time:"2000-01-01T00:00:00+09:00",end_time:"2000-01-01T00:00:00+09:00",duration:0,is_free:!0,genre:[],video_type:"映像1080i(1125i)、アスペクト比16:9 パンベクトルなし",video_codec:"mpeg2",video_resolution:"1080i",primary_audio_type:"2/0モード(ステレオ)",primary_audio_language:"日本語",primary_audio_sampling_rate:"48kHz",secondary_audio_type:null,secondary_audio_language:null,secondary_audio_sampling_rate:null},Ot={id:"NID0-SID0",service_id:0,network_id:0,transport_stream_id:null,remocon_id:null,channel_id:"gr000",channel_number:"---",channel_name:"取得中…",channel_type:"GR",channel_force:null,channel_comment:null,is_subchannel:!1,is_radiochannel:!1,is_display:!0,viewers:0,program_present:At,program_following:At},Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channels-container channels-container--watch"},[n("v-tabs-fix",{staticClass:"channels-tab",attrs:{centered:"","show-arrows":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(Array.from(t.channels_list),(function(e){var a=e[0];return n("v-tab",{key:a,staticClass:"channels-tab__item"},[t._v(" "+t._s(a)+" ")])})),1),n("div",{staticClass:"channels-list-container"},[n("v-tabs-items-fix",{staticClass:"channels-list",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(Array.from(t.channels_list),(function(e){var a=e[0],s=e[1];return n("v-tab-item-fix",{key:a,staticClass:"channels"},t._l(s,(function(e){return n("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticClass:"channel",attrs:{to:"/tv/watch/"+e.channel_id}},[n("div",{staticClass:"channel__broadcaster"},[n("img",{staticClass:"channel__broadcaster-icon",attrs:{src:t.Utils.api_base_url+"/channels/"+e.channel_id+"/logo"}}),n("div",{staticClass:"channel__broadcaster-content"},[n("span",{staticClass:"channel__broadcaster-name"},[t._v("Ch: "+t._s(e.channel_number)+" "+t._s(e.channel_name))]),n("div",{staticClass:"channel__broadcaster-force",class:"channel__broadcaster-force--"+t.TVUtils.getChannelForceType(e.channel_force)},[n("Icon",{attrs:{icon:"fa-solid:fire-alt",height:"11px"}}),n("span",{staticClass:"ml-1"},[t._v(t._s(t.TVUtils.getAttribute(e,"channel_force","-")))])],1)])]),n("div",{staticClass:"channel__program-present"},[n("span",{staticClass:"channel__program-present-title",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(e.program_present,"title"))}}),n("span",{staticClass:"channel__program-present-time"},[t._v(t._s(t.TVUtils.getProgramTime(e.program_present)))])]),n("div",{staticClass:"channel__program-following"},[n("div",{staticClass:"channel__program-following-title"},[n("span",{staticClass:"channel__program-following-title-decorate"},[t._v("NEXT")]),n("Icon",{staticClass:"channel__program-following-title-icon",attrs:{icon:"fluent:fast-forward-20-filled",width:"16px"}}),n("span",{staticClass:"channel__program-following-title-text",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(e.program_following,"title"))}})],1),n("span",{staticClass:"channel__program-following-time"},[t._v(t._s(t.TVUtils.getProgramTime(e.program_following)))])]),n("div",{staticClass:"channel__progressbar"},[n("div",{staticClass:"channel__progressbar-progress",style:"width:"+t.TVUtils.getProgramProgress(e.program_present)+"%;"})])])})),1)})),1)],1)],1)},Pt=[],Vt=i["default"].extend({name:"Channel",props:{channels_list:{type:Map,required:!0}},data:function(){return{Utils:B,TVUtils:F,tab:null}}}),jt=Vt,Et=(n("1817"),n("590c"),Object(_["a"])(jt,Rt,Pt,!1,null,"691b389f",null)),Nt=Et.exports;h()(Et,{VTab:ft["a"]}),it()(Et,{Ripple:rt["a"]});var Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-container"},[n("section",{staticClass:"comment-header"},[n("h2",{staticClass:"comment-header__title"},[n("Icon",{staticClass:"comment-header__title-icon",attrs:{icon:"bi:chat-left-text-fill",height:"18.5px"}}),n("span",{staticClass:"comment-header__title-text"},[t._v("コメント")])],1),n("button",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"comment-header__button ml-auto"},[n("Icon",{attrs:{icon:"heroicons-solid:filter",height:"11px"}}),n("span",{staticClass:"ml-1"},[t._v("ミュート設定")])],1)]),n("DynamicScroller",{staticClass:"comment-list",attrs:{direction:"vertical",items:t.comment_list,"min-item-size":34},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item,s=e.active;return[n("DynamicScrollerItem",{attrs:{item:a,active:s,"size-dependencies":[a.text]}},[n("div",{staticClass:"comment"},[n("span",{staticClass:"comment__text"},[t._v(t._s(a.text))]),n("span",{staticClass:"comment__time"},[t._v(t._s(a.time))])])])]}}])}),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"comment-scroll-button elevation-5",class:{"comment-scroll-button--display":t.is_manual_scroll},on:{click:function(e){t.is_manual_scroll=!1,t.scrollCommentList(!0)}}},[n("Icon",{attrs:{icon:"fluent:arrow-down-12-filled",height:"29px"}})],1)],1)},Lt=[],$t=(n("d9e2"),n("1276"),i["default"].extend({name:"Comment",props:{channel:{type:Object,required:!0},player:{type:null,required:!0}},data:function(){return{is_manual_scroll:!1,is_auto_scrolling:!1,user:null,comment_list:[],comment_list_element:null,watch_session:null,comment_session:null,initialize_failed_message:null,vpos_base_timestamp:0,keep_seat_interval_id:0,resize_observer:null,resize_observer_element:null}},beforeDestroy:function(){this.destroy(),null!==this.resize_observer&&this.resize_observer.unobserve(this.resize_observer_element)},watch:{channel:function(t,e){var n=this;return Object(O["a"])(regeneratorRuntime.mark((function a(){var s,r,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.channel_id===e.channel_id){a.next=42;break}if("gr000"===e.channel_id){a.next=6;break}return a.next=4,B.sleep(.5);case 4:if(n.channel.channel_id===t.channel_id){a.next=6;break}return a.abrupt("return");case 6:return n.destroy(),null===n.comment_list_element&&(n.comment_list_element=n.$el.querySelector(".comment-list")),s=!1,n.comment_list_element.onmousedown=function(t){var e=t.clientX-n.comment_list_element.getBoundingClientRect().left;e>n.comment_list_element.clientWidth&&(s=!0)},n.comment_list_element.onmouseup=function(t){var e=t.clientX-n.comment_list_element.getBoundingClientRect().left;e>n.comment_list_element.clientWidth&&(s=!1)},r=function(){s=!0,window.setTimeout((function(){return s=!1}),100)},o=!1,n.comment_list_element.ontouchstart=function(){return o=!0},n.comment_list_element.ontouchend=function(){return o=!1},n.comment_list_element.ontouchmove=function(){return!0===o?r():""},n.comment_list_element.onwheel=r,n.comment_list_element.onscroll=Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==n.is_auto_scrolling||!0!==s){t.next=5;break}return n.is_manual_scroll=!0,t.next=4,B.sleep(.1);case 4:n.comment_list_element.scrollTop+n.comment_list_element.offsetHeight>n.comment_list_element.scrollHeight-10&&(n.is_manual_scroll=!1);case 5:case"end":return t.stop()}}),t)}))),a.next=20,n.initReserveObserver();case 20:return a.prev=20,a.next=23,i["default"].axios.get("/users/me");case 23:n.user=a.sent.data,a.next=29;break;case 26:a.prev=26,a.t0=a["catch"](20),n.user=null;case 29:return a.prev=29,a.next=32,n.initWatchSession();case 32:return c=a.sent,n.vpos_base_timestamp=100*L()(c["vpos_base_time"]).unix(),a.next=36,n.initCommentSession(c);case 36:a.next=42;break;case 38:a.prev=38,a.t1=a["catch"](29),n.initialize_failed_message=a.t1.message,console.error(a.t1.toString());case 42:case"end":return a.stop()}}),a,null,[[20,26],[29,38]])})))()}},methods:{initWatchSession:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["default"].axios.get("/channels/".concat(t.channel.channel_id,"/jikkyo"));case 3:n=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e["catch"](0),new Error(e.t0);case 9:if(!1!==n.data.is_success){e.next=12;break}throw"このチャンネルのニコニコ実況はありません。"!==n.data.detail&&"現在放送中のニコニコ実況がありません。"!==n.data.detail&&t.player.notice(n.data.detail),new Error(n.data.detail);case 12:return e.abrupt("return",new Promise((function(e){t.watch_session=new WebSocket(n.data.audience_token),t.watch_session.addEventListener("open",(function(){t.watch_session.send(JSON.stringify({type:"startWatching",data:{reconnect:!1}}))})),t.watch_session.addEventListener("message",function(){var n=Object(O["a"])(regeneratorRuntime.mark((function n(a){var s,i,r,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:s=JSON.parse(a.data),n.t0=s.type,n.next="room"===n.t0?4:"seat"===n.t0?5:"ping"===n.t0?7:"error"===n.t0?9:"reconnect"===n.t0?33:"disconnect"===n.t0?43:79;break;case 4:return n.abrupt("return",e({message_server:s.data.messageServer.uri,thread_id:s.data.threadId,vpos_base_time:s.data.vposBaseTime,your_post_key:s.data.yourPostKey?s.data.yourPostKey:null}));case 5:return t.keep_seat_interval_id=window.setInterval((function(){1===t.watch_session.readyState?t.watch_session.send(JSON.stringify({type:"keepSeat"})):window.clearInterval(t.keep_seat_interval_id)}),1e3*s.data.keepIntervalSec),n.abrupt("break",79);case 7:return t.watch_session.send(JSON.stringify({type:"pong"})),n.abrupt("break",79);case 9:n.t1=s.data.code,n.next="CONNECT_ERROR"===n.t1?12:"CONTENT_NOT_READY"===n.t1?14:"NO_THREAD_AVAILABLE"===n.t1?16:"NO_ROOM_AVAILABLE"===n.t1?18:"NO_PERMISSION"===n.t1?20:"NOT_ON_AIR"===n.t1?22:"BROADCAST_NOT_FOUND"===n.t1?24:"INTERNAL_SERVERERROR"===n.t1?26:28;break;case 12:return i="コメントサーバーに接続できません。",n.abrupt("break",30);case 14:return i="ニコニコ実況が配信できない状態です。",n.abrupt("break",30);case 16:return i="コメントスレッドを取得できません。",n.abrupt("break",30);case 18:return i="コメント部屋を取得できません。",n.abrupt("break",30);case 20:return i="API にアクセスする権限がありません。",n.abrupt("break",30);case 22:return i="ニコニコ実況が放送中ではありません。",n.abrupt("break",30);case 24:return i="ニコニコ実況の配信情報を取得できません。",n.abrupt("break",30);case 26:return i="ニコニコ実況でサーバーエラーが発生しています。",n.abrupt("break",30);case 28:return i="ニコニコ実況でエラーが発生しています。(".concat(s.data.code,")"),n.abrupt("break",30);case 30:return console.log("error occurred. code: ".concat(s.data.code)),t.player.danmaku.showing&&t.player.notice(i),n.abrupt("break",79);case 33:return n.next=35,B.sleep(s.data.waitTimeSec);case 35:return t.player.danmaku.showing&&t.player.notice("ニコニコ実況に再接続しています…"),t.destroy(),n.next=39,t.initWatchSession();case 39:return r=n.sent,n.next=42,t.initCommentSession(r);case 42:return n.abrupt("break",79);case 43:t.watch_session&&(t.watch_session.onclose=null),n.t2=s.data.reason,n.next="TAKEOVER"===n.t2?47:"NO_PERMISSION"===n.t2?49:"END_PROGRAM"===n.t2?51:"PING_TIMEOUT"===n.t2?53:"TOO_MANY_CONNECTIONS"===n.t2?55:"TOO_MANY_WATCHINGS"===n.t2?57:"CROWDED"===n.t2?59:"MAINTENANCE_IN"===n.t2?61:"SERVICE_TEMPORARILY_UNAVAILABLE"===n.t2?63:65;break;case 47:return o="ニコニコ実況の番組から追い出されました。",n.abrupt("break",67);case 49:return o="ニコニコ実況の番組の座席を取得できませんでした。",n.abrupt("break",67);case 51:return o="ニコニコ実況がリセットされたか、コミュニティの番組が終了しました。",n.abrupt("break",67);case 53:return o="コメントサーバーとの接続生存確認に失敗しました。",n.abrupt("break",67);case 55:return o="ニコニコ実況の同一ユーザからの接続数上限を越えています。",n.abrupt("break",67);case 57:return o="ニコニコ実況の同一ユーザからの視聴番組数上限を越えています。",n.abrupt("break",67);case 59:return o="ニコニコ実況の番組が満席です。",n.abrupt("break",67);case 61:return o="ニコニコ実況はメンテナンス中です。",n.abrupt("break",67);case 63:return o="ニコニコ実況で一時的にサーバーエラーが発生しています。",n.abrupt("break",67);case 65:return o="ニコニコ実況との接続が切断されました。(".concat(s.data.reason,")"),n.abrupt("break",67);case 67:return console.log("disconnected. reason: ".concat(s.data.reason)),t.player.danmaku.showing&&t.player.notice(o),n.next=71,B.sleep(5);case 71:return t.player.danmaku.showing&&t.player.notice("ニコニコ実況に再接続しています…"),t.destroy(),n.next=75,t.initWatchSession();case 75:return c=n.sent,n.next=78,t.initCommentSession(c);case 78:return n.abrupt("break",79);case 79:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()),t.watch_session.onclose=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("disconnected. code: ".concat(n.code)),t.player.danmaku.showing&&t.player.notice("ニコニコ実況との接続が切断されました。(code: ".concat(n.code,")")),e.next=4,B.sleep(10);case 4:return t.player.danmaku.showing&&t.player.notice("ニコニコ実況に再接続しています…"),t.destroy(),e.next=8,t.initWatchSession();case 8:return a=e.sent,e.next=11,t.initCommentSession(a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})));case 13:case"end":return e.stop()}}),e,null,[[0,6]])})))()},initCommentSession:function(t){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=[],s=!1,e.comment_session=new WebSocket(t.message_server),e.comment_session.addEventListener("open",(function(){e.comment_session.send(JSON.stringify([{ping:{content:"rs:0"}},{ping:{content:"ps:0"}},{thread:{version:"20061206",thread:t.thread_id,threadkey:t.your_post_key,user_id:"",res_from:-50}},{ping:{content:"pf:0"}},{ping:{content:"rf:0"}}]))})),e.comment_session.addEventListener("message",function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(n){var i,r,o,c,l,u,d,p,_,m,h,v;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=JSON.parse(n.data),void 0!==i.thread&&(0===i.thread.resultcode||(r="コメントサーバーに接続できませんでした。",console.error("Error: "+r))),void 0!==i.ping&&"rf:0"===i.ping.content&&(s=!0,e.scrollCommentList()),o=i.chat,void 0!==o&&void 0!==o.content&&!o.content.match(/\/[a-z]+ /)){t.next=6;break}return t.abrupt("return");case 6:if(!o.yourpost||1!==o.yourpost){t.next=8;break}return t.abrupt("return");case 8:if(c="#FFEAEA",l="right",u="medium",void 0!==o.mail&&null!==o.mail){d=o.mail.replace("184","").split(" "),p=Object(Q["a"])(d);try{for(p.s();!(_=p.n()).done;)m=_.value,null!==e.getCommentColor(m)&&(c=e.getCommentColor(m)),null!==e.getCommentPosition(m)&&(l=e.getCommentPosition(m)),"big"!==m&&"medium"!==m&&"small"!==m||(u=m)}catch(g){p.e(g)}finally{p.f()}}if(!s){t.next=16;break}return h=B.getSettingsItem("comment_delay_time"),t.next=16,B.sleep(h);case 16:if(e.comment_list.length>=500&&!1===e.is_manual_scroll)while(e.comment_list.length>=500)e.comment_list.shift();if(v={id:o.no,text:o.content,time:L()(1e3*o.date).format("HH:mm:ss")},"hidden"!==document.visibilityState){t.next=21;break}return a.push(v),t.abrupt("return");case 21:e.comment_list.push(v),s&&e.scrollCommentList(),s&&(e.player.video.paused||e.player.danmaku.draw({text:o.content,color:c,type:l,size:u}));case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.onvisibilitychange=function(){var t;"visible"===document.visibilityState&&((t=e.comment_list).push.apply(t,Object(E["a"])(a)),a=[],e.scrollCommentList())};case 6:case"end":return n.stop()}}),n)})))()},sendComment:function(t){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){var a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null===e.initialize_failed_message){n.next=3;break}return t.error(e.initialize_failed_message),n.abrupt("return");case 3:if(null!==e.user){n.next=6;break}return t.error("コメントするには、KonomiTV アカウントにログインしてください。"),n.abrupt("return");case 6:if(null!==e.user.niconico_user_id){n.next=9;break}return t.error("コメントするには、ニコニコアカウントと連携してください。"),n.abrupt("return");case 9:if(!1!==e.user.niconico_user_premium||"top"!==t.data.type&&"bottom"!==t.data.type){n.next=12;break}return t.error("コメントを上下に固定するには、ニコニコアカウントのプレミアム会員登録が必要です。"),n.abrupt("return");case 12:if(!1!==e.user.niconico_user_premium||"big"!==t.data.size){n.next=15;break}return t.error("コメントサイズを大きめに設定するには、ニコニコアカウントのプレミアム会員登録が必要です。"),n.abrupt("return");case 15:a={"#FFEAEA":"white","#F02840":"red","#FD7E80":"pink","#FDA708":"orange","#FFE133":"yellow","#64DD17":"green","#00D4F5":"cyan","#4763FF":"blue"},s={top:"ue",right:"naka",bottom:"shita"},i=Math.floor((new Date).getTime()/10)-e.vpos_base_timestamp,e.watch_session.send(JSON.stringify({type:"postComment",data:{text:t.data.text,color:a[t.data.color.toUpperCase()],position:s[t.data.type],size:t.data.size,vpos:i,isAnonymous:!0}})),e.watch_session.onmessage=function(n){var a=JSON.parse(n.data);switch(a.type){case"postCommentResult":t.success(),e.watch_session.onmessage=null;break;case"error":var s="コメントの送信に失敗しました。(".concat(a.data.code,")");switch(a.data.code){case"COMMENT_POST_NOT_ALLOWED":s="コメントが許可されていません。";break;case"INVALID_MESSAGE":s="コメント内容が無効です。";break}t.error(s),e.watch_session.onmessage=null;break}};case 20:case"end":return n.stop()}}),n)})))()},initReserveObserver:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.resize_observer_element=document.querySelector(".watch-player"),n=null,a=function(){var e=document.querySelector(".dplayer-video-wrap-aspect"),a=document.querySelector(".dplayer-danmaku");if(null!==t.resize_observer_element&&null!==t.resize_observer_element.clientHeight&&null!==e&&null!==e.clientHeight){var s=(t.resize_observer_element.clientHeight-e.clientHeight)/2,i=window.matchMedia("(max-height: 450px)").matches?50:66;if(s<i){var r=2*(i-s),o=e.clientWidth,c=e.clientHeight-r,l=function t(e,n){return 0===n?e:t(n,e%n)},u=l(o,c),d="".concat(o/u," / ").concat(c/u);a.style.transition="none",a.style.setProperty("--comment-area-aspect-ratio",d),a.style.setProperty("--comment-area-vertical-margin","".concat(r,"px")),window.clearTimeout(n),window.setTimeout((function(){a.style.transition=""}),200)}else a.style.removeProperty("--comment-area-aspect-ratio"),a.style.removeProperty("--comment-area-vertical-margin")}},t.resize_observer=new ResizeObserver(a),t.resize_observer.observe(t.resize_observer_element),window.setTimeout(a,600);case 6:case"end":return e.stop()}}),e)})))()},scrollCommentList:function(){var t=arguments,e=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>0&&void 0!==t[0]&&t[0],!0!==e.is_manual_scroll){n.next=3;break}return n.abrupt("return");case 3:e.is_auto_scrolling=!0,s=0;case 5:if(!(s<3)){n.next=12;break}return n.next=8,B.sleep(.01);case 8:!0===a?e.comment_list_element.scrollTo({top:e.comment_list_element.scrollHeight,left:0,behavior:"smooth"}):e.comment_list_element.scrollTo(0,e.comment_list_element.scrollHeight);case 9:s++,n.next=5;break;case 12:return n.next=14,B.sleep(.1);case 14:e.is_auto_scrolling=!1;case 15:case"end":return n.stop()}}),n)})))()},getCommentColor:function(t){var e={white:"#FFEAEA",red:"#F02840",pink:"#FD7E80",orange:"#FDA708",yellow:"#FFE133",green:"#64DD17",cyan:"#00D4F5",blue:"#4763FF",purple:"#D500F9",black:"#1E1310",white2:"#CCCC99",niconicowhite:"#CCCC99",red2:"#CC0033",truered:"#CC0033",pink2:"#FF33CC",orange2:"#FF6600",passionorange:"#FF6600",yellow2:"#999900",madyellow:"#999900",green2:"#00CC66",elementalgreen:"#00CC66",cyan2:"#00CCCC",blue2:"#3399FF",marineblue:"#3399FF",purple2:"#6633CC",nobleviolet:"#6633CC",black2:"#666666"};return void 0!==e[t]?e[t]:null},getCommentPosition:function(t){switch(t){case"ue":return"top";case"naka":return"right";case"shita":return"bottom";default:return null}},destroy:function(){this.comment_list=[],document.onvisibilitychange=null,null!==this.watch_session&&(this.watch_session.onclose=null,this.watch_session.close(),this.watch_session=null),null!==this.comment_session&&(this.comment_session.onclose=null,this.comment_session.close(),this.comment_session=null),window.clearInterval(this.keep_seat_interval_id)}}})),Ft=$t,Bt=(n("7dd2"),Object(_["a"])(Ft,Dt,Lt,!1,null,"e6d31362",null)),Ht=Bt.exports;it()(Bt,{Ripple:rt["a"]});var Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"program-container"},[n("section",{staticClass:"program-broadcaster"},[n("img",{staticClass:"program-broadcaster__icon",attrs:{src:t.Utils.api_base_url+"/channels/"+t.$route.params.channel_id+"/logo"}}),n("div",{staticClass:"program-broadcaster__number"},[t._v("Ch: "+t._s(t.channel.channel_number))]),n("div",{staticClass:"program-broadcaster__name"},[t._v(t._s(t.channel.channel_name))])]),n("section",{staticClass:"program-info"},[n("h1",{staticClass:"program-info__title",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(t.channel.program_present,"title"))}}),n("div",{staticClass:"program-info__time"},[t._v(t._s(t.TVUtils.getProgramTime(t.channel.program_present)))]),n("div",{staticClass:"program-info__description",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(t.channel.program_present,"description"))}}),n("div",{staticClass:"program-info__genre-container"},t._l(t.TVUtils.getAttribute(t.channel.program_present,"genre",[]),(function(e,a){return n("div",{key:a,staticClass:"program-info__genre"},[t._v(" "+t._s(e.major)+" / "+t._s(e.middle)+" ")])})),0),n("div",{staticClass:"program-info__next"},[n("span",{staticClass:"program-info__next-decorate"},[t._v("NEXT")]),n("Icon",{staticClass:"program-info__next-icon",attrs:{icon:"fluent:fast-forward-20-filled",width:"16px"}})],1),n("span",{staticClass:"program-info__next-title",domProps:{innerHTML:t._s(t.TVUtils.decorateProgramInfo(t.channel.program_following,"title"))}}),n("div",{staticClass:"program-info__next-time"},[t._v(t._s(t.TVUtils.getProgramTime(t.channel.program_following)))]),n("div",{staticClass:"program-info__status"},[n("div",{staticClass:"program-info__status-force",class:"program-info__status-force--"+t.TVUtils.getChannelForceType(t.channel.channel_force)},[n("Icon",{attrs:{icon:"fa-solid:fire-alt",height:"14px"}}),n("span",{staticClass:"ml-2"},[t._v("勢い:")]),n("span",{staticClass:"ml-2"},[t._v(t._s(t.TVUtils.getAttribute(t.channel,"channel_force","--"))+" コメ/分")])],1),n("div",{staticClass:"program-info__status-viewers ml-5"},[n("Icon",{attrs:{icon:"fa-solid:eye",height:"14px"}}),n("span",{staticClass:"ml-2"},[t._v("視聴数:")]),n("span",{staticClass:"ml-1"},[t._v(t._s(t.channel.viewers))])],1)])]),n("section",{staticClass:"program-detail-container"},t._l(t.TVUtils.getAttribute(t.channel.program_present,"detail",{}),(function(e,a){return n("div",{key:a,staticClass:"program-detail"},[n("h2",{staticClass:"program-detail__heading"},[t._v(t._s(a))]),n("div",{staticClass:"program-detail__text",domProps:{innerHTML:t._s(t.Utils.URLtoLink(e))}})])})),0)])},Ut=[],zt=i["default"].extend({name:"Program",props:{channel:{type:Object,required:!0}},data:function(){return{Utils:B,TVUtils:F}}}),Kt=zt,qt=(n("e827"),Object(_["a"])(Kt,Mt,Ut,!1,null,"793f371f",null)),Wt=qt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"twitter-container"},[n("v-dialog",{attrs:{"content-class":"zoom-capture-modal-container","max-width":"980",transition:"slide-y-transition"},model:{value:t.zoom_capture_modal,callback:function(e){t.zoom_capture_modal=e},expression:"zoom_capture_modal"}},[n("div",{staticClass:"zoom-capture-modal"},[n("img",{staticClass:"zoom-capture-modal__image",attrs:{src:t.zoom_capture?t.zoom_capture.image_url:""}}),n("a",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"zoom-capture-modal__download",attrs:{href:t.zoom_capture?t.zoom_capture.image_url:"",download:t.zoom_capture?t.zoom_capture.filename:""}},[n("Icon",{attrs:{icon:"fa6-solid:download",width:"45px"}})],1)])]),n("div",{staticClass:"tab-container"},[n("div",{staticClass:"tab-content",class:{"tab-content--active":"Capture"===t.twitter_active_tab}},[n("div",{staticClass:"captures"},t._l(t.captures,(function(e){return n("div",{key:e.image_url,staticClass:"capture",class:{"capture--selected":e.selected,"capture--focused":e.focused,"capture--disabled":!e.selected&&t.tweet_captures.length>=4},on:{click:function(n){return t.clickCapture(e)}}},[n("img",{staticClass:"capture__image",attrs:{src:e.image_url}}),n("div",{staticClass:"capture__disabled-cover"}),n("div",{staticClass:"capture__selected-number"},[t._v(t._s(t.tweet_captures.findIndex((function(t){return t===e.blob}))+1))]),n("Icon",{staticClass:"capture__selected-checkmark",attrs:{icon:"fluent:checkmark-circle-16-filled"}}),n("div",{staticClass:"capture__selected-border"}),n("div",{staticClass:"capture__focused-border"}),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"capture__zoom",on:{click:function(n){n.preventDefault(),n.stopPropagation(),t.zoom_capture_modal=!0,t.zoom_capture=e},mousedown:function(t){t.preventDefault(),t.stopPropagation()}}},[n("Icon",{attrs:{icon:"fluent:zoom-in-16-regular",width:"32px"}})],1)],1)})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.captures.length,expression:"captures.length === 0"}],staticClass:"capture-announce"},[n("div",{staticClass:"capture-announce__heading"},[t._v("まだキャプチャがありません。")]),t._m(0)])])]),n("div",{staticClass:"tab-button-container"},[n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"tab-button",class:{"tab-button--active":"Search"===t.twitter_active_tab},on:{click:function(e){t.twitter_active_tab="Search"}}},[n("Icon",{attrs:{icon:"fluent:search-16-filled",height:"18px"}}),n("span",{staticClass:"tab-button__text"},[t._v("ツイート検索")])],1),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"tab-button",class:{"tab-button--active":"Timeline"===t.twitter_active_tab},on:{click:function(e){t.twitter_active_tab="Timeline"}}},[n("Icon",{attrs:{icon:"fluent:home-16-regular",height:"18px"}}),n("span",{staticClass:"tab-button__text"},[t._v("タイムライン")])],1),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"tab-button",class:{"tab-button--active":"Capture"===t.twitter_active_tab},on:{click:function(e){t.twitter_active_tab="Capture"}}},[n("Icon",{attrs:{icon:"fluent:image-copy-20-regular",height:"18px"}}),n("span",{staticClass:"tab-button__text"},[t._v("キャプチャ")])],1)]),n("div",{staticClass:"tweet-form",class:{"tweet-form--focused":t.is_tweet_hashtag_form_focused||t.is_tweet_text_form_focused}},[n("div",{staticClass:"tweet-form__hashtag"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.tweet_hashtag,expression:"tweet_hashtag"}],staticClass:"tweet-form__hashtag-form",attrs:{type:"text",placeholder:"#ハッシュタグ"},domProps:{value:t.tweet_hashtag},on:{input:[function(e){e.target.composing||(t.tweet_hashtag=e.target.value)},function(e){return t.updateTweetLetterCount()}],focus:function(e){t.is_tweet_hashtag_form_focused=!0},blur:function(e){t.is_tweet_hashtag_form_focused=!1}}}),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"tweet-form__hashtag-memory-button",on:{click:function(e){t.is_hashtag_list_display=!t.is_hashtag_list_display}}},[n("Icon",{attrs:{icon:"fluent:clipboard-text-ltr-32-regular",height:"22px"}})],1)]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tweet_text,expression:"tweet_text"}],staticClass:"tweet-form__textarea",attrs:{placeholder:"ツイート"},domProps:{value:t.tweet_text},on:{input:[function(e){e.target.composing||(t.tweet_text=e.target.value)},function(e){return t.updateTweetLetterCount()}],focus:function(e){t.is_tweet_text_form_focused=!0},blur:function(e){t.is_tweet_text_form_focused=!1}}}),n("div",{staticClass:"tweet-form__control"},[n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"account-button",class:{"account-button--no-login":!this.is_logged_in_twitter},on:{click:function(e){return t.clickAccountButton()}}},[n("img",{staticClass:"account-button__icon",attrs:{src:this.is_logged_in_twitter?this.selected_twitter_account.icon_url:"/assets/images/account-icon-default.png"}}),n("span",{staticClass:"account-button__screen-name"},[t._v(" "+t._s(this.is_logged_in_twitter?"@"+this.selected_twitter_account.screen_name:"連携されていません")+" ")]),n("Icon",{staticClass:"account-button__menu",attrs:{icon:"fluent:more-circle-20-regular",width:"22px"}})],1),n("div",{staticClass:"limit-meter"},[n("div",{staticClass:"limit-meter__content",class:{"limit-meter__content--yellow":this.tweet_letter_count<=20,"limit-meter__content--red":this.tweet_letter_count<=0}},[n("Icon",{staticStyle:{"margin-right":"-2px"},attrs:{icon:"fa-brands:twitter",width:"12px"}}),n("span",[t._v(t._s(t.tweet_letter_count))])],1),n("div",{staticClass:"limit-meter__content"},[n("Icon",{attrs:{icon:"fluent:image-16-filled",width:"14px"}}),n("span",[t._v(t._s(t.tweet_captures.length)+"/4")])],1)]),n("button",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"tweet-button",attrs:{disabled:!this.is_logged_in_twitter||this.tweet_letter_count<0||140===this.tweet_letter_count&&0===this.tweet_captures.length},on:{click:function(e){return t.sendTweet()}}},[n("Icon",{attrs:{icon:"fa-brands:twitter",height:"16px"}}),n("span",{staticClass:"ml-1"},[t._v("ツイート")])],1)])]),n("div",{staticClass:"twitter-account-list",class:{"twitter-account-list--display":t.is_twitter_account_list_display}},t._l(t.user.twitter_accounts,(function(e){return n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticClass:"twitter-account",on:{click:function(n){return t.updateSelectedTwitterAccount(e)}}},[n("img",{staticClass:"twitter-account__icon",attrs:{src:e.icon_url}}),n("div",{staticClass:"twitter-account__info"},[n("div",{staticClass:"twitter-account__name"},[t._v(t._s(e.name))]),n("div",{staticClass:"twitter-account__screen-name"},[t._v("@"+t._s(e.screen_name))])]),n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.id===t.selected_twitter_account_id,expression:"twitter_account.id === selected_twitter_account_id"}],staticClass:"twitter-account__check",attrs:{icon:"fluent:checkmark-16-filled",width:"24px"}})],1)})),0),n("div",{staticClass:"hashtag-list",class:{"hashtag-list--display":t.is_hashtag_list_display}},[n("div",{staticClass:"hashtag-heading"},[n("div",{staticClass:"hashtag-heading__text"},[n("Icon",{attrs:{icon:"charm:hash",width:"17px"}}),n("span",{staticClass:"ml-1"},[t._v("ハッシュタグリスト")])],1),n("button",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"hashtag-heading__add-button",on:{click:function(e){t.saved_twitter_hashtags.push({id:Date.now(),text:"#ここにハッシュタグを入力",editing:!1})}}},[n("Icon",{attrs:{icon:"fluent:add-12-filled",width:"17px"}}),n("span",{staticClass:"ml-1"},[t._v("追加")])],1)]),n("div",{staticClass:"hashtag-container"},t._l(t.saved_twitter_hashtags,(function(e){return n("div",{directives:[{name:"ripple",rawName:"v-ripple",value:!e.editing,expression:"!hashtag.editing"}],key:e.id,staticClass:"hashtag",class:{"hashtag--editing":e.editing},on:{click:function(n){t.tweet_hashtag=e.text,t.updateTweetLetterCount()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"hashtag.text"}],staticClass:"hashtag__input",attrs:{type:"text",disabled:!e.editing},domProps:{value:e.text},on:{click:function(t){t.stopPropagation()},input:function(n){n.target.composing||t.$set(e,"text",n.target.value)}}}),n("button",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"hashtag__edit-button",on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.editing=!e.editing}}},[n("Icon",{attrs:{icon:e.editing?"fluent:checkmark-16-filled":"fluent:edit-16-filled",width:"19px"}})],1),n("button",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"hashtag__delete-button",on:{click:function(n){n.preventDefault(),n.stopPropagation(),t.saved_twitter_hashtags.splice(t.saved_twitter_hashtags.indexOf(e),1)}}},[n("Icon",{attrs:{icon:"fluent:delete-16-filled",width:"19px"}})],1)])})),0)])],1)},Gt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"capture-announce__text"},[n("p",{staticClass:"mt-0 mb-0"},[t._v("プレイヤーのキャプチャボタンやショートカットキーでキャプチャを撮ると、ここに表示されます。")]),n("p",{staticClass:"mt-2 mb-0"},[t._v("表示されたキャプチャを選択してからツイートすると、キャプチャを付けてツイートできます。")])])}],Jt=(n("d81d"),n("5b81"),n("2ca0"),n("a15b"),i["default"].extend({name:"Twitter",props:{channel:{type:Object,required:!0},player:{type:null,required:!0}},data:function(){return{is_logged_in:null!==B.getAccessToken(),is_logged_in_twitter:!1,user:null,selected_twitter_account:null,selected_twitter_account_id:B.getSettingsItem("selected_twitter_account_id"),is_twitter_account_list_display:!1,saved_twitter_hashtags:B.getSettingsItem("saved_twitter_hashtags").map((function(t,e){return{id:Date.now()+e,text:t,editing:!1}})),is_hashtag_list_display:!1,twitter_active_tab:B.getSettingsItem("twitter_active_tab"),zoom_capture_modal:!1,zoom_capture:null,captures:[],captures_element:null,is_tweet_hashtag_form_focused:!1,is_tweet_text_form_focused:!1,tweet_hashtag:"",tweet_text:"",tweet_captures:[],tweet_letter_count:140}},created:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.user={id:0,name:"",is_admin:!0,niconico_user_id:null,niconico_user_name:null,niconico_user_premium:null,twitter_accounts:[],created_at:"",updated_at:""},!0!==t.is_logged_in){e.next=5;break}return e.next=4,t.syncAccountInfo();case 4:t.user.twitter_accounts.length>0&&(t.is_logged_in_twitter=!0,null!==t.selected_twitter_account_id&&t.user.twitter_accounts.some((function(e){return e.id===t.selected_twitter_account_id}))||(t.selected_twitter_account_id=t.user.twitter_accounts[0].id,B.setSettingsItem("selected_twitter_account_id",t.selected_twitter_account_id)),n=t.user.twitter_accounts.findIndex((function(e){return e.id===t.selected_twitter_account_id})),t.selected_twitter_account=t.user.twitter_accounts[n]);case 5:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var t,e=Object(Q["a"])(this.captures);try{for(e.s();!(t=e.n()).done;){var n=t.value;URL.revokeObjectURL(n.image_url)}}catch(a){e.e(a)}finally{e.f()}},watch:{saved_twitter_hashtags:{deep:!0,handler:function(){B.setSettingsItem("saved_twitter_hashtags",this.saved_twitter_hashtags.map((function(t){return t.text})))}}},methods:{syncAccountInfo:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["default"].axios.get("/users/me");case 3:t.user=e.sent.data,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),M.a.isAxiosError(e.t0)&&e.t0.response&&401===e.t0.response.status&&(t.is_logged_in=!1,t.user=null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},updateTweetLetterCount:function(){this.tweet_letter_count=140-Object(E["a"])(this.tweet_hashtag).length-Object(E["a"])(this.tweet_text).length},clickAccountButton:function(){if(!this.is_logged_in_twitter)return document.fullscreenElement&&document.exitFullscreen(),void this.$router.push({path:"/settings/twitter"});this.is_twitter_account_list_display=!this.is_twitter_account_list_display},updateSelectedTwitterAccount:function(t){var e=this;this.selected_twitter_account_id=t.id,B.setSettingsItem("selected_twitter_account_id",this.selected_twitter_account_id),this.selected_twitter_account=t,window.setTimeout((function(){return e.is_twitter_account_list_display=!1}),150)},clickCapture:function(t){if(this.tweet_captures.length<4&&!1===t.selected)t.selected=!0,this.tweet_captures.push(t.blob);else{var e=this.tweet_captures.findIndex((function(e){return e===t.blob}));e>-1&&this.tweet_captures.splice(e,1),t.selected=!1}},addCaptureList:function(t,e){var n=this;return Object(O["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:null===n.captures_element&&(n.captures_element=n.$el.querySelector(".tab-content")),n.captures.length>50&&(URL.revokeObjectURL(n.captures[0].image_url),n.captures.shift()),s=URL.createObjectURL(t),n.captures.push({blob:t,filename:e,image_url:s,selected:!1,focused:!1}),n.$nextTick((function(){n.captures_element.scrollTo({top:n.captures_element.scrollHeight,behavior:"smooth"})}));case 5:case"end":return a.stop()}}),a)})))()},drawProgramTitleOnCapture:function(t){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){var a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,createImageBitmap(t);case 2:a=n.sent,s="OffscreenCanvas"in window?new OffscreenCanvas(a.width,a.height):document.createElement("canvas"),i=s.getContext("2d"),i.drawImage(a,0,0),a.close(),i.font="bold 22px 'YakuHanJPs', 'Open Sans', 'Hiragino Sans', 'Noto Sans JP', sans-serif",i.fillStyle="rgba(255, 255, 255, 70%)",i.shadowColor="rgba(0, 0, 0, 100%)",i.shadowBlur=4,i.shadowOffsetX=0,i.shadowOffsetY=0,n.t0=B.getSettingsItem("tweet_capture_watermark_position"),n.next="TopLeft"===n.t0?16:"TopRight"===n.t0?20:"BottomLeft"===n.t0?24:"BottomRight"===n.t0?28:32;break;case 16:return i.textAlign="left",i.textBaseline="top",i.fillText(e.channel.program_present.title,16,12),n.abrupt("break",32);case 20:return i.textAlign="right",i.textBaseline="top",i.fillText(e.channel.program_present.title,s.width-16,12),n.abrupt("break",32);case 24:return i.textAlign="left",i.textBaseline="bottom",i.fillText(e.channel.program_present.title,16,s.height-12),n.abrupt("break",32);case 28:return i.textAlign="right",i.textBaseline="bottom",i.fillText(e.channel.program_present.title,s.width-16,s.height-12),n.abrupt("break",32);case 32:if(!("OffscreenCanvas"in window)){n.next=38;break}return n.next=35,s.convertToBlob({type:"image/jpeg",quality:1});case 35:return n.abrupt("return",n.sent);case 38:return n.abrupt("return",new Promise((function(t){return s.toBlob((function(e){return t(e)}),"image/jpeg",1)})));case 39:case"end":return n.stop()}}),n)})))()},sendTweet:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a,s,r,o,c,l,u,d,p,_,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in n=t.tweet_hashtag.trim().replaceAll("♯","#").replaceAll("＃","#").replaceAll("　","").replaceAll(/ +/g," ").split(" "),n)n[a].startsWith("#")||(n[a]="#".concat(n[a]));if(s=""!==t.tweet_hashtag?n.join(" "):"",r=t.tweet_text,""===s){e.next=16;break}e.t0=B.getSettingsItem("tweet_hashtag_position"),e.next="Prepend"===e.t0?8:"Append"===e.t0?10:"PrependWithLineBreak"===e.t0?12:"AppendWithLineBreak"===e.t0?14:16;break;case 8:return r="".concat(s," ").concat(t.tweet_text),e.abrupt("break",16);case 10:return r="".concat(t.tweet_text," ").concat(s),e.abrupt("break",16);case 12:return r="".concat(s,"\n").concat(t.tweet_text),e.abrupt("break",16);case 14:return r="".concat(t.tweet_text,"\n").concat(s),e.abrupt("break",16);case 16:o=new FormData,o.append("tweet",r),c=Object(Q["a"])(t.tweet_captures),e.prev=19,c.s();case 21:if((l=c.n()).done){e.next=30;break}if(u=l.value,"None"===B.getSettingsItem("tweet_capture_watermark_position")){e.next=27;break}return e.next=26,t.drawProgramTitleOnCapture(u);case 26:u=e.sent;case 27:o.append("images",u);case 28:e.next=21;break;case 30:e.next=35;break;case 32:e.prev=32,e.t1=e["catch"](19),c.e(e.t1);case 35:return e.prev=35,c.f(),e.finish(35);case 38:d=Object(Q["a"])(t.captures);try{for(d.s();!(p=d.n()).done;)_=p.value,_.selected=!1,_.focused=!1}catch(h){d.e(h)}finally{d.f()}return t.tweet_captures=[],t.tweet_text="",e.prev=42,e.next=45,i["default"].axios.post("/twitter/accounts/".concat(t.selected_twitter_account.screen_name,"/tweets"),o,{headers:{"Content-Type":"multipart/form-data"}});case 45:m=e.sent,t.player.notice(m.data.detail),e.next=53;break;case 49:e.prev=49,e.t2=e["catch"](42),console.error(e.t2),t.player.notice("ツイートの送信に失敗しました。");case 53:case"end":return e.stop()}}),e,null,[[19,32,35,38],[42,49]])})))()}}})),Xt=Jt,Zt=(n("b707"),n("ba01"),n("169a")),Qt=Object(_["a"])(Xt,Yt,Gt,!1,null,"3db0792d",null),te=Qt.exports;h()(Qt,{VDialog:Zt["a"]}),it()(Qt,{Ripple:rt["a"]});var ee=i["default"].extend({name:"Watch",components:{Channel:Nt,Comment:Ht,Program:Wt,Twitter:te},data:function(){return{Utils:B,TVUtils:F,time:L()().format("YYYY/MM/DD HH:mm:ss"),panel_active_tab:B.getSettingsItem("panel_active_tab"),background_url:"",is_loading:!0,is_background_display:!1,is_control_display:!0,is_panel_display:function(){switch(B.getSettingsItem("panel_display_state")){case"AlwaysDisplay":return!0;case"AlwaysFold":return!1;case"RestorePreviousState":return B.getSettingsItem("is_display_latest_panel")}}(),is_fullscreen:!1,is_ime_composing:!1,is_comment_send_just_did:!1,interval_ids:[],control_interval_id:0,channel_id:this.$route.params.channel_id,channel:Ot,channel_previous:Ot,channel_next:Ot,channels_list:new Map,player:null,romsounds_context:null,romsounds_buffers:[],eventsource:null,fullscreen_handler:null,capture_button:null,comment_capture_button:null,canvas:null,canvas_context:null,shortcut_key_handler:null,shortcut_key_pressed_at:Date.now(),shortcut_key_modal:!1,shortcut_key_list:{left_column:[{name:"全般",icon:"fluent:home-20-filled",icon_height:"22px",shortcuts:[{name:"数字キー・テンキーに対応するリモコン番号 (1~12) のチャンネルに切り替える<br style=\"display:block;content:'';margin:5px 0;\">（同時に Shift キーを押すと、地デジならBS、BSなら地デジのチャンネルを選局する）",keys:[{name:"1~9, 0, -(=), ^(~)",icon:!1}]},{name:"前のチャンネルに切り替える",keys:[{name:"fluent:arrow-up-12-filled",icon:!0}]},{name:"次のチャンネルに切り替える",keys:[{name:"fluent:arrow-down-12-filled",icon:!0}]},{name:"キーボードショートカットの一覧を表示する",keys:[{name:"／(？)",icon:!1}]}]},{name:"プレイヤー",icon:"fluent:play-20-filled",icon_height:"20px",shortcuts:[{name:"再生 / 一時停止の切り替え",keys:[{name:"Space",icon:!1}]},{name:"プレイヤーの音量を上げる",keys:[{name:"Shift",icon:!1},{name:"fluent:arrow-up-12-filled",icon:!0}]},{name:"プレイヤーの音量を下げる",keys:[{name:"Shift",icon:!1},{name:"fluent:arrow-down-12-filled",icon:!0}]},{name:"停止して0.5秒早戻し",keys:[{name:"fluent:arrow-left-12-filled",icon:!0}]},{name:"停止して0.5秒早送り",keys:[{name:"fluent:arrow-right-12-filled",icon:!0}]},{name:"フルスクリーンの切り替え",keys:[{name:"F",icon:!1}]},{name:"ライブストリームの同期",keys:[{name:"W",icon:!1}]},{name:"Picture-in-Picture の表示切り替え",keys:[{name:"E",icon:!1}]},{name:"字幕の表示切り替え",keys:[{name:"S",icon:!1}]},{name:"コメントの表示切り替え",keys:[{name:"D",icon:!1}]},{name:"映像をキャプチャする",keys:[{name:"C",icon:!1}]},{name:"映像をコメントを付けてキャプチャする",keys:[{name:"V",icon:!1}]},{name:"コメント入力フォームにフォーカスする",keys:[{name:"M",icon:!1}]}]}],right_column:[{name:"パネル",icon:"fluent:panel-right-20-filled",icon_height:"24px",shortcuts:[{name:"パネルの表示切り替え",keys:[{name:"P",icon:!1}]},{name:"番組情報タブを表示する",keys:[{name:"K",icon:!1}]},{name:"チャンネルタブを表示する",keys:[{name:"L",icon:!1}]},{name:"コメントタブを表示する",keys:[{name:"；(＋)",icon:!1}]},{name:"Twitter タブを表示する",keys:[{name:"：(＊)",icon:!1}]}]},{name:"Twitter",icon:"fa-brands:twitter",icon_height:"22px",shortcuts:[{name:"ツイート検索タブを表示する",keys:[{name:"［ (「)",icon:!1}]},{name:"タイムラインタブを表示する",keys:[{name:"］ (」)",icon:!1}]},{name:"キャプチャタブを表示する",keys:[{name:"＼(￥)",icon:!1}]},{name:"ツイート入力フォームにフォーカスを当てる/フォーカスを外す",keys:[{name:"Tab",icon:!1}]},{name:"キャプチャにフォーカスする",keys:[{name:"キャプチャタブを表示",icon:!1},{name:"fluent:arrow-up-12-filled;fluent:arrow-down-12-filled;fluent:arrow-left-12-filled;fluent:arrow-right-12-filled",icon:!0}]},{name:"キャプチャを拡大表示する/<br>キャプチャの拡大表示を閉じる",keys:[{name:"キャプチャにフォーカス",icon:!1},{name:"Enter",icon:!1}]},{name:"キャプチャを選択する/<br>キャプチャの選択を解除する",keys:[{name:"キャプチャにフォーカス",icon:!1},{name:"Space",icon:!1}]},{name:"ツイートを送信する",keys:[{name:"Twitter タブを表示",icon:!1},{name:B.CtrlOrCmd(),icon:!1},{name:"Enter",icon:!1}]}]}]}}},created:function(){var t=this;this.init(),Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.romsounds_context=new AudioContext,n=1;case 2:if(!(n<=14)){e.next=15;break}return a="/assets/romsounds/".concat(n.toString().padStart(2,"0"),".wav"),e.next=6,i["default"].axios.get(a,{baseURL:"",responseType:"arraybuffer"});case 6:return s=e.sent,e.t0=t.romsounds_buffers,e.next=10,t.romsounds_context.decodeAudioData(s.data);case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:n++,e.next=2;break;case 15:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.destroy(!0),null!==this.shortcut_key_handler&&(document.removeEventListener("keydown",this.shortcut_key_handler),this.shortcut_key_handler=null),this.romsounds_context.close()},beforeRouteUpdate:function(t,e,n){var a=this;this.destroy(),this.channel_id=t.params.channel_id;var s=F.getPreviousAndCurrentAndNextChannel(this.channels_list,this.channel_id),i=Object(Ct["a"])(s,3);this.channel_previous=i[0],this.channel=i[1],this.channel_next=i[2],this.interval_ids.push(window.setTimeout((function(){a.init()}),500)),n()},watch:{is_panel_display:function(){B.setSettingsItem("is_display_latest_panel",this.is_panel_display)}},methods:{init:function(){var t=this;this.background_url=F.generatePlayerBackgroundURL(),this.controlDisplayTimer(),this.update(),this.interval_ids.push(window.setInterval((function(){t.time=L()().format("YYYY/MM/DD HH:mm:ss")}),1e3));var e=60-Math.floor((new Date).getTime()/1e3)%60;this.interval_ids.push(window.setTimeout((function(){t.update(),t.interval_ids.push(window.setInterval((function(){t.update()}),3e4))}),1e3*e))},update:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a,s,r,o,c,l,u,d,p,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t.$route.params.channel_id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,i["default"].axios.get("/channels/".concat(t.channel_id));case 5:n=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e["catch"](2),console.error(e.t0),!e.t0.response||422!==e.t0.response.status||"Specified channel_id was not found"!==e.t0.response.data.detail){e.next=14;break}return e.next=14,t.$router.push({path:"/not-found/"});case 14:return e.abrupt("return");case 15:return t.channel=n.data,null!==t.player&&!0!==t.player.KonomiTVCanDestroy||(t.initPlayer(),t.initEventHandler(),t.initCaptureHandler(),t.initShortcutKeyHandler()),null===t.channel.program_present||"1/0+1/0モード(デュアルモノ)"!==t.channel.program_present.primary_audio_type&&null===t.channel.program_present.secondary_audio_type?(t.player.template.audioItem[1].classList.add("dplayer-setting-audio-item--disabled"),t.player.plugins.mpegts&&window.setTimeout((function(){t.player.template.audioItem[0].classList.add("dplayer-setting-audio-current"),t.player.template.audioItem[1].classList.remove("dplayer-setting-audio-current"),t.player.template.audioValue.textContent=t.player.tran("Primary audio");try{t.player.plugins.mpegts.switchPrimaryAudio()}catch(e){}}),300)):t.player.template.audioItem[1].classList.remove("dplayer-setting-audio-item--disabled"),e.prev=18,e.next=21,i["default"].axios.get("/channels");case 21:a=e.sent,e.next=28;break;case 24:return e.prev=24,e.t1=e["catch"](18),console.error(e.t1),e.abrupt("return");case 28:s=function(e){return e.is_display||t.channel_id===e.channel_id},t.channels_list=new Map,t.channels_list.set("ピン留め",[]),a.data.GR.length>0&&t.channels_list.set("地デジ",a.data.GR.filter(s)),a.data.BS.length>0&&t.channels_list.set("BS",a.data.BS.filter(s)),a.data.CS.length>0&&t.channels_list.set("CS",a.data.CS.filter(s)),a.data.CATV.length>0&&t.channels_list.set("CATV",a.data.CATV.filter(s)),a.data.SKY.length>0&&t.channels_list.set("SKY",a.data.SKY.filter(s)),a.data.STARDIGIO.length>0&&t.channels_list.set("StarDigio",a.data.STARDIGIO.filter(s)),r=B.getSettingsItem("pinned_channel_ids"),o=[],c=Object(Q["a"])(r);try{for(u=function(){var e=l.value,n=F.getChannelType(e,!0);o.push(t.channels_list.get(n).find((function(t){return t.channel_id===e})))},c.s();!(l=c.n()).done;)u()}catch(m){c.e(m)}finally{c.f()}o.length>0?t.channels_list.set("ピン留め",o):t.channels_list.delete("ピン留め"),d=F.getPreviousAndCurrentAndNextChannel(t.channels_list,t.channel_id),p=Object(Ct["a"])(d,3),t.channel_previous=p[0],t.channel_next=p[2],"mediaSession"in navigator&&(_=[{src:"/assets/images/icons/icon-maskable-192px.png",sizes:"192x192",type:"image/png"},{src:"/assets/images/icons/icon-maskable-512px.png",sizes:"512x512",type:"image/png"}],navigator.mediaSession.metadata=new MediaMetadata({title:t.channel.program_present?t.channel.program_present.title:"放送休止",artist:t.channel.channel_name,artwork:_}),"setPositionState"in navigator.mediaSession&&navigator.mediaSession.setPositionState({duration:0,playbackRate:1}),navigator.mediaSession.setActionHandler("play",(function(){t.player.play()})),navigator.mediaSession.setActionHandler("pause",(function(){t.player.pause()})),navigator.mediaSession.setActionHandler("previoustrack",Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return navigator.mediaSession.metadata=new MediaMetadata({title:t.channel_previous.program_present?t.channel_previous.program_present.title:"放送休止",artist:t.channel_previous.channel_name,artwork:_}),e.next=3,t.$router.push({path:"/tv/watch/".concat(t.channel_previous.channel_id)});case 3:case"end":return e.stop()}}),e)})))),navigator.mediaSession.setActionHandler("nexttrack",Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return navigator.mediaSession.metadata=new MediaMetadata({title:t.channel_next.program_present?t.channel_next.program_present.title:"放送休止",artist:t.channel_next.channel_name,artwork:_}),e.next=3,t.$router.push({path:"/tv/watch/".concat(t.channel_next.channel_id)});case 3:case"end":return e.stop()}}),e)})))));case 47:case"end":return e.stop()}}),e,null,[[2,8],[18,24]])})))()},controlDisplayTimer:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=/iPhone|iPad|iPod|Windows|Macintosh|Android|Mobile/i.test(navigator.userAgent)&&"ontouchend"in document;if((1!=a||null===e||"mousemove"!==e.type)&&(0!=a||null===e||"touchmove"!==e.type&&"click"!==e.type)){window.clearTimeout(this.control_interval_id);var s=function e(){document.activeElement!==t.player.template.commentInput?(t.is_control_display=!1,null!==t.player&&(t.player.controller.hide(),t.player.setting.hide())):t.control_interval_id=window.setTimeout(e,3e3)};!0===a&&!0===n?this.player.controller.isShow()?(this.is_control_display=!0,this.player.controller.show(),this.control_interval_id=window.setTimeout(s,3e3)):(this.is_control_display=!1,this.player.controller.hide(),this.player.setting.hide()):(this.is_control_display=!0,null!==this.player&&this.player.controller.show(),this.control_interval_id=window.setTimeout(s,3e3))}},initPlayer:function(){var t=this;if(window.mpegts=St.a,null!==this.player&&!0===this.player.KonomiTVCanDestroy){try{this.player.destroy()}catch(i){void 0!==this.player.plugins.mpegts&&this.player.plugins.mpegts.destroy()}this.player=null}this.player=new Tt.a({container:this.$el.querySelector(".watch-player__dplayer"),theme:"#E64F97",lang:"ja-jp",live:!0,loop:!1,airplay:!1,autoplay:!0,hotkey:!1,screenshot:!1,volume:1,video:{defaultQuality:this.channel.is_radiochannel?"48kHz/192kbps":B.getSettingsItem("tv_streaming_quality"),quality:function(){var e=[];if(t.channel.is_radiochannel)e.push({name:"48kHz/192kbps",type:"mpegts",url:"".concat(B.api_base_url,"/streams/live/").concat(t.channel_id,"/1080p/mpegts")});else for(var n=0,a=["1080p","810p","720p","540p","480p","360p","240p"];n<a.length;n++){var s=a[n];e.push({name:s,type:"mpegts",url:"".concat(B.api_base_url,"/streams/live/").concat(t.channel_id,"/").concat(s,"/mpegts")})}return e}()},danmaku:{user:"KonomiTV",speedRate:B.getSettingsItem("comment_speed_rate"),fontSize:B.getSettingsItem("comment_font_size")},apiBackend:{read:function(t){t.success([{}])},send:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.Comment.sendComment(n);case 2:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()},pluginOptions:{mpegts:{config:{enableWorker:!0,liveBufferLatencyChasing:!0,liveBufferLatencyMaxLatency:3,liveBufferLatencyMinRemain:.5}},aribb24:{normalFont:'"Windows TV MaruGothic", "Hiragino Maru Gothic Pro", "Yu Gothic Medium", sans-serif',gaijiFont:'"Windows TV MaruGothic", "Hiragino Maru Gothic Pro", "Yu Gothic Medium", sans-serif',forceStrokeColor:"black",drcsReplacement:!0,enableRawCanvas:!0,useStrokeText:!0,usePUA:!0,PRACallback:function(e){if(!1!==B.getSettingsItem("is_display_superimpose_tv")){var n=t.romsounds_context.createGain(),a=t.romsounds_context.createBufferSource();a.buffer=t.romsounds_buffers[e],a.connect(n),n.connect(t.romsounds_context.destination),n.gain.value=3,a.start(0)}}}},subtitle:{type:"aribb24"}}),window.player=this.player,this.player.template.commentInput.addEventListener("keydown",(function(e){"Enter"===e.code&&(t.is_comment_send_just_did=!0,setTimeout((function(){return t.is_comment_send_just_did=!1}),100))})),this.player.controller.setAutoHide=function(t){};var e=/iPhone|iPad|iPod|Macintosh|Android|Mobile/i.test(navigator.userAgent)&&"ontouchend"in document;if(!1===e){this.player.template.settingOriginPanel.insertAdjacentHTML("beforeend",'\n                <div class="dplayer-setting-item dplayer-setting-keyboard-shortcut">\n                    <span class="dplayer-label">キーボードショートカット</span>\n                    <div class="dplayer-toggle">\n                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32">\n                            <path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path>\n                        </svg>\n                    </div>\n                </div>');var n=this.player.template.settingOriginPanel.scrollHeight;this.player.template.settingBox.style.clipPath="inset(calc(100% - ".concat(n,"px) 0 0 round 7px)"),this.$el.querySelector(".dplayer-setting-keyboard-shortcut").addEventListener("click",(function(){t.player.setting.hide(),t.shortcut_key_modal=!0}))}var a=function(){t.player.setting.hide(),t.controlDisplayTimer()};this.player.on("play",a),this.player.on("pause",a),this.player.on("quality_start",(function(){t.background_url=F.generatePlayerBackgroundURL(),null!==t.eventsource&&(t.eventsource.close(),t.eventsource=null),t.initEventHandler()})),!0===B.getSettingsItem("is_display_superimpose_tv")?(this.player.plugins.aribb24Superimpose.show(),this.player.on("subtitle_hide",(function(){t.player.plugins.aribb24Superimpose.show()}))):(this.player.plugins.aribb24Superimpose.hide(),this.player.on("subtitle_show",(function(){t.player.plugins.aribb24Superimpose.hide()}))),this.interval_ids.push(window.setInterval((function(){t.player.video.paused&&t.player.video.buffered.end(0)-t.player.video.currentTime>30&&t.player.sync()}),6e4));var s=document.querySelector(".v-application");this.fullscreen_handler=function(){return t.is_fullscreen=t.player.fullScreen.isFullScreen()},void 0!==s.onfullscreenchange?s.addEventListener("fullscreenchange",this.fullscreen_handler):s.addEventListener("webkitfullscreenchange",this.fullscreen_handler),this.player.fullScreen.isFullScreen=function(t){return!(!document.fullscreenElement&&!document.webkitFullscreenElement)},this.player.fullScreen.request=function(e){t.player.fullScreen.isFullScreen()?t.player.fullScreen.cancel():(s.requestFullscreen=s.requestFullscreen||s.webkitRequestFullscreen,s.requestFullscreen&&s.requestFullscreen(),screen.orientation&&screen.orientation.lock("landscape").catch((function(){})))},this.player.fullScreen.cancel=function(t){document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen,document.exitFullscreen&&document.exitFullscreen(),screen.orientation&&screen.orientation.unlock()}},initEventHandler:function(){var t=this;this.is_loading=!0;var e=function(){window.setTimeout((function(){t.is_loading=!1,t.channel.is_radiochannel?t.is_background_display=!0:t.is_background_display=!1}),100),t.player.video.oncanplay=null,t.player.video.oncanplaythrough=null};this.player.video.oncanplay=e,this.player.video.oncanplaythrough=e;var n=this.channel.is_radiochannel?"1080p":this.player.quality.name;this.eventsource=new EventSource("".concat(B.api_base_url,"/streams/live/").concat(this.channel_id,"/").concat(n,"/events")),this.eventsource.addEventListener("initial_update",(function(e){var n=JSON.parse(e.data);"Standby"===n.status&&(t.is_background_display=!0)})),this.eventsource.addEventListener("status_update",(function(e){var n=JSON.parse(e.data);switch(console.log("Status: ".concat(n.status," Detail:").concat(n.detail)),t.channel.viewers=n.clients_count,n.status){case"Standby":t.player.template.notice.textContent.includes("画質を")||t.player.notice(n.detail,-1),t.is_background_display=!0;break;case"ONAir":t.player.template.notice.textContent.includes("画質を")||t.player.notice(t.player.template.notice.textContent,1e-6),document.pictureInPictureElement&&(document.exitPictureInPicture(),t.player.video.requestPictureInPicture());break;case"Restart":t.player.notice(n.detail,-1),t.player.switchVideo({url:t.player.quality.url,type:t.player.quality.type}),t.player.play(),t.is_background_display=!0;break;case"Offline":t.player.notice(n.detail,-1),t.player.video.onerror=function(){t.player.notice(n.detail,-1),t.player.video.onerror=null},t.player.danmaku.clear(),t.player.video.pause(),t.eventsource.close(),t.is_background_display=!0;break}})),this.eventsource.addEventListener("detail_update",(function(e){var n=JSON.parse(e.data);console.log("Status: ".concat(n.status," Detail:").concat(n.detail)),t.channel.viewers=n.clients_count,"Standby"===n.status&&(t.player.notice(n.detail,-1),t.is_background_display||(t.is_background_display=!0))})),this.eventsource.addEventListener("clients_update",(function(e){var n=JSON.parse(e.data);t.channel.viewers=n.clients_count}))},initShortcutKeyHandler:function(){var t,e=this,n=this.$refs.Twitter,a=n.$el.querySelector(".tweet-form__textarea"),s=Object(Q["a"])(document.querySelectorAll("input[type=text],textarea"));try{for(s.s();!(t=s.n()).done;){var i=t.value;i.addEventListener("compositionstart",(function(){return e.is_ime_composing=!0})),i.addEventListener("compositionend",(function(){return e.is_ime_composing=!1}))}}catch(r){s.e(r)}finally{s.f()}this.shortcut_key_handler=function(t){var s=document.activeElement.tagName.toUpperCase(),i=document.activeElement.getAttribute("contenteditable");["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.code)&&"INPUT"!==s&&"TEXTAREA"!==s&&""!==i&&"true"!==i&&t.preventDefault();var r=!1;t.repeat&&(r=!0);var o=Date.now();if(!(o-e.shortcut_key_pressed_at<50)){if(e.shortcut_key_pressed_at=o,("INPUT"!==s&&"TEXTAREA"!==s&&""!==i&&"true"!==i||document.activeElement===a)&&!1===e.is_ime_composing&&"Tab"===t.code)return t.preventDefault(),e.panel_active_tab="Twitter",document.activeElement===a?void a.blur():(a.focus(),void window.setTimeout((function(){return a.focus()}),100));if(("INPUT"!==s&&"TEXTAREA"!==s&&""!==i&&"true"!==i||document.activeElement===a)&&"Twitter"===e.panel_active_tab&&!1===e.is_ime_composing&&(t.ctrlKey||t.metaKey||t.shiftKey)&&"Enter"===t.code&&n.$el.querySelector(".tweet-button").click(),"INPUT"!==s&&"TEXTAREA"!==s&&""!==i&&"true"!==i){if(!1===r){var c=e.channel.channel_type;t.shiftKey&&"GR"==e.channel.channel_type&&(c="BS"),t.shiftKey&&"BS"==e.channel.channel_type&&(c="GR");var l=null;if("Digit1"!==t.code&&"Digit2"!==t.code&&"Digit3"!==t.code&&"Digit4"!==t.code&&"Digit5"!==t.code&&"Digit6"!==t.code&&"Digit7"!==t.code&&"Digit8"!==t.code&&"Digit9"!==t.code||(l=Number(t.code.replace("Digit",""))),"Digit0"===t.code&&(l=10),"Minus"===t.code&&(l=11),"Equal"===t.code&&(l=12),"Numpad1"!==t.code&&"Numpad2"!==t.code&&"Numpad3"!==t.code&&"Numpad4"!==t.code&&"Numpad5"!==t.code&&"Numpad6"!==t.code&&"Numpad7"!==t.code&&"Numpad8"!==t.code&&"Numpad9"!==t.code||(l=Number(t.code.replace("Numpad",""))),"Numpad0"===t.code&&(l=10),null!==l){var u=F.getChannelFromRemoconID(e.channels_list,c,l);if(null!==u&&u.channel_id!==e.channel_id)return void Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$router.push({path:"/tv/watch/".concat(u.channel_id)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}if("Slash"===t.code)return void(e.shortcut_key_modal=!e.shortcut_key_modal);if("KeyP"===t.code)return void(e.is_panel_display=!e.is_panel_display);if("KeyK"===t.code)return void(e.panel_active_tab="Program");if("KeyL"===t.code)return void(e.panel_active_tab="Channel");if("Semicolon"===t.code)return void(e.panel_active_tab="Comment");if("Quote"===t.code)return void(e.panel_active_tab="Twitter");if("BracketRight"===t.code)return void(n.twitter_active_tab="Search");if("Backslash"===t.code)return void(n.twitter_active_tab="Timeline");if("IntlRo"===t.code)return void(n.twitter_active_tab="Capture")}if("Twitter"===e.panel_active_tab&&"Capture"===n.twitter_active_tab&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.code)){if(0===n.captures.length)return;if(!1===n.captures.some((function(t){return!0===t.focused})))return void(n.captures[n.captures.length-1].focused=!0);var d=n.captures.findIndex((function(t){return!0===t.focused}));if("ArrowUp"===t.code){if(d-2<0)return;n.captures[d-2].focused=!0}if("ArrowDown"===t.code){if(d+2>n.captures.length-1)return;n.captures[d+2].focused=!0}if("ArrowLeft"===t.code){if(d-1<0)return;n.captures[d-1].focused=!0}if("ArrowRight"===t.code){if(d+1>n.captures.length-1)return;n.captures[d+1].focused=!0}n.captures[d].focused=!1;var p=n.captures.find((function(t){return!0===t.focused}));!0===n.zoom_capture_modal&&(n.zoom_capture=p);var _=n.$el.querySelector('img[src="'.concat(p.image_url,'"]')).parentElement;return void(r?_.scrollIntoView({block:"nearest",inline:"nearest",behavior:"auto"}):_.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}))}if("Enter"===t.code){if(t.preventDefault(),e.is_comment_send_just_did)return;if(!0===n.zoom_capture_modal)return void(n.zoom_capture_modal=!1);var m=n.captures.find((function(t){return!0===t.focused}));if(void 0===m)return;return n.zoom_capture=m,void(n.zoom_capture_modal=!0)}if("Space"===t.code){t.preventDefault();var h=n.captures.find((function(t){return!0===t.focused}));if(void 0===h)return;return void n.clickCapture(h)}}if(!1===r&&!1===t.shiftKey){if("ArrowUp"===t.code)return t.preventDefault(),void Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$router.push({path:"/tv/watch/".concat(e.channel_previous.channel_id)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))();if("ArrowDown"===t.code)return t.preventDefault(),void Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$router.push({path:"/tv/watch/".concat(e.channel_next.channel_id)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}if(null!==e.player&&!t.ctrlKey&&!t.metaKey){if(!0===t.shiftKey&&"ArrowUp"===t.code)return void e.player.volume(e.player.volume()+.05);if(!0===t.shiftKey&&"ArrowDown"===t.code)return void e.player.volume(e.player.volume()-.05)}if(null!==e.player&&!t.ctrlKey&&!t.metaKey){if("ArrowLeft"===t.code)return t.preventDefault(),!1===e.player.video.paused&&e.player.video.pause(),void(e.player.video.currentTime=e.player.video.currentTime-.5);if("ArrowRight"===t.code)return t.preventDefault(),!1===e.player.video.paused&&e.player.video.pause(),void(e.player.video.currentTime=e.player.video.currentTime+.5);if(!1===r){if("Space"===t.code)return void e.player.toggle();if("KeyF"===t.code)return void e.player.fullScreen.toggle();if("KeyW"===t.code)return void e.player.sync();if("KeyE"===t.code)return void(document.pictureInPictureEnabled&&e.player.template.pipButton.click());if("KeyS"===t.code)return e.player.subtitle.toggle(),void(e.player.subtitle.container.classList.contains("dplayer-subtitle-hide")?e.player.notice("".concat(e.player.tran("Hide subtitle"))):e.player.notice("".concat(e.player.tran("Show subtitle"))));if("KeyD"===t.code)return e.player.template.showDanmaku.click(),void(e.player.template.showDanmakuToggle.checked?e.player.notice("".concat(e.player.tran("Show comment"))):e.player.notice("".concat(e.player.tran("Hide comment"))));if("KeyC"===t.code&&e.captureAndSave(),"KeyV"===t.code&&e.captureAndSave(!0),"KeyM"===t.code)return t.preventDefault(),e.player.controller.show(),e.player.comment.show(),e.controlDisplayTimer(),void window.setTimeout((function(){return e.player.template.commentInput.focus()}),100)}}}}},document.addEventListener("keydown",this.shortcut_key_handler)},initCaptureHandler:function(){var t=this;this.$el.querySelector(".dplayer-icons.dplayer-icons-right").insertAdjacentHTML("afterbegin",'\n                <div class="dplayer-icon dplayer-comment-capture-icon" aria-label="コメントを付けてキャプチャ"\n                    data-balloon-nofocus="" data-balloon-pos="up">\n                    <span class="dplayer-icon-content">\n                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>\n                    </span>\n                </div>\n            '),this.$el.querySelector(".dplayer-icons.dplayer-icons-right").insertAdjacentHTML("afterbegin",'\n                <div class="dplayer-icon dplayer-capture-icon" aria-label="キャプチャ"\n                    data-balloon-nofocus="" data-balloon-pos="up">\n                    <span class="dplayer-icon-content">\n                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>\n                    </span>\n                </div>\n            '),this.canvas=document.createElement("canvas"),this.canvas_context=this.canvas.getContext("2d"),this.canvas.width=0,this.canvas.height=0,this.player.on("loadedmetadata",(function(){t.canvas.width=t.player.video.videoWidth,t.canvas.height=t.player.video.videoHeight})),this.capture_button=this.$el.querySelector(".dplayer-icon.dplayer-capture-icon"),this.comment_capture_button=this.$el.querySelector(".dplayer-icon.dplayer-comment-capture-icon"),this.capture_button.addEventListener("click",Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.captureAndSave();case 2:case"end":return e.stop()}}),e)})))),this.comment_capture_button.addEventListener("click",Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.captureAndSave(!0);case 2:case"end":return e.stop()}}),e)}))))},captureAndSave:function(){var t=arguments,e=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){var a,s,r,o,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>0&&void 0!==t[0]&&t[0],s=function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var n,a,s,i,r,o,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e,n,a){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s='\n                        <svg xmlns="http://www.w3.org/2000/svg" width="'.concat(n,'" height="').concat(a,"\">\n                            <foreignObject width=\"100%\" height=\"100%\">\n                                <div xmlns=\"http://www.w3.org/1999/xhtml\">\n                                    <style>\n                                    .dplayer-danmaku {\n                                        position: absolute;\n                                        top: 0;\n                                        left: 0;\n                                        right: 0;\n                                        bottom: 0;\n                                        color: #fff;\n                                        font-size: 29px;\n                                        font-family: 'YakuHanJPs', 'Open Sans', 'Hiragino Sans', 'Noto Sans JP', sans-serif;\n                                    }\n                                    .dplayer-danmaku .dplayer-danmaku-item {\n                                        display: inline-block;\n                                        line-height: 1;\n                                        font-weight: bold;\n                                        font-size: var(--dplayer-danmaku-font-size);\n                                        opacity: var(--dplayer-danmaku-opacity);\n                                        text-shadow: 1.2px 1.2px 4px rgba(0, 0, 0, 0.9);\n                                        white-space: nowrap;\n                                    }\n                                    .dplayer-danmaku .dplayer-danmaku-item--demo {\n                                        position: absolute;\n                                        visibility: hidden;\n                                    }\n                                    .dplayer-danmaku .dplayer-danmaku-item span {\n                                        box-decoration-break: clone;\n                                        -webkit-box-decoration-break: clone;\n                                    }\n                                    .dplayer-danmaku .dplayer-danmaku-item.dplayer-danmaku-size-big {\n                                        font-size: calc(var(--dplayer-danmaku-font-size) * 1.25);\n                                    }\n                                    .dplayer-danmaku .dplayer-danmaku-item.dplayer-danmaku-size-small {\n                                        font-size: calc(var(--dplayer-danmaku-font-size) * 0.8);\n                                    }\n                                    .dplayer-danmaku .dplayer-danmaku-right {\n                                        position: absolute;\n                                        right: 0;\n                                    }\n                                    .dplayer-danmaku .dplayer-danmaku-top, .dplayer-danmaku .dplayer-danmaku-bottom {\n                                        position: absolute;\n                                        left: 50%;\n                                        transform: translateX(-50%);\n                                    }\n                                    </style>\n                                    ").concat(e,"\n                                </div>\n                            </foreignObject>\n                        </svg>\n                    ").trim(),i=new Image,i.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(s)),t.next=5,i.decode();case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),a=e.player.template.danmaku.outerHTML,s=Object(Q["a"])(e.$el.querySelectorAll(".dplayer-danmaku-move"));try{for(s.s();!(i=s.n()).done;)r=i.value,o=r.getBoundingClientRect().left-e.player.video.getBoundingClientRect().left,a=a.replace(/transform: translateX\(.*?\);/,"left: ".concat(o,"px;"))}catch(d){s.e(d)}finally{s.f()}return t.next=6,n(a,e.player.template.danmaku.offsetWidth,e.player.template.danmaku.offsetHeight);case 6:c=t.sent,l=e.canvas.width/e.player.template.danmaku.offsetWidth,u=e.player.template.danmaku.offsetHeight*l,e.canvas_context.drawImage(c,0,0,e.canvas.width,u);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(n,a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new FormData,s.append("image",n,a),t.prev=2,t.next=5,i["default"].axios.post("/captures",s,{headers:{"Content-Type":"multipart/form-data"}});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](2),console.error(t.t0),e.player.notice("キャプチャのアップロードに失敗しました。");case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}(),0!==e.canvas.width||0!==e.canvas.height){n.next=6;break}return e.player.notice("読み込み中はキャプチャできません。"),n.abrupt("return");case 6:if(!0!==a||!1!==e.player.danmaku.showing){n.next=9;break}return e.player.notice("コメントを付けてキャプチャするには、コメント表示をオンにしてください。"),n.abrupt("return");case 9:if(o=e.$el.querySelector(".".concat(a?"dplayer-comment-capture-icon":"dplayer-capture-icon")),o.classList.add("dplayer-capturing"),c="Capture_".concat(L()().format("YYYYMMDD-HHmmss")),l=e.player.plugins.aribb24Caption.getRawCanvas(),u=e.player.plugins.aribb24Superimpose.getRawCanvas(),e.canvas_context.drawImage(e.player.video,0,0,e.canvas.width,e.canvas.height),!0===e.player.plugins.aribb24Superimpose.isShowing&&e.player.plugins.aribb24Superimpose.isPresent()&&e.canvas_context.drawImage(u,0,0,e.canvas.width,e.canvas.height),!0!==a){n.next=19;break}return n.next=19,s();case 19:if(d=!0===e.player.plugins.aribb24Caption.isShowing&&e.player.plugins.aribb24Caption.isPresent(),!["VideoOnly","Both"].includes(B.getSettingsItem("capture_caption_mode"))&&d||e.canvas.toBlob(function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==n){t.next=3;break}return e.player.notice("キャプチャの保存に失敗しました…"),t.abrupt("return");case 3:return a="".concat(c,".jpg"),"CompositingCaption"===B.getSettingsItem("capture_caption_mode")&&(a="".concat(c,"_caption.jpg")),e.$refs.Twitter.addCaptureList(n,a),t.next=8,F.setEXIFDataToCapture(n,e.channel.program_present);case 8:if(n=t.sent,["Browser","Both"].includes(B.getSettingsItem("capture_save_mode"))&&B.downloadBlobImage(n,a),!["UploadServer","Both"].includes(B.getSettingsItem("capture_save_mode"))){t.next=13;break}return t.next=13,r(n,a);case 13:"VideoOnly"!==B.getSettingsItem("capture_caption_mode")&&d||o.classList.remove("dplayer-capturing");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"image/jpeg",1),!d||!["CompositingCaption","Both"].includes(B.getSettingsItem("capture_caption_mode"))){n.next=28;break}if(!0===a&&(e.canvas_context.drawImage(e.player.video,0,0,e.canvas.width,e.canvas.height),e.canvas_context.drawImage(u,0,0,e.canvas.width,e.canvas.height)),e.canvas_context.drawImage(l,0,0,e.canvas.width,e.canvas.height),!0!==a){n.next=27;break}return n.next=27,s();case 27:e.canvas.toBlob(function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==n){t.next=3;break}return e.player.notice("キャプチャの保存に失敗しました…"),t.abrupt("return");case 3:return a="".concat(c,"_caption.jpg"),e.$refs.Twitter.addCaptureList(n,a),t.next=7,F.setEXIFDataToCapture(n,e.channel.program_present);case 7:if(n=t.sent,["Browser","Both"].includes(B.getSettingsItem("capture_save_mode"))&&B.downloadBlobImage(n,a),!["UploadServer","Both"].includes(B.getSettingsItem("capture_save_mode"))){t.next=12;break}return t.next=12,r(n,a);case 12:o.classList.remove("dplayer-capturing");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"image/jpeg",1);case 28:case"end":return n.stop()}}),n)})))()},destroy:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=Object(Q["a"])(this.interval_ids);try{for(a.s();!(t=a.n()).done;){var s=t.value;window.clearInterval(s)}}catch(i){a.e(i)}finally{a.f()}window.clearTimeout(this.control_interval_id),this.interval_ids=[],this.is_loading=!0,this.is_background_display=!1,this.player.KonomiTVCanDestroy=!0,null!==this.eventsource&&(this.eventsource.close(),this.eventsource=null),this.interval_ids.push(window.setTimeout((function(){if(e.player.video.pause(),!0===n&&null!==e.player){try{e.player.destroy()}catch(t){void 0!==e.player.plugins.mpegts&&e.player.plugins.mpegts.destroy()}e.player=null}}),400))}}}),ne=ee,ae=(n("598f"),n("392a"),n("b0af")),se=n("99d9"),ie=n("62ad"),re=n("ce7e"),oe=n("0fd9"),ce=Object(_["a"])(ne,yt,xt,!1,null,"1b885cea",null),le=ce.exports;h()(ce,{VBtn:W["a"],VCard:ae["a"],VCardActions:se["a"],VCardTitle:se["c"],VCol:ie["a"],VDialog:Zt["a"],VDivider:re["a"],VRow:oe["a"],VSpacer:nt["a"]}),it()(ce,{Ripple:rt["a"]});var ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Base",[n("h2",{staticClass:"settings__heading"},[n("Icon",{attrs:{icon:"fa-solid:sliders-h",width:"19px"}}),n("span",{staticClass:"ml-3"},[t._v("全般")])],1),n("div",{staticClass:"settings__content"},[n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("テレビのストリーミング画質")]),n("div",{staticClass:"settings__item-label"},[t._v(" テレビをライブストリーミングする際の既定の画質を設定します。"),n("br"),t._v(" ストリーミング画質はプレイヤーの設定からいつでも切り替えられます。"),n("br")]),n("v-select",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",items:t.tv_streaming_quality},model:{value:t.settings.tv_streaming_quality,callback:function(e){t.$set(t.settings,"tv_streaming_quality",e)},expression:"settings.tv_streaming_quality"}})],1),n("div",{staticClass:"settings__item settings__item--switch"},[n("label",{staticClass:"settings__item-heading",attrs:{for:"is_display_superimpose_tv"}},[t._v("テレビをみるときに文字スーパーを表示する")]),n("label",{staticClass:"settings__item-label",attrs:{for:"is_display_superimpose_tv"}},[t._v(" テレビをライブストリーミングする際に、文字スーパーを表示するかを設定します。"),n("br"),t._v(" 文字スーパーは、緊急地震速報の赤テロップや、NHK BS のニュース速報のテロップなどで利用されています。とくに理由がなければ、オンのままにしておくことをおすすめします。"),n("br")]),n("v-switch",{staticClass:"settings__item-switch",attrs:{id:"is_display_superimpose_tv",inset:"","hide-details":""},model:{value:t.settings.is_display_superimpose_tv,callback:function(e){t.$set(t.settings,"is_display_superimpose_tv",e)},expression:"settings.is_display_superimpose_tv"}})],1),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("既定のパネルの表示状態")]),n("div",{staticClass:"settings__item-label"},[t._v(" 視聴画面を開いたときに、右側のパネルをどう表示するかを設定します。"),n("br")]),n("v-select",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",items:t.panel_display_state},model:{value:t.settings.panel_display_state,callback:function(e){t.$set(t.settings,"panel_display_state",e)},expression:"settings.panel_display_state"}})],1),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("既定で表示されるパネルのタブ")]),n("div",{staticClass:"settings__item-label"},[t._v(" 視聴画面を開いたときに、右側のパネルで最初に表示されるタブを設定します。"),n("br")]),n("v-select",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",items:t.panel_active_tab},model:{value:t.settings.panel_active_tab,callback:function(e){t.$set(t.settings,"panel_active_tab",e)},expression:"settings.panel_active_tab"}})],1),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("キャプチャの保存先")]),n("div",{staticClass:"settings__item-label"},[n("p",[t._v(" キャプチャした画像をブラウザでダウンロードするか、KonomiTV サーバーにアップロードするかを設定します。"),n("br"),t._v(" ブラウザでのダウンロードと、KonomiTV サーバーへのアップロードを両方同時に行うこともできます。"),n("br")]),n("p",[t._v(" ブラウザでダウンロードすると、視聴中のデバイスのダウンロードフォルダに保存されます。視聴中のデバイスにそのまま保存されるためシンプルですが、保存先のフォルダを変更できないこと、PC 版 Chrome では毎回ダウンロードバーが表示されてしまうことがデメリットです。"),n("br")]),n("p",[t._v(" KonomiTV サーバーにアップロードすると、環境設定で指定されたキャプチャ保存フォルダに保存されます。視聴したデバイスにかかわらず、今までに撮ったキャプチャをひとつのフォルダにまとめて保存できます。"),n("br"),t._v(" 他のデバイスでキャプチャを見るにはキャプチャ保存フォルダをネットワークに共有する必要があること、スマホ・タブレットではネットワーク上のフォルダへのアクセスがやや面倒なことがデメリットです。"),n("br")])]),n("v-select",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",items:t.capture_save_mode},model:{value:t.settings.capture_save_mode,callback:function(e){t.$set(t.settings,"capture_save_mode",e)},expression:"settings.capture_save_mode"}})],1),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("字幕が表示されているときのキャプチャの保存モード")]),n("div",{staticClass:"settings__item-label"},[t._v(" 字幕が表示されているときに、キャプチャした画像に字幕を合成するかを設定します。"),n("br"),t._v(" 映像のみのキャプチャと、字幕を合成したキャプチャを両方同時に保存することもできます。"),n("br")]),n("v-select",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",items:t.capture_caption_mode},model:{value:t.settings.capture_caption_mode,callback:function(e){t.$set(t.settings,"capture_caption_mode",e)},expression:"settings.capture_caption_mode"}})],1)])])},de=[],pe=(n("4fad"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"route-container"},[n("Header"),n("main",[n("Navigation"),n("v-card",{staticClass:"settings-container d-flex px-5 py-5 mx-auto background",attrs:{elevation:"0",width:"100%","max-width":"1000"}},[n("div",[n("v-navigation-drawer",{staticClass:"settings-navigation flex-shrink-0 background",attrs:{permanent:"",width:"195",height:"auto"}},[n("v-list-item",{staticClass:"px-4"},[n("v-list-item-content",[n("h1",[t._v("設定")])])],1),n("v-list",{staticClass:"mt-2 px-0",attrs:{nav:""}},[n("v-list-item",{staticClass:"px-4",attrs:{link:"",color:"primary",to:"/settings/general"}},[n("v-list-item-icon",{staticClass:"mr-4"},[n("Icon",{staticStyle:{padding:"0 3px"},attrs:{icon:"fa-solid:sliders-h",width:"26px"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("全般")])],1)],1),n("v-list-item",{staticClass:"px-4",attrs:{link:"",color:"primary",to:"/settings/account"}},[n("v-list-item-icon",{staticClass:"mr-4"},[n("Icon",{attrs:{icon:"fluent:person-20-filled",width:"26px"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("アカウント")])],1)],1),n("v-list-item",{staticClass:"px-4",attrs:{link:"",color:"primary",to:"/settings/jikkyo"}},[n("v-list-item-icon",{staticClass:"mr-4"},[n("Icon",{staticStyle:{padding:"0 2px"},attrs:{icon:"bi:chat-left-text-fill",width:"26px"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("ニコニコ実況")])],1)],1),n("v-list-item",{staticClass:"px-4",attrs:{link:"",color:"primary",to:"/settings/twitter"}},[n("v-list-item-icon",{staticClass:"mr-4"},[n("Icon",{staticStyle:{padding:"0 1px"},attrs:{icon:"fa-brands:twitter",width:"26px"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Twitter")])],1)],1),n("v-list-item",{staticClass:"px-4",attrs:{link:"",color:"primary",to:"/settings/environment"}},[n("v-list-item-icon",{staticClass:"mr-4"},[n("Icon",{attrs:{icon:"fluent:toolbox-20-filled",width:"26px"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("環境設定")])],1)],1)],1)],1)],1),n("v-card",{staticClass:"settings ml-5 px-7 py-7 background lighten-1",attrs:{width:"100%"}},[t._t("default")],2)],1)],1)],1)}),_e=[],me=i["default"].extend({name:"SettingsBase",components:{Header:lt,Navigation:ht}}),he=me,ve=(n("c04d"),n("8860")),ge=n("da13"),fe=n("5d23"),we=n("34c3"),be=n("f774"),ye=Object(_["a"])(he,pe,_e,!1,null,"6ff40acc",null),xe=ye.exports;h()(ye,{VCard:ae["a"],VList:ve["a"],VListItem:ge["a"],VListItemContent:fe["a"],VListItemIcon:we["a"],VListItemTitle:fe["b"],VNavigationDrawer:be["a"]});var Ce=i["default"].extend({name:"SettingsGeneral",components:{Base:xe},data:function(){return{tv_streaming_quality:[{text:"1080p （1時間あたり約2.31GB / 5.1Mbps）",value:"1080p"},{text:"810p （1時間あたり約1.92GB / 4.2Mbps）",value:"810p"},{text:"720p （1時間あたり約1.33GB / 3.0Mbps）",value:"720p"},{text:"540p （1時間あたり約1.00GB / 2.2Mbps）",value:"540p"},{text:"480p （1時間あたり約0.74GB / 1.6Mbps）",value:"480p"},{text:"360p （1時間あたり約0.40GB / 0.9Mbps）",value:"360p"},{text:"240p （1時間あたり約0.23GB / 0.5Mbps）",value:"240p"}],panel_display_state:[{text:"前回の状態を復元する",value:"RestorePreviousState"},{text:"常に表示する",value:"AlwaysDisplay"},{text:"常に折りたたむ",value:"AlwaysFold"}],panel_active_tab:[{text:"番組情報タブ",value:"Program"},{text:"チャンネルタブ",value:"Channel"},{text:"コメントタブ",value:"Comment"},{text:"Twitter タブ",value:"Twitter"}],capture_save_mode:[{text:"ブラウザでダウンロード",value:"Browser"},{text:"KonomiTV サーバーにアップロード",value:"UploadServer"},{text:"ブラウザでのダウンロードと、KonomiTV サーバーへのアップロードを両方行う",value:"Both"}],capture_caption_mode:[{text:"映像のみのキャプチャを保存する",value:"VideoOnly"},{text:"字幕を合成したキャプチャを保存する",value:"CompositingCaption"},{text:"映像のみのキャプチャと、字幕を合成したキャプチャを両方保存する",value:"Both"}],settings:function(){for(var t={},e=["tv_streaming_quality","is_display_superimpose_tv","panel_display_state","panel_active_tab","capture_save_mode","capture_caption_mode"],n=0,a=e;n<a.length;n++){var s=a[n];t[s]=B.getSettingsItem(s)}return t}()}},watch:{settings:{deep:!0,handler:function(){for(var t=0,e=Object.entries(this.settings);t<e.length;t++){var n=Object(Ct["a"])(e[t],2),a=n[0],s=n[1];B.setSettingsItem(a,s)}}}}}),ke=Ce,Te=n("b974"),Ie=n("b73d"),Se=Object(_["a"])(ke,ue,de,!1,null,null,null),Ae=Se.exports;h()(Se,{VSelect:Te["a"],VSwitch:Ie["a"]});var Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Base",[n("h2",{staticClass:"settings__heading"},[n("Icon",{attrs:{icon:"fluent:person-20-filled",width:"25px"}}),n("span",{staticClass:"ml-2"},[t._v("アカウント")])],1),n("div",{staticClass:"settings__content",class:{"settings__content--loading":t.is_loading}},[null===t.user?n("div",{staticClass:"account"},[n("img",{staticClass:"account__icon",attrs:{src:"/assets/images/account-icon-default.png"}}),n("div",{staticClass:"account__info"},[n("div",{staticClass:"account__info-name"},[n("span",{staticClass:"account__info-name-text"},[t._v("ログインしていません")])]),n("span",{staticClass:"account__info-id"},[t._v("Not logged in")])]),n("v-btn",{staticClass:"account__login ml-auto",attrs:{color:"secondary",width:"140",height:"56",depressed:"",to:"/login/"}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fa:sign-in"}}),t._v("ログイン ")],1)],1):t._e(),null!==t.user?n("div",{staticClass:"account"},[n("img",{staticClass:"account__icon",attrs:{src:t.user_icon_blob}}),n("div",{staticClass:"account__info"},[n("div",{staticClass:"account__info-name"},[n("span",{staticClass:"account__info-name-text"},[t._v(t._s(t.user.name))]),t.user.is_admin?n("span",{staticClass:"account__info-admin"},[t._v("管理者")]):t._e()]),n("span",{staticClass:"account__info-id"},[t._v("User ID: "+t._s(t.user.id))])]),n("v-btn",{staticClass:"account__login ml-auto",attrs:{color:"secondary",width:"140",height:"56",depressed:""},on:{click:function(e){return t.logout()}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fa:sign-out"}}),t._v("ログアウト ")],1)],1):t._e(),!1===t.is_logged_in?n("div",{staticClass:"account-register"},[n("div",{staticClass:"account-register__heading"},[t._v(" KonomiTV アカウントにログインすると、"),n("br"),t._v("より便利な機能が使えます！ ")]),n("div",{staticClass:"account-register__feature"},[n("div",{staticClass:"account-feature"},[n("Icon",{staticClass:"account-feature__icon",attrs:{icon:"bi:chat-left-text-fill"}}),n("div",{staticClass:"account-feature__info"},[n("span",{staticClass:"account-feature__info-heading"},[t._v("ニコニコ実況にコメントする")]),n("span",{staticClass:"account-feature__info-text"},[t._v("テレビを見ながらニコニコ実況にコメントできます。別途、ニコニコアカウントとの連携が必要です。")])])],1),n("div",{staticClass:"account-feature"},[n("Icon",{staticClass:"account-feature__icon",attrs:{icon:"fa-brands:twitter"}}),n("div",{staticClass:"account-feature__info"},[n("span",{staticClass:"account-feature__info-heading"},[t._v("Twitter 連携機能")]),n("span",{staticClass:"account-feature__info-text"},[t._v("テレビを見ながら Twitter にツイートしたり、検索したツイートをリアルタイムで表示できます。別途、Twitter アカウントとの連携が必要です。")])])],1),n("div",{staticClass:"account-feature"},[n("Icon",{staticClass:"account-feature__icon",attrs:{icon:"fluent:arrow-sync-20-filled"}}),n("div",{staticClass:"account-feature__info"},[n("span",{staticClass:"account-feature__info-heading"},[t._v("設定をデバイス間で同期")]),n("span",{staticClass:"account-feature__info-text"},[t._v("ピン留めしたチャンネルなど、ブラウザに保存されている各種設定をブラウザやデバイスをまたいで同期できます。")])])],1),n("div",{staticClass:"account-feature"},[n("Icon",{staticClass:"account-feature__icon",attrs:{icon:"fa-solid:sliders-h"}}),n("div",{staticClass:"account-feature__info"},[n("span",{staticClass:"account-feature__info-heading"},[t._v("環境設定をブラウザから変更")]),n("span",{staticClass:"account-feature__info-text"},[t._v("管理者権限があれば、環境設定をブラウザから変更できます。一番最初に作成されたアカウントには、自動で管理者権限が付与されます。")])])],1)]),n("div",{staticClass:"account-register__description"},[t._v(" KonomiTV アカウントの作成に必要なものはユーザー名とパスワードだけです。"),n("br"),t._v(" アカウントはローカルにインストールした KonomiTV サーバーごとに保存されます。"),n("br"),t._v(" 外部のサービスには保存されませんので、ご安心ください。"),n("br")]),n("v-btn",{staticClass:"account-register__button",attrs:{color:"secondary",width:"100%","max-width":"250",height:"50",depressed:"",to:"/register/"}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:person-add-20-filled",height:"24"}}),t._v("アカウントを作成 ")],1)],1):t._e(),!0===t.is_logged_in?n("div",[n("v-form",{ref:"settings_username",staticClass:"settings__item",on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"settings__item-heading"},[t._v("ユーザー名")]),n("div",{staticClass:"settings__item-label"},[t._v(" KonomiTV アカウントのユーザー名を設定します。アルファベットだけでなく日本語や記号も使えます。"),n("br"),t._v(" 同じ KonomiTV サーバー上の他のアカウントと同じユーザー名には変更できません。"),n("br")]),n("v-text-field",{staticClass:"settings__item-form",attrs:{outlined:"",placeholder:"ユーザー名",rules:[t.settings_username_validation]},model:{value:t.settings_username,callback:function(e){t.settings_username=e},expression:"settings_username"}})],1),n("v-btn",{staticClass:"settings__save-button",attrs:{depressed:""},on:{click:function(e){return t.updateAccountInfo("username")}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:save-16-filled",height:"24px"}}),t._v("ユーザー名を更新 ")],1),n("v-form",{ref:"settings_username",staticClass:"settings__item",on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"settings__item-heading"},[t._v("アイコン画像")]),n("div",{staticClass:"settings__item-label"},[t._v(" KonomiTV アカウントのアイコン画像を設定します。"),n("br"),t._v(" アップロードされた画像は自動的に 400×400 の正方形にリサイズされます。"),n("br")]),n("v-file-input",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",placeholder:"アイコン画像を選択",accept:"image/jpeg, image/png","prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:t.settings_icon,callback:function(e){t.settings_icon=e},expression:"settings_icon"}})],1),n("v-btn",{staticClass:"settings__save-button mt-5",attrs:{depressed:""},on:{click:function(e){return t.updateAccountIcon()}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:save-16-filled",height:"24px"}}),t._v("アイコン画像を更新 ")],1),n("v-form",{ref:"settings_password",staticClass:"settings__item",on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"settings__item-heading"},[t._v("新しいパスワード")]),n("div",{staticClass:"settings__item-label"},[t._v(" KonomiTV アカウントの新しいパスワードを設定します。"),n("br")]),n("v-text-field",{staticClass:"settings__item-form",attrs:{outlined:"",placeholder:"新しいパスワード",type:t.settings_password_showing?"text":"password","append-icon":t.settings_password_showing?"mdi-eye":"mdi-eye-off",rules:[t.settings_password_validation]},on:{"click:append":function(e){t.settings_password_showing=!t.settings_password_showing}},model:{value:t.settings_password,callback:function(e){t.settings_password=e},expression:"settings_password"}})],1),n("v-btn",{staticClass:"settings__save-button",attrs:{depressed:""},on:{click:function(e){return t.updateAccountInfo("password")}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:save-16-filled",height:"24px"}}),t._v("パスワードを更新 ")],1),n("v-divider",{staticClass:"mt-6"}),n("div",{staticClass:"settings__item mt-6"},[n("div",{staticClass:"settings__item-heading error--text text--lighten-1"},[t._v("アカウントを削除")]),n("div",{staticClass:"settings__item-label"},[t._v(" 現在ログインしている KonomiTV アカウントを削除します。"),n("br"),t._v(" アカウントに紐づくすべてのデータが削除されます。元に戻すことはできません。"),n("br")])]),n("v-dialog",{attrs:{"max-width":"385"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[n("v-btn",t._g(t._b({staticClass:"settings__save-button error mt-5",attrs:{depressed:""}},"v-btn",s,!1),a),[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:delete-16-filled",height:"24px"}}),t._v("アカウントを削除 ")],1)]}}],null,!1,974850237),model:{value:t.account_delete_confirm_dialog,callback:function(e){t.account_delete_confirm_dialog=e},expression:"account_delete_confirm_dialog"}},[n("v-card",[n("v-card-title",{staticClass:"justify-center"},[t._v("本当にアカウントを削除しますか？")]),n("v-card-text",[t._v(" アカウントに紐づくすべてのデータが削除されます。元に戻すことはできません。"),n("br"),t._v(" 本当にアカウントを削除しますか？ ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"text",text:""},on:{click:function(e){t.account_delete_confirm_dialog=!1}}},[t._v("キャンセル")]),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.deleteAccount()}}},[t._v("削除")])],1)],1)],1)],1):t._e()])])},Re=[],Pe=i["default"].extend({name:"SettingsAccount",components:{Base:xe},data:function(){return{Utils:B,is_loading:!0,is_logged_in:null!==B.getAccessToken(),user:null,user_icon_blob:"",settings_username:null,settings_username_validation:function(t){return""===t||null===t?"ユーザー名を入力してください。":!1!==/^.{2,}$/.test(t)||"ユーザー名は2文字以上で入力してください。"},settings_password:null,settings_password_showing:!0,settings_password_validation:function(t){return""===t||null===t?"パスワードを入力してください。":!1!==/^[a-zA-Z0-9!-/:-@¥[-`{-~]{4,}$/.test(t)||"パスワードは4文字以上の半角英数記号を入力してください。"},settings_icon:null,account_delete_confirm_dialog:null}},created:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.syncAccountInfo();case 2:t.is_loading=!1;case 3:case"end":return e.stop()}}),e)})))()},methods:{syncAccountInfo:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["default"].axios.get("/users/me");case 3:return n=e.sent,t.user=n.data,t.settings_username=t.user.name,e.next=8,t.syncAccountIcon();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),M.a.isAxiosError(e.t0)&&e.t0.response&&401===e.t0.response.status&&(console.log("Not logged in."),t.is_logged_in=!1,t.user=null,t.user_icon_blob="",B.deleteAccessToken());case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},syncAccountIcon:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["default"].axios.get("/users/me/icon",{responseType:"arraybuffer"});case 2:n=e.sent,t.user_icon_blob=URL.createObjectURL(new Blob([n.data],{type:"image/png"}));case 4:case"end":return e.stop()}}),e)})))()},updateAccountInfo:function(t){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("username"!==t){n.next=5;break}if(!1!==e.$refs.settings_username.validate()){n.next=3;break}return n.abrupt("return");case 3:n.next=7;break;case 5:if(!1!==e.$refs.settings_password.validate()){n.next=7;break}return n.abrupt("return");case 7:if(n.prev=7,"username"!==t){n.next=14;break}return n.next=11,i["default"].axios.put("/users/me",{username:e.settings_username});case 11:e.$message.show("ユーザー名を更新しました。"),n.next=17;break;case 14:return n.next=16,i["default"].axios.put("/users/me",{password:e.settings_password});case 16:e.$message.show("パスワードを更新しました。");case 17:return n.next=19,e.syncAccountInfo();case 19:n.next=33;break;case 21:if(n.prev=21,n.t0=n["catch"](7),!M.a.isAxiosError(n.t0)||!n.t0.response||422!==n.t0.response.status){n.next=33;break}n.t1=n.t0.response.data.detail,n.next="Specified username is duplicated"===n.t1?27:"Specified username is not accepted due to system limitations"===n.t1?29:31;break;case 27:return e.$message.error("ユーザー名が重複しています。"),n.abrupt("break",33);case 29:return e.$message.error("ユーザー名に token と me は使えません。"),n.abrupt("break",33);case 31:return e.$message.error("アカウント情報を更新できませんでした。(HTTP Error ".concat(n.t0.response.status,")")),n.abrupt("break",33);case 33:case"end":return n.stop()}}),n,null,[[7,21]])})))()},updateAccountIcon:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==t.settings_icon){e.next=3;break}return t.$message.error("アップロードする画像を選択してください！"),e.abrupt("return");case 3:return n=new FormData,n.append("image",t.settings_icon),e.prev=5,e.next=8,i["default"].axios.put("/users/me/icon",n,{headers:{"Content-Type":"multipart/form-data"}});case 8:return e.next=10,t.syncAccountIcon();case 10:e.next=22;break;case 12:if(e.prev=12,e.t0=e["catch"](5),!M.a.isAxiosError(e.t0)||!e.t0.response||422!==e.t0.response.status){e.next=22;break}e.t1=e.t0.response.data.detail,e.next="Please upload JPEG or PNG image"===e.t1?18:20;break;case 18:return t.$message.error("JPEG または PNG 画像をアップロードしてください。"),e.abrupt("break",22);case 20:return t.$message.error("アイコン画像を更新できませんでした。(HTTP Error ".concat(e.t0.response.status,")")),e.abrupt("break",22);case 22:case"end":return e.stop()}}),e,null,[[5,12]])})))()},deleteAccount:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.account_delete_confirm_dialog=!1,e.next=3,i["default"].axios.delete("/users/me");case 3:B.deleteAccessToken(),t.is_logged_in=!1,t.user=null,t.user_icon_blob="",t.$message.show("アカウントを削除しました。");case 8:case"end":return e.stop()}}),e)})))()},logout:function(){B.deleteAccessToken(),this.is_logged_in=!1,this.user=null,this.user_icon_blob="",this.$message.success("ログアウトしました。")}}}),Ve=Pe,je=(n("b3c5"),n("23a7")),Ee=n("4bd4"),Ne=n("8654"),De=Object(_["a"])(Ve,Oe,Re,!1,null,"5c6f3b6e",null),Le=De.exports;h()(De,{VBtn:W["a"],VCard:ae["a"],VCardActions:se["a"],VCardText:se["b"],VCardTitle:se["c"],VDialog:Zt["a"],VDivider:re["a"],VFileInput:je["a"],VForm:Ee["a"],VSpacer:nt["a"],VTextField:Ne["a"]});var $e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Base",[n("h2",{staticClass:"settings__heading"},[n("Icon",{attrs:{icon:"bi:chat-left-text-fill",width:"19px"}}),n("span",{staticClass:"ml-3"},[t._v("ニコニコ実況")])],1),n("div",{staticClass:"settings__content",class:{"settings__content--loading":t.is_loading}},[null===t.user.niconico_user_id?n("div",{staticClass:"niconico-account"},[n("Icon",{staticClass:"flex-shrink-0",attrs:{icon:"bi:chat-left-text-fill",width:"45px"}}),n("div",{staticClass:"niconico-account__info ml-4"},[n("div",{staticClass:"niconico-account__info-name"},[n("span",{staticClass:"niconico-account__info-name-text"},[t._v("ニコニコアカウントと連携していません")])]),n("span",{staticClass:"niconico-account__info-description"},[t._v(" ニコニコアカウントと連携すると、テレビを見ながらニコニコ実況にコメントできるようになります。 ")])]),n("v-btn",{staticClass:"niconico-account__login ml-auto",attrs:{color:"secondary",width:"130",height:"56",depressed:""},on:{click:function(e){return t.loginNiconicoAccount()}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:plug-connected-20-filled",height:"26"}}),t._v("連携する ")],1)],1):t._e(),null!==t.user.niconico_user_id?n("div",{staticClass:"niconico-account"},[n("img",{staticClass:"niconico-account__icon",attrs:{src:this.niconico_user_icon_url}}),n("div",{staticClass:"niconico-account__info"},[n("div",{staticClass:"niconico-account__info-name"},[n("span",{staticClass:"niconico-account__info-name-text"},[t._v(t._s(t.user.niconico_user_name)+" と連携しています")])]),n("span",{staticClass:"niconico-account__info-description"},[n("span",{staticClass:"mr-2"},[t._v("Niconico User ID:")]),n("a",{staticClass:"mr-2",attrs:{href:"https://www.nicovideo.jp/user/"+t.user.niconico_user_id,target:"_blank"}},[t._v(t._s(t.user.niconico_user_id))]),1==t.user.niconico_user_premium?n("span",{staticClass:"secondary--text"},[t._v("(Premium)")]):t._e()])]),n("v-btn",{staticClass:"niconico-account__login ml-auto",attrs:{color:"secondary",width:"130",height:"56",depressed:""},on:{click:function(e){return t.logoutNiconicoAccount()}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:plug-disconnected-20-filled",height:"26"}}),t._v("連携解除 ")],1)],1):t._e(),n("div",{staticClass:"settings__item mt-7"},[n("div",{staticClass:"settings__item-heading"},[t._v("コメントの速さ")]),n("div",{staticClass:"settings__item-label"},[t._v(" プレイヤーに流れるコメントの速さを設定します。"),n("br"),t._v(" たとえば 1.2 に設定すると、コメントが 1.2 倍速く流れます。"),n("br")]),n("v-slider",{staticClass:"settings__item-form",attrs:{ticks:"always","thumb-label":"","hide-details":"",step:.1,min:.5,max:2},model:{value:t.settings.comment_speed_rate,callback:function(e){t.$set(t.settings,"comment_speed_rate",e)},expression:"settings.comment_speed_rate"}})],1),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("コメントの文字サイズ")]),n("div",{staticClass:"settings__item-label"},[t._v(" プレイヤーに流れるコメントの文字サイズの基準値を設定します。"),n("br"),t._v(" 実際の文字サイズは画面の大きさに合わせて調整されます。既定の文字サイズは 34px です。"),n("br")]),n("v-slider",{staticClass:"settings__item-form",attrs:{ticks:"always","thumb-label":"","hide-details":"",min:20,max:60},model:{value:t.settings.comment_font_size,callback:function(e){t.$set(t.settings,"comment_font_size",e)},expression:"settings.comment_font_size"}})],1),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("コメントの遅延時間")]),n("div",{staticClass:"settings__item-label"},[t._v(" プレイヤーやコメントリストに表示されるコメントを何秒遅らせて反映するかを設定します。"),n("br"),t._v(" 通常は 1.5 秒程度で大丈夫です。ネットワークが遅いなどでタイムラグが大きいときだけ、映像の遅延に合わせて調整してください。"),n("br")]),n("v-slider",{staticClass:"settings__item-form",attrs:{ticks:"always","thumb-label":"","hide-details":"",step:.5,min:0,max:5},model:{value:t.settings.comment_delay_time,callback:function(e){t.$set(t.settings,"comment_delay_time",e)},expression:"settings.comment_delay_time"}})],1)])])},Fe=[],Be=i["default"].extend({name:"SettingsJikkyo",components:{Base:xe},data:function(){return{Utils:B,is_loading:!0,is_logged_in:null!==B.getAccessToken(),user:null,niconico_user_icon_url:"",settings:function(){for(var t={},e=0,n=["comment_speed_rate","comment_font_size","comment_delay_time"];e<n.length;e++){var a=n[e];t[a]=B.getSettingsItem(a)}return t}()}},created:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.user={id:0,name:"",is_admin:!0,niconico_user_id:null,niconico_user_name:null,niconico_user_premium:null,twitter_accounts:[],created_at:"",updated_at:""},!0!==t.is_logged_in){e.next=4;break}return e.next=4,t.syncAccountInfo();case 4:t.is_loading=!1;case 5:case"end":return e.stop()}}),e)})))()},watch:{settings:{deep:!0,handler:function(){for(var t=0,e=Object.entries(this.settings);t<e.length;t++){var n=Object(Ct["a"])(e[t],2),a=n[0],s=n[1];B.setSettingsItem(a,s)}}}},methods:{syncAccountInfo:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["default"].axios.get("/users/me");case 3:n=e.sent,t.user=n.data,null!==t.user.niconico_user_id&&(a=t.user.niconico_user_id.toString().slice(0,4),t.niconico_user_icon_url="https://secure-dcdn.cdn.nimg.jp/nicoaccount/usericon/".concat(a,"/").concat(t.user.niconico_user_id,".jpg")),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),M.a.isAxiosError(e.t0)&&e.t0.response&&401===e.t0.response.status&&(t.is_logged_in=!1,t.user=null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},loginNiconicoAccount:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==t.is_logged_in){e.next=3;break}return t.$message.warning("連携をはじめるには、KonomiTV アカウントにログインしてください。"),e.abrupt("return");case 3:return e.next=5,i["default"].axios.get("/niconico/auth");case 5:n=e.sent.data.authorization_url,a=window.open(n,"KonomiTV-OAuthPopup",B.getWindowFeatures()),s=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(n){var i,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.closed){e.next=2;break}return e.abrupt("return");case 2:if("object"===B.typeof(n.data)){e.next=4;break}return e.abrupt("return");case 4:if("KonomiTV-OAuthPopup"in n.data!==!1){e.next=6;break}return e.abrupt("return");case 6:if(a&&a.close(),window.removeEventListener("message",s),i=n.data["KonomiTV-OAuthPopup"]["status"],r=n.data["KonomiTV-OAuthPopup"]["detail"],console.log("NiconicoAuthCallbackAPI: Status: ".concat(i," / Detail: ").concat(r)),200===i){e.next=14;break}return r.startsWith("Authorization was denied (access_denied)")?t.$message.error("ニコニコアカウントとの連携がキャンセルされました。"):r.startsWith("Failed to get access token (HTTP Error ")?(o=r.replace("Failed to get access token ",""),t.$message.error("アクセストークンの取得に失敗しました。".concat(o))):r.startsWith("Failed to get access token (Connection Timeout)")?t.$message.error("アクセストークンの取得に失敗しました。ニコニコで障害が発生している可能性があります。"):r.startsWith("Failed to get user information (HTTP Error ")?(c=r.replace("Failed to get user information ",""),t.$message.error("ニコニコアカウントのユーザー情報の取得に失敗しました。".concat(c))):r.startsWith("Failed to get user information (Connection Timeout)")?t.$message.error("ニコニコアカウントのユーザー情報の取得に失敗しました。ニコニコで障害が発生している可能性があります。"):t.$message.error("ニコニコアカウントとの連携に失敗しました。(".concat(r,")")),e.abrupt("return");case 14:return e.next=16,t.syncAccountInfo();case 16:t.$message.success("ニコニコアカウントと連携しました。");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",s);case 9:case"end":return e.stop()}}),e)})))()},logoutNiconicoAccount:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["default"].axios.delete("/niconico/logout");case 2:return e.next=4,t.syncAccountInfo();case 4:t.$message.success("ニコニコアカウントとの連携を解除しました。");case 5:case"end":return e.stop()}}),e)})))()}}}),He=Be,Me=(n("9132"),n("ba0d")),Ue=Object(_["a"])(He,$e,Fe,!1,null,"3181cf82",null),ze=Ue.exports;h()(Ue,{VBtn:W["a"],VSlider:Me["a"]});var Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Base",[n("h2",{staticClass:"settings__heading"},[n("Icon",{attrs:{icon:"fa-brands:twitter",width:"22px"}}),n("span",{staticClass:"ml-3"},[t._v("Twitter")])],1),n("div",{staticClass:"settings__content",class:{"settings__content--loading":t.is_loading}},[n("div",{staticClass:"twitter-accounts"},[t.user.twitter_accounts.length>0?n("div",{staticClass:"twitter-accounts__heading"},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:person-board-20-filled",height:"30"}}),t._v("連携中のアカウント ")],1):t._e(),0===t.user.twitter_accounts.length?n("div",{staticClass:"twitter-accounts__guide"},[n("Icon",{staticClass:"flex-shrink-0",attrs:{icon:"fa-brands:twitter",width:"45px"}}),n("div",{staticClass:"ml-4"},[n("div",{staticClass:"font-weight-bold text-h6"},[t._v("Twitter アカウントと連携していません")]),n("div",{staticClass:"text--text text--darken-1 text-subtitle-2 mt-1"},[t._v(" Twitter アカウントと連携すると、テレビを見ながら Twitter にツイートしたり、ほかの実況ツイートをリアルタイムで表示できるようになります。 ")])])],1):t._e(),t._l(t.user.twitter_accounts,(function(e){return n("div",{key:e.id,staticClass:"twitter-account"},[n("img",{staticClass:"twitter-account__icon",attrs:{src:e.icon_url}}),n("div",{staticClass:"twitter-account__info"},[n("div",{staticClass:"twitter-account__info-name"},[n("span",{staticClass:"twitter-account__info-name-text"},[t._v(t._s(e.name))])]),n("span",{staticClass:"twitter-account__info-screen-name"},[t._v("@"+t._s(e.screen_name))])]),n("v-btn",{staticClass:"twitter-account__logout ml-auto",attrs:{width:"124",height:"52",depressed:""},on:{click:function(n){return t.logoutTwitterAccount(e.screen_name)}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:plug-disconnected-20-filled",height:"24"}}),t._v("連携解除 ")],1)],1)})),n("v-btn",{staticClass:"twitter-account__login",attrs:{color:"secondary","max-width":"250",height:"50",depressed:""},on:{click:function(e){return t.loginTwitterAccount()}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:plug-connected-20-filled",height:"24"}}),t._v("連携するアカウントを追加 ")],1)],2),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("既定で表示される Twitter タブ内のタブ")]),n("div",{staticClass:"settings__item-label"},[t._v(" 視聴画面を開いたときに、パネルの Twitter タブの中で最初に表示されるタブを設定します。"),n("br")]),n("v-select",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",items:t.twitter_active_tab},model:{value:t.settings.twitter_active_tab,callback:function(e){t.$set(t.settings,"twitter_active_tab",e)},expression:"settings.twitter_active_tab"}})],1),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("ツイートにつけるハッシュタグの位置")]),n("div",{staticClass:"settings__item-label"},[t._v(" ツイート本文から見て、ハッシュタグをどの位置につけてツイートするかを設定します。"),n("br")]),n("v-select",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",items:t.tweet_hashtag_position},model:{value:t.settings.tweet_hashtag_position,callback:function(e){t.$set(t.settings,"tweet_hashtag_position",e)},expression:"settings.tweet_hashtag_position"}})],1),n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("ツイートするキャプチャに番組タイトルの透かしを描画する")]),n("div",{staticClass:"settings__item-label"},[t._v(" ツイートするキャプチャに、視聴中の番組タイトルの透かしを描画するかを設定します。"),n("br")]),n("v-select",{staticClass:"settings__item-form",attrs:{outlined:"","hide-details":"",items:t.tweet_capture_watermark_position},model:{value:t.settings.tweet_capture_watermark_position,callback:function(e){t.$set(t.settings,"tweet_capture_watermark_position",e)},expression:"settings.tweet_capture_watermark_position"}})],1)])])},qe=[],We=i["default"].extend({name:"SettingsTwitter",components:{Base:xe},data:function(){return{twitter_active_tab:[{text:"ツイート検索タブ",value:"Search"},{text:"タイムラインタブ",value:"Timeline"},{text:"キャプチャタブ",value:"Capture"}],tweet_hashtag_position:[{text:"ツイート本文の前に追加する",value:"Prepend"},{text:"ツイート本文の後に追加する",value:"Append"},{text:"ツイート本文の前に追加してから改行する",value:"PrependWithLineBreak"},{text:"ツイート本文の後に改行してから追加する",value:"AppendWithLineBreak"}],tweet_capture_watermark_position:[{text:"透かしを描画しない",value:"None"},{text:"透かしをキャプチャの左上に描画する",value:"TopLeft"},{text:"透かしをキャプチャの右上に描画する",value:"TopRight"},{text:"透かしをキャプチャの左下に描画する",value:"BottomLeft"},{text:"透かしをキャプチャの右下に描画する",value:"BottomRight"}],is_loading:!0,is_logged_in:null!==B.getAccessToken(),user:null,settings:function(){for(var t={},e=0,n=["twitter_active_tab","tweet_hashtag_position","tweet_capture_watermark_position"];e<n.length;e++){var a=n[e];t[a]=B.getSettingsItem(a)}return t}()}},created:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.user={id:0,name:"",is_admin:!0,niconico_user_id:null,niconico_user_name:null,niconico_user_premium:null,twitter_accounts:[],created_at:"",updated_at:""},!0!==t.is_logged_in){e.next=4;break}return e.next=4,t.syncAccountInfo();case 4:t.is_loading=!1;case 5:case"end":return e.stop()}}),e)})))()},watch:{settings:{deep:!0,handler:function(){for(var t=0,e=Object.entries(this.settings);t<e.length;t++){var n=Object(Ct["a"])(e[t],2),a=n[0],s=n[1];B.setSettingsItem(a,s)}}}},methods:{syncAccountInfo:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["default"].axios.get("/users/me");case 3:t.user=e.sent.data,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),M.a.isAxiosError(e.t0)&&e.t0.response&&401===e.t0.response.status&&(t.is_logged_in=!1,t.user=null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},loginTwitterAccount:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==t.is_logged_in){e.next=3;break}return t.$message.warning("連携をはじめるには、KonomiTV アカウントにログインしてください。"),e.abrupt("return");case 3:return e.next=5,i["default"].axios.get("/twitter/auth");case 5:n=e.sent.data.authorization_url,a=window.open(n,"KonomiTV-OAuthPopup",B.getWindowFeatures()),s=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(n){var i,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.closed){e.next=2;break}return e.abrupt("return");case 2:if("object"===B.typeof(n.data)){e.next=4;break}return e.abrupt("return");case 4:if("KonomiTV-OAuthPopup"in n.data!==!1){e.next=6;break}return e.abrupt("return");case 6:if(a&&a.close(),window.removeEventListener("message",s),i=n.data["KonomiTV-OAuthPopup"]["status"],r=n.data["KonomiTV-OAuthPopup"]["detail"],console.log("TwitterAuthCallbackAPI: Status: ".concat(i," / Detail: ").concat(r)),200===i){e.next=14;break}return r.startsWith("Authorization was denied by user")?t.$message.error("Twitter アカウントとの連携がキャンセルされました。"):r.startsWith("Failed to get access token")?t.$message.error("アクセストークンの取得に失敗しました。"):r.startsWith("Failed to get user information")?t.$message.error("Twitter アカウントのユーザー情報の取得に失敗しました。"):t.$message.error("Twitter アカウントとの連携に失敗しました。(".concat(r,")")),e.abrupt("return");case 14:return e.next=16,t.syncAccountInfo();case 16:o=Object(E["a"])(t.user.twitter_accounts).sort((function(t,e){return t.updated_at<e.updated_at?1:t.updated_at>e.updated_at?-1:0}))[0],t.$message.success("Twitter @".concat(o.screen_name," と連携しました。"));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",s);case 9:case"end":return e.stop()}}),e)})))()},logoutTwitterAccount:function(t){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i["default"].axios.delete("/twitter/accounts/".concat(t));case 2:return n.next=4,e.syncAccountInfo();case 4:e.$message.success("Twitter @".concat(t," との連携を解除しました。"));case 5:case"end":return n.stop()}}),n)})))()}}}),Ye=We,Ge=(n("477a"),Object(_["a"])(Ye,Ke,qe,!1,null,"393335ac",null)),Je=Ge.exports;h()(Ge,{VBtn:W["a"],VSelect:Te["a"]});var Xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Base",[n("h2",{staticClass:"settings__heading"},[n("Icon",{attrs:{icon:"fluent:toolbox-20-filled",width:"22px"}}),n("span",{staticClass:"ml-3"},[t._v("環境設定")])],1),n("div",{staticClass:"settings__content"},[n("div",{staticClass:"settings__item"},[n("div",{staticClass:"settings__item-heading"},[t._v("鋭意開発中…")])])])])},Ze=[],Qe=i["default"].extend({name:"SettingsEnvironment",components:{Base:xe},data:function(){return{settings:function(){for(var t={},e=0,n=[];e<n.length;e++){var a=n[e];t[a]=B.getSettingsItem(a)}return t}()}},watch:{settings:{deep:!0,handler:function(){for(var t=0,e=Object.entries(this.settings);t<e.length;t++){var n=Object(Ct["a"])(e[t],2),a=n[0],s=n[1];B.setSettingsItem(a,s)}}}}}),tn=Qe,en=Object(_["a"])(tn,Xe,Ze,!1,null,null,null),nn=en.exports,an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"route-container"},[n("Header"),n("main",[n("Navigation"),n("div",{staticClass:"d-flex align-center w-100 mb-13"},[n("v-card",{staticClass:"login-container px-10 pt-8 pb-11 mx-auto background lighten-1",attrs:{elevation:"10",width:"100%","max-width":"450"}},[n("v-card-title",{staticClass:"justify-center pb-7"},[n("v-img",{attrs:{"max-width":"250",src:"/assets/images/logo.svg"}})],1),n("v-divider"),n("v-form",{ref:"login",on:{submit:function(t){t.preventDefault()}}},[n("v-text-field",{staticClass:"mt-12",attrs:{autofocus:"",outlined:"",placeholder:"ユーザー名",rules:[t.username_validation]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("v-text-field",{staticClass:"mt-2",attrs:{outlined:"",placeholder:"パスワード",type:t.password_showing?"text":"password","append-icon":t.password_showing?"mdi-eye":"mdi-eye-off",rules:[t.password_validation]},on:{"click:append":function(e){t.password_showing=!t.password_showing}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-btn",{staticClass:"login-button mt-5",attrs:{color:"secondary",depressed:"",width:"100%",height:"56"},on:{click:function(e){return t.login()}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fa:sign-in"}}),t._v("ログイン ")],1)],1)],1)],1)],1)],1)},sn=[],rn=i["default"].extend({name:"Login",components:{Header:lt,Navigation:ht},data:function(){return{username:null,username_validation:function(t){return""===t||null===t?"ユーザー名を入力してください。":!1!==/^.{2,}$/.test(t)||"ユーザー名は2文字以上で入力してください。"},password:null,password_showing:!1,password_validation:function(t){return""===t||null===t?"パスワードを入力してください。":!1!==/^[a-zA-Z0-9!-/:-@¥[-`{-~]{4,}$/.test(t)||"パスワードは4文字以上の半角英数記号を入力してください。"}}},methods:{login:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==t.$refs.login.validate()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,i["default"].axios.post("/users/token",new URLSearchParams({username:t.username,password:t.password}));case 5:return n=e.sent,console.log("Login successful."),console.log(n.data),B.saveAccessToken(n.data.access_token),t.$message.success("ログインしました。"),e.next=12,t.$router.push({path:"/settings/account"});case 12:e.next=28;break;case 14:if(e.prev=14,e.t0=e["catch"](2),!M.a.isAxiosError(e.t0)||!e.t0.response||401!==e.t0.response.status){e.next=28;break}console.log("Failed to login."),console.log(e.t0.response.data),e.t1=e.t0.response.data.detail,e.next="Incorrect username"===e.t1?22:"Incorrect password"===e.t1?24:26;break;case 22:return t.$message.error("ログインできませんでした。そのユーザー名のアカウントは存在しません。"),e.abrupt("break",28);case 24:return t.$message.error("ログインできませんでした。パスワードを間違えていませんか？"),e.abrupt("break",28);case 26:return t.$message.error("ログインできませんでした。(HTTP Error ".concat(e.t0.response.status,")")),e.abrupt("break",28);case 28:case"end":return e.stop()}}),e,null,[[2,14]])})))()}}}),on=rn,cn=(n("0215"),n("adda")),ln=Object(_["a"])(on,an,sn,!1,null,"65778364",null),un=ln.exports;h()(ln,{VBtn:W["a"],VCard:ae["a"],VCardTitle:se["c"],VDivider:re["a"],VForm:Ee["a"],VImg:cn["a"],VTextField:Ne["a"]});var dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"route-container"},[n("Header"),n("main",[n("Navigation"),n("div",{staticClass:"d-flex align-center w-100 mb-13"},[n("v-card",{staticClass:"register-container px-10 pt-8 pb-11 mx-auto background lighten-1",attrs:{elevation:"10",width:"100%","max-width":"450"}},[n("v-card-title",{staticClass:"flex-column justify-center"},[n("v-img",{attrs:{"max-width":"250",src:"/assets/images/logo.svg"}}),n("h4",{staticClass:"mt-10"},[t._v("アカウントを作成")])],1),n("v-divider"),n("v-form",{ref:"register",on:{submit:function(t){t.preventDefault()}}},[n("v-text-field",{staticClass:"mt-10",attrs:{autofocus:"",outlined:"",placeholder:"ユーザー名",rules:[t.username_validation]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("v-text-field",{staticClass:"mt-2",attrs:{outlined:"",placeholder:"パスワード",type:t.password_showing?"text":"password","append-icon":t.password_showing?"mdi-eye":"mdi-eye-off",rules:[t.password_validation]},on:{"click:append":function(e){t.password_showing=!t.password_showing}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-btn",{staticClass:"register-button mt-5",attrs:{color:"secondary",depressed:"",width:"100%",height:"56"},on:{click:function(e){return t.register()}}},[n("Icon",{staticClass:"mr-2",attrs:{icon:"fluent:person-add-20-filled",height:"24"}}),t._v("アカウントを作成 ")],1)],1)],1)],1)],1)],1)},pn=[],_n=i["default"].extend({name:"Register",components:{Header:lt,Navigation:ht},data:function(){return{username:null,username_validation:function(t){return""===t||null===t?"ユーザー名を入力してください。":!1!==/^.{2,}$/.test(t)||"ユーザー名は2文字以上で入力してください。"},password:null,password_showing:!0,password_validation:function(t){return""===t||null===t?"パスワードを入力してください。":!1!==/^[a-zA-Z0-9!-/:-@¥[-`{-~]{4,}$/.test(t)||"パスワードは4文字以上の半角英数記号を入力してください。"}}},methods:{register:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==t.$refs.register.validate()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,i["default"].axios.post("/users",{username:t.username,password:t.password});case 5:n=e.sent,console.log("Account created."),console.log(n.data),e.next=25;break;case 10:if(e.prev=10,e.t0=e["catch"](2),!M.a.isAxiosError(e.t0)||!e.t0.response||422!==e.t0.response.status){e.next=24;break}console.log("Failed to create account."),console.log(e.t0.response.data),e.t1=e.t0.response.data.detail,e.next="Specified username is duplicated"===e.t1?18:"Specified username is not accepted due to system limitations"===e.t1?20:22;break;case 18:return t.$message.error("ユーザー名が重複しています。"),e.abrupt("break",24);case 20:return t.$message.error("ユーザー名に token と me は使えません。"),e.abrupt("break",24);case 22:return t.$message.error("アカウントを作成できませんでした。(HTTP Error ".concat(e.t0.response.status,")")),e.abrupt("break",24);case 24:return e.abrupt("return");case 25:return e.prev=25,e.next=28,i["default"].axios.post("/users/token",new URLSearchParams({username:t.username,password:t.password}));case 28:return a=e.sent,console.log("Login successful."),console.log(a.data),B.saveAccessToken(a.data.access_token),t.$message.success("アカウントを作成しました。"),e.next=35,t.$router.push({path:"/settings/account"});case 35:e.next=51;break;case 37:if(e.prev=37,e.t2=e["catch"](25),!M.a.isAxiosError(e.t2)||!e.t2.response||401!==e.t2.response.status){e.next=51;break}console.log("Failed to login."),console.log(e.t2.response.data),e.t3=e.t2.response.data.detail,e.next="Incorrect username"===e.t3?45:"Incorrect password"===e.t3?47:49;break;case 45:return t.$message.error("ログインできませんでした。そのユーザー名のアカウントは存在しません。"),e.abrupt("break",51);case 47:return t.$message.error("ログインできませんでした。パスワードを間違えていませんか？"),e.abrupt("break",51);case 49:return t.$message.error("ログインできませんでした。(HTTP Error ".concat(e.t2.response.status,")")),e.abrupt("break",51);case 51:case"end":return e.stop()}}),e,null,[[2,10],[25,37]])})))()}}}),mn=_n,hn=(n("d06e"),Object(_["a"])(mn,dn,pn,!1,null,"1d9f0d11",null)),vn=hn.exports;h()(hn,{VBtn:W["a"],VCard:ae["a"],VCardTitle:se["c"],VDivider:re["a"],VForm:Ee["a"],VImg:cn["a"],VTextField:Ne["a"]});var gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"route-container"},[n("Header"),n("main",[n("Navigation"),t._m(0)],1)],1)},fn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-center align-center w-100"},[n("div",{staticClass:"d-flex justify-center align-center flex-column"},[n("h1",[t._v("Not Found, or Under Development...")]),n("span",{staticClass:"mt-4 text--text text--darken-1"},[t._v("お探しのページは存在しないか、鋭意開発中です。")])])])}],wn=i["default"].extend({name:"NotFound",components:{Header:lt,Navigation:ht}}),bn=wn,yn=Object(_["a"])(bn,gn,fn,!1,null,null,null),xn=yn.exports;i["default"].use(J["a"]);var Cn=[{path:"/",redirect:"/tv/"},{path:"/tv/",name:"TV Home",component:bt},{path:"/tv/watch/:channel_id",name:"TV Watch",component:le},{path:"/settings/",redirect:"/settings/general"},{path:"/settings/general",name:"Settings General",component:Ae},{path:"/settings/account",name:"Settings Account",component:Le},{path:"/settings/jikkyo",name:"Settings Jikkyo",component:ze},{path:"/settings/twitter",name:"Settings Twitter",component:Je},{path:"/settings/environment",name:"Settings Environment",component:nn},{path:"/login/",name:"Login",component:un},{path:"/register/",name:"Register",component:vn},{path:"*",name:"NotFound",component:xn}],kn=new J["a"]({mode:"history",base:"/",routes:Cn}),Tn=kn,In=n("9483");Object(In["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),Object(s["polyfill"])(),i["default"].config.productionTip=!1,i["default"].use(r["a"],z),i["default"].use(o["a"]),i["default"].use(l.a,{top:!1,bottom:!0,color:"#433532",dark:!0,elevation:8,timeout:2500,autoRemove:!0,closeButtonContent:"閉じる",vuetifyInstance:G});var Sn=window.matchMedia("(hover: none)").matches?[]:["hover","focus","touch"];u["a"].options.themes.tooltip.showTriggers=Sn,u["a"].options.themes.tooltip.hideTriggers=Sn,u["a"].options.themes.tooltip.delay.show=0,u["a"].options.offset=[0,7],i["default"].use(u["a"]),i["default"].component("Icon",a["a"]),i["default"].component("v-tab-item-fix",y),i["default"].component("v-tabs-fix",I),i["default"].component("v-tabs-items-fix",A),new i["default"]({router:Tn,vuetify:G,render:function(t){return t(w)}}).$mount("#app")},cee1:function(t,e,n){},d06e:function(t,e,n){"use strict";n("d8ce")},d8ce:function(t,e,n){},e02d:function(t,e,n){},e827:function(t,e,n){"use strict";n("f96b")},eadf:function(t,e,n){},ec57:function(t,e,n){},eee7:function(t,e,n){},f96b:function(t,e,n){}});
//# sourceMappingURL=app.3f307613.js.map