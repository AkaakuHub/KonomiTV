(function(t){function a(a){for(var n,r,l=a[0],c=a[1],o=a[2],_=0,d=[];_<l.length;_++)r=l[_],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(a);while(d.length)d.shift()();return s.push.apply(s,o||[]),e()}function e(){for(var t,a=0;a<s.length;a++){for(var e=s[a],n=!0,l=1;l<e.length;l++){var c=e[l];0!==i[c]&&(n=!1)}n&&(s.splice(a--,1),t=r(r.s=e[0]))}return t}var n={},i={app:0},s=[];function r(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=n,r.d=function(t,a,e){r.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,a){if(1&a&&(t=r(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var n in t)r.d(e,n,function(a){return t[a]}.bind(null,n));return e},r.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=a,l=l.slice();for(var o=0;o<l.length;o++)a(l[o]);var p=c;s.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("cd49")},"21dd":function(t,a,e){"use strict";e("6c23")},"36a9":function(t,a,e){},5452:function(t,a,e){"use strict";e("af35")},"598f":function(t,a,e){"use strict";e("cee1")},"5c0b":function(t,a,e){"use strict";e("9c0c")},"6c23":function(t,a,e){},"92b8":function(t,a,e){"use strict";e("eee7")},"9c0c":function(t,a,e){},aa16:function(t,a,e){},af35:function(t,a,e){},c7ff:function(t,a,e){"use strict";e("36a9")},c848:function(t,a,e){"use strict";e("aa16")},cd49:function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("bc3a"),i=e.n(n),s=e("5ea9"),r=e("2b0e"),l=e("130e"),c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",{attrs:{id:"app"}},[e("transition",[e("router-view")],1)],1)},o=[],p=(e("5c0b"),e("2877")),_=e("6544"),d=e.n(_),u=e("7496"),h={},v=Object(p["a"])(h,c,o,!1,null,null,null),g=v.exports;d()(v,{VApp:u["a"]});var m=e("f309");r["a"].use(m["a"]);var f=new m["a"]({theme:{dark:!0,themes:{dark:{primary:"#E64F97",secondary:"#E64F97",twitter:"#4F82E6",gray:"#66514C",black:"#110A09",background:{base:"#1E1310",lighten1:"#2F221F",lighten2:"#433532"},text:{base:"#FFEAEA",darken1:"#D9C7C7",darken2:"#8E7F7E"}}},options:{customProperties:!0}}}),b=e("8c4f"),w=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"route-container"},[e("Header"),e("v-main",[e("Navigation"),e("div",{staticClass:"channels-container channels-container--home",class:{"channels-container--loading":t.loading}},[e("v-tabs",{staticClass:"channels-tab",attrs:{centered:""},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},t._l(t.channels_list,(function(a,n){return e("v-tab",{key:n,staticClass:"channels-tab__item"},[t._v(t._s(n))])})),1),e("v-tabs-items-fix",{staticClass:"channels-list",model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},t._l(t.channels_list,(function(a,n){return e("v-tab-item",{key:n,staticClass:"channels",class:"channels--length-"+a.length},t._l(a,(function(a){return e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a.id,staticClass:"channel",attrs:{to:"/tv/watch/"+a.channel_id}},[e("div",{staticClass:"channel__broadcaster"},[e("img",{staticClass:"channel__broadcaster-icon",attrs:{src:t.api_base_url+"/channels/"+a.channel_id+"/logo"}}),e("div",{staticClass:"channel__broadcaster-content"},[e("span",{staticClass:"channel__broadcaster-name"},[t._v("Ch: "+t._s(a.channel_number)+" "+t._s(a.channel_name))]),e("div",{staticClass:"channel__broadcaster-status"},[e("Icon",{attrs:{icon:"fa-solid:eye",height:"12px"}}),e("span",{staticClass:"ml-1"},[t._v(t._s(a.viewers))]),e("Icon",{staticClass:"ml-4",attrs:{icon:"fa-solid:fire-alt",height:"12px"}}),e("span",{staticClass:"ml-1"},[t._v(t._s(t.getAttribute(a,"channel_force","-")))]),e("Icon",{staticClass:"ml-4",attrs:{icon:"bi:chat-left-text-fill",height:"12px"}}),e("span",{staticClass:"ml-1"},[t._v(t._s(t.getAttribute(a,"channel_comment","-")))])],1)]),e("v-tooltip",{attrs:{top:"",transition:"fade-transition"},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on;return[e("div",t._g({directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"channel__broadcaster-pin",class:{"channel__broadcaster-pin--pinned":t.isPinnedChannel(a.channel_id)},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.isPinnedChannel(a.channel_id)?t.removePinnedChannel(a.channel_id):t.addPinnedChannel(a.channel_id)},mousedown:function(t){t.preventDefault(),t.stopPropagation()}}},i),[e("Icon",{attrs:{icon:"fluent:pin-20-filled",width:"24px"}})],1)]}}],null,!0)},[e("span",[t._v(t._s(t.isPinnedChannel(a.channel_id)?"ピン留めを外す":"ピン留めする"))])])],1),e("div",{staticClass:"channel__program-present"},[e("span",{staticClass:"channel__program-present-title",domProps:{innerHTML:t._s(t.decorateProgramInfo(a.program_present,"title"))}}),e("span",{staticClass:"channel__program-present-time"},[t._v(t._s(t.getProgramTime(a.program_present)))]),e("span",{staticClass:"channel__program-present-description",domProps:{innerHTML:t._s(t.decorateProgramInfo(a.program_present,"description"))}})]),e("v-spacer"),e("div",{staticClass:"channel__program-following"},[e("div",{staticClass:"channel__program-following-title"},[e("span",{staticClass:"channel__program-following-title-decorate"},[t._v("NEXT")]),e("Icon",{staticClass:"channel__program-following-title-icon",attrs:{icon:"fluent:fast-forward-20-filled",width:"16px"}}),e("span",{staticClass:"channel__program-following-title-text",domProps:{innerHTML:t._s(t.decorateProgramInfo(a.program_following,"title"))}})],1),e("span",{staticClass:"channel__program-following-time"},[t._v(t._s(t.getProgramTime(a.program_following)))])]),e("div",{staticClass:"channel__progressbar"},[e("div",{staticClass:"channel__progressbar-progress",style:"width:"+t.getProgramProgress(a.program_present)+"%;"})])],1)})),1)})),1)],1)],1)],1)},C=[],y=e("b85c"),k=(e("4de4"),e("a434"),e("caad"),e("2532"),e("1df6")),x=(e("99af"),e("4d63"),e("ac1f"),e("25f0"),e("5319"),e("466d"),e("5a0c")),I=e.n(x),S=(e("5999"),e("d4ec")),P=e("bee2"),T=function(){function t(){Object(S["a"])(this,t)}return Object(P["a"])(t,null,[{key:"getSettingsItem",value:function(a){var e=JSON.parse(localStorage.getItem("KonomiTV-Settings"))||t.default_settings;return a in e?e[a]:null}},{key:"setSettingsItem",value:function(a,e){var n=JSON.parse(localStorage.getItem("KonomiTV-Settings"))||t.default_settings;a in n&&(n[a]=e,localStorage.setItem("KonomiTV-Settings",JSON.stringify(n)))}}]),t}();T.default_settings={pinned_channel_ids:[]};var N=r["a"].extend({data:function(){var t="".concat(window.location.protocol,"//").concat(window.location.host,"/api");var a="1080p",e="0.4.0";return{api_base_url:t,default_quality:a,version:e}},methods:{decorateProgramInfo:function(t,a){if(null!==t&&a in t){var e="新|終|再|交|映|手|声|多|副|字|文|CC|OP|二|S|B|SS|無|無料C|S1|S2|S3|MV|双|デ|D|N|W|P|H|HV|SD|天|解|料|前|後初|生|販|吹|PPV|演|移|他|収|・|英|韓|中|字/日|字/日英|3D|2K|4K|8K|5.1|7.1|22.2|60P|120P|d|HC|HDR|SHV|UHD|VOD|配|初",n=new RegExp("\\((二|字|再)\\)","g"),i=new RegExp("\\[(".concat(e,")\\]"),"g"),s=t[a].replace(n,'<span class="decorate-symbol">$1</span>');return s=s.replace(i,'<span class="decorate-symbol">$1</span>'),s}return"title"==a?"放送休止":"この時間は放送を休止しています。"},getAttribute:function(t,a,e){return null!==t&&void 0!==t[a]&&null!==t[a]?t[a]:e},getChannelType:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=t.match("(?<channel_type>[a-z]+)[0-9]+").groups.channel_type.toUpperCase();return"GR"===e&&a?"地デジ":e},getProgramTime:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==t&&"2000-01-01T00:00:00+09:00"!==t.start_time){I.a.locale("ja");var e=I()(t.start_time),n=I()(t.end_time),i=t.duration/60;return!0===a?"".concat(e.format("HH:mm")," ～ ").concat(n.format("HH:mm")):"".concat(e.format("YYYY/MM/DD (dd) HH:mm")," ～ ").concat(n.format("HH:mm")," (").concat(i,"分)")}return!0===a?"--:-- ～ --:--":"----/--/-- (-) --:-- ～ --:-- (--分)"},getProgramProgress:function(t){if(null!==t){var a=I()(I()()).diff(t.start_time,"second");return a/t.duration*100}return 0},updatePinnedChannelList:function(){this.pinned_channel_ids=T.getSettingsItem("pinned_channel_ids");var t,a=[],e=Object(y["a"])(this.pinned_channel_ids);try{for(e.s();!(t=e.n()).done;){var n,i=t.value,s=this.getChannelType(i,!0),l=Object(y["a"])(this.channels_list[s]);try{for(l.s();!(n=l.n()).done;){var c=n.value;if(i===c.channel_id){a.push(c);break}}}catch(o){l.e(o)}finally{l.f()}}}catch(o){e.e(o)}finally{e.f()}a.length>0?"ピン留め"in this.channels_list?r["a"].set(this.channels_list,"ピン留め",a):this.channels_list=Object.assign({"ピン留め":a},this.channels_list):"ピン留め"in this.channels_list&&r["a"].delete(this.channels_list,"ピン留め")}}}),O=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-toolbar",{staticClass:"header",attrs:{absolute:"",color:"background",elevation:"8",width:"100%"}},[e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"logo ml-3 ml-md-6",attrs:{to:"/tv/"}},[e("img",{staticClass:"logo__image",attrs:{src:"/assets/img/logo.svg",height:"21"}})]),e("v-spacer"),e("v-btn",{staticClass:"mr-3 mr-md-6",attrs:{icon:""}},[e("v-icon",[t._v("mdi-dots-vertical")])],1)],1)},j=[],H=(e("5452"),e("8336")),M=e("132d"),V=e("2fa4"),E=e("71d9"),D=e("269a"),L=e.n(D),A=e("5607"),R={},Y=Object(p["a"])(R,O,j,!1,null,null,null),F=Y.exports;d()(Y,{VBtn:H["a"],VIcon:M["a"],VSpacer:V["a"],VToolbar:E["a"]}),L()(Y,{Ripple:A["a"]});var K=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"navigation-container elevation-8"},[e("nav",{staticClass:"navigation"},[e("div",{staticClass:"navigation-scroll"},[e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/tv/"}},[e("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:tv-20-regular",width:"26px"}}),e("span",{staticClass:"navigation__link-text"},[t._v("テレビをみる")])],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/videos/"}},[e("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:movies-and-tv-20-regular",width:"26px"}}),e("span",{staticClass:"navigation__link-text"},[t._v("ビデオをみる")])],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/schedules/"}},[e("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:calendar-ltr-20-regular",width:"26px"}}),e("span",{staticClass:"navigation__link-text"},[t._v("番組表")])],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/captures/"}},[e("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:image-multiple-24-regular",width:"26px"}}),e("span",{staticClass:"navigation__link-text"},[t._v("キャプチャ")])],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/watchlists/"}},[e("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"ic:round-playlist-play",width:"26px"}}),e("span",{staticClass:"navigation__link-text"},[t._v("ウォッチリスト")])],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/histories/"}},[e("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:history-16-regular",width:"26px"}}),e("span",{staticClass:"navigation__link-text"},[t._v("視聴履歴")])],1),e("v-spacer"),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",to:"/settings/"}},[e("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:settings-20-regular",width:"26px"}}),e("span",{staticClass:"navigation__link-text"},[t._v("設定")])],1),e("a",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"navigation__link",attrs:{"active-class":"navigation__link--active",href:"https://github.com/tsukumijima/KonomiTV"}},[e("Icon",{staticClass:"navigation__link-icon",attrs:{icon:"fluent:info-16-regular",width:"26px"}}),e("span",{staticClass:"navigation__link-text"},[t._v("version "+t._s(t.version))])],1)],1)])])},$=[],B=Object(k["a"])(N).extend({components:{Icon:s["a"]}}),G=B,q=(e("21dd"),Object(p["a"])(G,K,$,!1,null,"9d99dfde",null)),J=q.exports;d()(q,{VSpacer:V["a"]}),L()(q,{Ripple:A["a"]});var W=Object(k["a"])(N).extend({name:"Home",components:{Header:F,Navigation:J},data:function(){return{tab:null,loading:!0,interval_ids:[],channels_list:null,pinned_channel_ids:[]}},created:function(){var t=this;this.update();var a=60-Math.floor((new Date).getTime()/1e3)%60;this.interval_ids.push(setTimeout((function(){t.update(),t.interval_ids.push(setInterval((function(){t.update()}),6e4))}),1e3*a))},beforeDestroy:function(){var t,a=Object(y["a"])(this.interval_ids);try{for(a.s();!(t=a.n()).done;){var e=t.value;clearInterval(parseInt(e))}}catch(n){a.e(n)}finally{a.f()}},methods:{update:function(){var t=this;r["a"].axios.get("".concat(this.api_base_url,"/channels")).then((function(a){function e(t){return t.is_display}t.channels_list={},a.data.GR.length>0&&(t.channels_list["地デジ"]=a.data.GR.filter(e)),a.data.BS.length>0&&(t.channels_list["BS"]=a.data.BS.filter(e)),a.data.CS.length>0&&(t.channels_list["CS"]=a.data.CS.filter(e)),a.data.SKY.length>0&&(t.channels_list["SKY"]=a.data.SKY.filter(e)),t.updatePinnedChannelList(),t.loading=!1}))},addPinnedChannel:function(t){this.pinned_channel_ids=T.getSettingsItem("pinned_channel_ids"),this.pinned_channel_ids.push(t),T.setSettingsItem("pinned_channel_ids",this.pinned_channel_ids),this.updatePinnedChannelList()},removePinnedChannel:function(t){this.pinned_channel_ids=T.getSettingsItem("pinned_channel_ids"),this.pinned_channel_ids.splice(this.pinned_channel_ids.indexOf(t),1),T.setSettingsItem("pinned_channel_ids",this.pinned_channel_ids),this.updatePinnedChannelList()},isPinnedChannel:function(t){return this.pinned_channel_ids.includes(t)}}}),z=W,U=(e("92b8"),e("c848"),e("f6c4")),X=e("71a3"),Q=e("c671"),Z=e("fe57"),tt=e("3a2f"),at=Object(p["a"])(z,w,C,!1,null,"7d648819",null),et=at.exports;d()(at,{VMain:U["a"],VSpacer:V["a"],VTab:X["a"],VTabItem:Q["a"],VTabs:Z["a"],VTooltip:tt["a"]}),L()(at,{Ripple:A["a"]});var nt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"route-container"},[e("main",{staticClass:"watch-container",class:{"watch-container--control-visible":t.is_control_visible,"watch-container--panel-visible":t.is_panel_visible},on:{mousemove:t.controlVisibleTimer,touchmove:t.controlVisibleTimer}},[e("nav",{staticClass:"watch-navigation"},[e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__icon",attrs:{to:"/tv/"}},[e("img",{staticClass:"watch-navigation__icon-image",attrs:{src:"/assets/img/icon.svg",width:"23px"}})]),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/tv/"}},[e("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:tv-20-regular",width:"26px"}})],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/videos/"}},[e("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:movies-and-tv-20-regular",width:"26px"}})],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/schedules/"}},[e("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:calendar-ltr-20-regular",width:"26px"}})],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/captures/"}},[e("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:image-multiple-24-regular",width:"26px"}})],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/watchlists/"}},[e("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"ic:round-playlist-play",width:"26px"}})],1),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/histories/"}},[e("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:history-16-regular",width:"26px"}})],1),e("v-spacer"),e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",to:"/settings/"}},[e("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:settings-20-regular",width:"26px"}})],1),e("a",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"watch-navigation__link",attrs:{"active-class":"watch-navigation__link--active",href:"https://github.com/tsukumijima/KonomiTV"}},[e("Icon",{staticClass:"watch-navigation__link-icon",attrs:{icon:"fluent:info-16-regular",width:"26px"}})],1)],1),e("div",{staticClass:"watch-content"},[e("header",{staticClass:"watch-header"},[e("img",{staticClass:"watch-header__broadcaster",attrs:{src:t.api_base_url+"/channels/"+t.$route.params.channel_id+"/logo"}}),e("span",{staticClass:"watch-header__program-title",domProps:{innerHTML:t._s(t.decorateProgramInfo(t.channel.program_present,"title"))}}),e("span",{staticClass:"watch-header__program-time"},[t._v(t._s(t.getProgramTime(t.channel.program_present,!0)))]),e("v-spacer"),e("span",{staticClass:"watch-header__now"},[t._v(t._s(t.time))])],1),e("div",{staticClass:"watch-player",class:{"watch-player__background--visible":t.is_background_visible}},[e("div",{staticClass:"watch-player__background",style:{backgroundImage:"url("+t.background_url+")"}},[e("img",{staticClass:"watch-player__background-logo",attrs:{src:"/assets/img/logo.svg"}})]),e("div",{staticClass:"watch-player__dplayer"}),e("div",{staticClass:"watch-player__button"},[e("v-tooltip",{attrs:{top:"",transition:"fade-transition"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[e("div",t._g({},n),[e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"switch-button switch-button-up",attrs:{to:"/tv/watch/"+t.channel_previous.channel_id}},[e("Icon",{staticClass:"switch-button-icon",attrs:{icon:"fluent:ios-arrow-left-24-filled",width:"32px",rotate:"1"}})],1)],1)]}}])},[e("span",[t._v("前のチャンネル")])]),e("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"switch-button switch-button-panel switch-button-panel--open",on:{click:function(a){t.is_panel_visible=!t.is_panel_visible}}},[e("Icon",{staticClass:"switch-button-icon",attrs:{icon:"fluent:navigation-16-filled",width:"32px"}})],1),e("v-tooltip",{attrs:{bottom:"",transition:"fade-transition"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[e("div",t._g({},n),[e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"switch-button switch-button-down",attrs:{to:"/tv/watch/"+t.channel_next.channel_id}},[e("Icon",{staticClass:"switch-button-icon",attrs:{icon:"fluent:ios-arrow-right-24-filled",width:"33px",rotate:"1"}})],1)],1)]}}])},[e("span",[t._v("次のチャンネル")])])],1)])]),e("div",{staticClass:"watch-panel"},[e("div",{staticClass:"watch-panel__header"},[e("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-close-button",on:{click:function(a){t.is_panel_visible=!1}}},[e("Icon",{staticClass:"panel-close-button__icon",attrs:{icon:"akar-icons:chevron-right",width:"25px"}}),e("span",{staticClass:"panel-close-button__text"},[t._v("閉じる")])],1),e("v-spacer"),e("div",{staticClass:"panel-broadcaster"},[e("img",{staticClass:"panel-broadcaster__icon",attrs:{src:t.api_base_url+"/channels/"+t.$route.params.channel_id+"/logo"}}),e("div",{staticClass:"panel-broadcaster__number"},[t._v(t._s(t.channel.channel_number))]),e("div",{staticClass:"panel-broadcaster__name"},[t._v(t._s(t.channel.channel_name))])])],1),e("div",{staticClass:"watch-panel__content-container"},[e("div",{staticClass:"watch-panel__content program-container",class:{"watch-panel__content--active":"program"===t.tab_active}},[e("section",{staticClass:"program-info"},[e("h1",{staticClass:"program-info__title",domProps:{innerHTML:t._s(t.decorateProgramInfo(t.channel.program_present,"title"))}}),e("div",{staticClass:"program-info__time"},[t._v(t._s(t.getProgramTime(t.channel.program_present)))]),e("div",{staticClass:"program-info__description",domProps:{innerHTML:t._s(t.decorateProgramInfo(t.channel.program_present,"description"))}}),e("div",{staticClass:"program-info__genre-container"},t._l(t.getAttribute(t.channel.program_present,"genre",[]),(function(a,n){return e("div",{key:n,staticClass:"program-info__genre"},[t._v(" "+t._s(a.major)+" / "+t._s(a.middle)+" ")])})),0),e("div",{staticClass:"program-info__next"},[e("span",{staticClass:"program-info__next-decorate"},[t._v("NEXT")]),e("Icon",{staticClass:"program-info__next-icon",attrs:{icon:"fluent:fast-forward-20-filled",width:"16px"}})],1),e("span",{staticClass:"program-info__next-title",domProps:{innerHTML:t._s(t.decorateProgramInfo(t.channel.program_following,"title"))}}),e("div",{staticClass:"program-info__next-time"},[t._v(t._s(t.getProgramTime(t.channel.program_following)))]),e("div",{staticClass:"program-info__status"},[e("Icon",{attrs:{icon:"fa-solid:eye",height:"14px"}}),e("span",{staticClass:"ml-2"},[t._v(t._s(t.channel.viewers))]),e("Icon",{staticClass:"ml-5",attrs:{icon:"fa-solid:fire-alt",height:"14px"}}),e("span",{staticClass:"ml-2"},[t._v(t._s(t.getAttribute(t.channel,"channel_force","-")))]),e("Icon",{staticClass:"ml-5",attrs:{icon:"bi:chat-left-text-fill",height:"14px"}}),e("span",{staticClass:"ml-2"},[t._v(t._s(t.getAttribute(t.channel,"channel_comment","-")))])],1)]),e("section",{staticClass:"program-detail-container"},t._l(t.getAttribute(t.channel.program_present,"detail",{}),(function(a,n){return e("div",{key:n,staticClass:"program-detail"},[e("h2",{staticClass:"program-detail__heading"},[t._v(t._s(n))]),e("div",{staticClass:"program-detail__text"},[t._v(t._s(a))])])})),0)]),e("div",{staticClass:"watch-panel__content channels-container channels-container--watch",class:{"watch-panel__content--active":"channel"===t.tab_active}},[e("v-tabs",{staticClass:"channels-tab",attrs:{centered:"","show-arrows":""},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},t._l(t.channels_list,(function(a,n){return e("v-tab",{key:n,staticClass:"channels-tab__item"},[t._v(t._s(n))])})),1),e("div",{staticClass:"channels-list-container"},[e("v-tabs-items-fix",{staticClass:"channels-list",model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},t._l(t.channels_list,(function(a,n){return e("v-tab-item",{key:n,staticClass:"channels"},t._l(a,(function(a){return e("router-link",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a.id,staticClass:"channel",attrs:{to:"/tv/watch/"+a.channel_id}},[e("div",{staticClass:"channel__broadcaster"},[e("img",{staticClass:"channel__broadcaster-icon",attrs:{src:t.api_base_url+"/channels/"+a.channel_id+"/logo"}}),e("div",{staticClass:"channel__broadcaster-content"},[e("span",{staticClass:"channel__broadcaster-name"},[t._v("Ch: "+t._s(a.channel_number)+" "+t._s(a.channel_name))]),e("div",{staticClass:"channel__broadcaster-status"},[e("Icon",{attrs:{icon:"fa-solid:fire-alt",height:"10px"}}),e("span",{staticClass:"ml-1"},[t._v(t._s(t.getAttribute(a,"channel_force","-")))])],1)])]),e("div",{staticClass:"channel__program-present"},[e("span",{staticClass:"channel__program-present-title",domProps:{innerHTML:t._s(t.decorateProgramInfo(a.program_present,"title"))}}),e("span",{staticClass:"channel__program-present-time"},[t._v(t._s(t.getProgramTime(a.program_present)))])]),e("div",{staticClass:"channel__program-following"},[e("div",{staticClass:"channel__program-following-title"},[e("span",{staticClass:"channel__program-following-title-decorate"},[t._v("NEXT")]),e("Icon",{staticClass:"channel__program-following-title-icon",attrs:{icon:"fluent:fast-forward-20-filled",width:"16px"}}),e("span",{staticClass:"channel__program-following-title-text",domProps:{innerHTML:t._s(t.decorateProgramInfo(a.program_following,"title"))}})],1),e("span",{staticClass:"channel__program-following-time"},[t._v(t._s(t.getProgramTime(a.program_following)))])]),e("div",{staticClass:"channel__progressbar"},[e("div",{staticClass:"channel__progressbar-progress",style:"width:"+t.getProgramProgress(a.program_present)+"%;"})])])})),1)})),1)],1)],1)]),e("div",{staticClass:"watch-panel__navigation"},[e("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-navigation-button",class:{"panel-navigation-button--active":"program"===t.tab_active},on:{click:function(a){t.tab_active="program"}}},[e("Icon",{staticClass:"panel-navigation-button__icon",attrs:{icon:"fa-solid:info-circle",width:"33px"}}),e("span",{staticClass:"panel-navigation-button__text"},[t._v("番組情報")])],1),e("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-navigation-button",class:{"panel-navigation-button--active":"channel"===t.tab_active},on:{click:function(a){t.tab_active="channel"}}},[e("Icon",{staticClass:"panel-navigation-button__icon",attrs:{icon:"fa-solid:broadcast-tower",width:"34px"}}),e("span",{staticClass:"panel-navigation-button__text"},[t._v("チャンネル")])],1),e("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-navigation-button",class:{"panel-navigation-button--active":"comment"===t.tab_active},on:{click:function(a){t.tab_active="comment"}}},[e("Icon",{staticClass:"panel-navigation-button__icon",attrs:{icon:"bi:chat-left-text-fill",width:"29px"}}),e("span",{staticClass:"panel-navigation-button__text"},[t._v("コメント")])],1),e("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"panel-navigation-button",class:{"panel-navigation-button--active":"twitter"===t.tab_active},on:{click:function(a){t.tab_active="twitter"}}},[e("Icon",{staticClass:"panel-navigation-button__icon",attrs:{icon:"fa-brands:twitter",width:"34px"}}),e("span",{staticClass:"panel-navigation-button__text"},[t._v("Twitter")])],1)])])])])},it=[],st=e("1da1"),rt=e("3835"),lt=(e("96cf"),e("b0c0"),e("f7a5")),ct=e.n(lt),ot=e("40b9"),pt=e.n(ot),_t=Object(k["a"])(N).extend({name:"Home",components:{},data:function(){return{tab:null,tab_active:"program",time:I()().format("YYYY/MM/DD HH:mm:ss"),background_url:"/assets/img/player-background1.jpg",is_background_visible:!1,is_control_visible:!0,is_panel_visible:!0,interval_ids:[],control_interval_id:0,channel_id:this.$route.params.channel_id,channel:{id:"NID0-SID0",service_id:0,network_id:0,remocon_id:0,channel_id:"gr000",channel_number:"---",channel_name:"取得中…",channel_type:"GR",channel_force:0,channel_comment:0,is_subchannel:!1,is_display:!0,viewers:0,program_present:{id:"NID0-SID0-EID0",channel_id:"gr000",title:"取得中…",description:"取得中…",detail:{},start_time:"2000-01-01T00:00:00+09:00",end_time:"2000-01-01T00:00:00+09:00",duration:0,is_free:!0,genre:[],video_type:"映像1080i(1125i)、アスペクト比16:9 パンベクトルなし",video_codec:"mpeg2",video_resolution:"1080i",primary_audio_type:"2/0モード(ステレオ)",primary_audio_language:"日本語",primary_audio_sampling_rate:"48kHz",secondary_audio_type:null,secondary_audio_language:null,secondary_audio_sampling_rate:null},program_following:{id:"NID0-SID0-EID0",channel_id:"gr000",title:"取得中…",description:"取得中…",detail:{},start_time:"2000-01-01T00:00:00+09:00",end_time:"2000-01-01T00:00:00+09:00",duration:0,is_free:!0,genre:[],video_type:"映像1080i(1125i)、アスペクト比16:9 パンベクトルなし",video_codec:"mpeg2",video_resolution:"1080i",primary_audio_type:"2/0モード(ステレオ)",primary_audio_language:"日本語",primary_audio_sampling_rate:"48kHz",secondary_audio_type:null,secondary_audio_language:null,secondary_audio_sampling_rate:null}},channel_previous:{channel_id:"gr000"},channel_next:{channel_id:"gr000"},channels_list:{},player:null,eventsource:null}},created:function(){this.init()},beforeDestroy:function(){this.destroy()},beforeRouteUpdate:function(t,a,e){var n=this;this.destroy(),this.channel_id=t.params.channel_id;var i=this.getPreviousAndCurrentAndNextChannel(this.channel_id,this.channels_list),s=Object(rt["a"])(i,3);this.channel_previous=s[0],this.channel=s[1],this.channel_next=s[2],this.interval_ids.push(setTimeout((function(){n.init()}),500)),e()},methods:{init:function(){var t=this;this.background_url="/assets/img/player-background".concat(Math.floor(4*Math.random())+1,".jpg"),this.controlVisibleTimer(),this.update(),this.interval_ids.push(setInterval((function(){t.time=I()().format("YYYY/MM/DD HH:mm:ss")}),1e3));var a=60-Math.floor((new Date).getTime()/1e3)%60;this.interval_ids.push(setTimeout((function(){t.update(),t.interval_ids.push(setInterval((function(){t.update()}),6e4))}),1e3*a))},update:function(){var t=this;return Object(st["a"])(regeneratorRuntime.mark((function a(){var e,n,i,s,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=function(t){return t.is_display||i===t.channel_id},void 0!==t.$route.params.channel_id){a.next=3;break}return a.abrupt("return");case 3:return a.prev=3,a.next=6,r["a"].axios.get("".concat(t.api_base_url,"/channels/").concat(t.channel_id));case 6:e=a.sent,a.next=16;break;case 9:if(a.prev=9,a.t0=a["catch"](3),console.error(a.t0),!a.t0.response||422!==a.t0.response.status||"Specified channel_id was not found"!==a.t0.response.data.detail){a.next=15;break}return a.next=15,t.$router.replace({path:"/not-found/"});case 15:return a.abrupt("return");case 16:return t.channel=e.data,null===t.player&&(t.initPlayer(),t.initEventHandler()),null===t.channel.program_present||"1/0+1/0モード(デュアルモノ)"!==t.channel.program_present.primary_audio_type&&null===t.channel.program_present.secondary_audio_type?(t.player.template.audioItem[1].classList.add("dplayer-setting-audio-item--disabled"),t.player.plugins.mpegts&&setTimeout((function(){t.player.plugins.mpegts.switchPrimaryAudio()}),200)):t.player.template.audioItem[1].classList.remove("dplayer-setting-audio-item--disabled"),a.prev=19,a.next=22,r["a"].axios.get("".concat(t.api_base_url,"/channels"));case 22:n=a.sent,a.next=28;break;case 25:a.prev=25,a.t1=a["catch"](19),console.error(a.t1);case 28:i=t.channel_id,t.channels_list={},n.data.GR.length>0&&(t.channels_list["地デジ"]=n.data.GR.filter(s)),n.data.BS.length>0&&(t.channels_list["BS"]=n.data.BS.filter(s)),n.data.CS.length>0&&(t.channels_list["CS"]=n.data.CS.filter(s)),n.data.SKY.length>0&&(t.channels_list["SKY"]=n.data.SKY.filter(s)),t.updatePinnedChannelList(),l=t.getPreviousAndCurrentAndNextChannel(t.channel_id,t.channels_list),c=Object(rt["a"])(l,3),t.channel_previous=c[0],t.channel_next=c[2];case 39:case"end":return a.stop()}}),a,null,[[3,9],[19,25]])})))()},controlVisibleTimer:function(){var t=this;clearTimeout(this.control_interval_id),this.is_control_visible=!0,this.control_interval_id=setTimeout((function(){t.is_control_visible=!1,null!==t.player&&(t.player.controller.hide(),t.player.setting.hide())}),3e3)},getPreviousAndCurrentAndNextChannel:function(t,a){for(var e=a[this.getChannelType(t,!0)],n=0;n<e.length;n++){var i=e[n];if(i.channel_id===t){var s=n-1;-1===s&&(s=e.length-1);var r=n+1;return r===e.length&&(r=0),[e[s],e[n],e[r]]}}},initPlayer:function(){var t=this;window.mpegts=pt.a,this.player=new ct.a({container:document.querySelector(".watch-player__dplayer"),volume:1,autoplay:!0,screenshot:!0,airplay:!1,live:!0,loop:!0,lang:"ja-jp",theme:"#E64F97",video:{defaultQuality:this.default_quality,quality:[{name:"1080p",type:"mpegts",url:"".concat(this.api_base_url,"/streams/live/").concat(this.channel_id,"/1080p/mpegts")},{name:"720p",type:"mpegts",url:"".concat(this.api_base_url,"/streams/live/").concat(this.channel_id,"/720p/mpegts")},{name:"540p",type:"mpegts",url:"".concat(this.api_base_url,"/streams/live/").concat(this.channel_id,"/540p/mpegts")},{name:"480p",type:"mpegts",url:"".concat(this.api_base_url,"/streams/live/").concat(this.channel_id,"/480p/mpegts")},{name:"360p",type:"mpegts",url:"".concat(this.api_base_url,"/streams/live/").concat(this.channel_id,"/360p/mpegts")},{name:"240p",type:"mpegts",url:"".concat(this.api_base_url,"/streams/live/").concat(this.channel_id,"/240p/mpegts")}]},pluginOptions:{mpegts:{config:{enableWorker:!0,liveBufferLatencyChasing:!0,liveBufferLatencyMaxLatency:3,liveBufferLatencyMinRemain:.5}},aribb24:{normalFont:'"Windows TV MaruGothic","Hiragino Maru Gothic Pro","Yu Gothic Medium",sans-serif',gaijiFont:'"Windows TV MaruGothic","Hiragino Maru Gothic Pro","Yu Gothic Medium",sans-serif',forceStrokeColor:"black",drcsReplacement:!0,enableRawCanvas:!0,useStrokeText:!0}},subtitle:{type:"aribb24"}}),window.player=this.player,this.player.container.addEventListener("click",(function(){t.player.container.classList.contains("dplayer-hide-controller")&&(clearTimeout(t.control_interval_id),t.player.controller.hide(),t.is_control_visible=!1)})),this.player.on("quality_start",(function(){t.background_url="/assets/img/player-background".concat(Math.floor(4*Math.random())+1,".jpg"),null!==t.eventsource&&(t.eventsource.close(),t.eventsource=null),t.initEventHandler()})),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.channel.program_present?this.channel.program_present.title:"放送休止",artist:this.channel.channel_name,artwork:[{src:"".concat(this.api_base_url,"/channels/").concat(this.channel_id,"/logo"),sizes:"256x256",type:"image/png"}]}))},initEventHandler:function(){var t=this;this.eventsource=new EventSource("".concat(this.api_base_url,"/streams/live/").concat(this.channel_id,"/").concat(this.player.quality.name,"/events")),this.eventsource.addEventListener("status_update",(function(a){var e=JSON.parse(a.data.replace(/'/g,'"'));switch(console.log("Status: ".concat(e.status," Detail:").concat(e.detail)),t.channel.viewers=e.clients_count,e.status){case"Standby":t.player.template.notice.textContent.includes("画質を")||t.player.notice(e.detail,-1),t.is_background_visible=!0;break;case"ONAir":t.player.template.notice.textContent.includes("画質を")||t.player.notice(t.player.template.notice.textContent,1e-6),t.is_background_visible=!1;break;case"Restart":t.player.notice(e.detail,-1),t.player.switchVideo({url:t.player.quality.url,type:t.player.quality.type}),t.player.play(),t.is_background_visible=!0;break;case"Offline":t.player.notice(e.detail,-1),t.player.video.onerror=function(){t.player.notice(e.detail,-1),t.player.video.onerror=null},t.eventsource.close(),t.is_background_visible=!0;break}})),this.eventsource.addEventListener("detail_update",(function(a){var e=JSON.parse(a.data.replace(/'/g,'"'));console.log("Status: ".concat(e.status," Detail:").concat(e.detail)),t.channel.viewers=e.clients_count,"Standby"===e.status&&(t.player.notice(e.detail,-1),t.is_background_visible||(t.is_background_visible=!0),"バッファリングしています…"===e.detail&&(t.player.video.oncanplay=function(){t.is_background_visible=!1,t.player.video.oncanplay=null}))})),this.eventsource.addEventListener("clients_update",(function(a){var e=JSON.parse(a.data.replace(/'/g,'"'));t.channel.viewers=e.clients_count}))},destroy:function(){var t,a=Object(y["a"])(this.interval_ids);try{for(a.s();!(t=a.n()).done;){var e=t.value;clearInterval(parseInt(e))}}catch(n){a.e(n)}finally{a.f()}if(this.interval_ids=[],null!==this.player){try{this.player.destroy()}catch(i){this.player.plugins.mpegts.destroy()}this.player=null}null!==this.eventsource&&(this.eventsource.close(),this.eventsource=null)}}}),dt=_t,ut=(e("598f"),e("c7ff"),Object(p["a"])(dt,nt,it,!1,null,"2c6e392c",null)),ht=ut.exports;d()(ut,{VSpacer:V["a"],VTab:X["a"],VTabItem:Q["a"],VTabs:Z["a"],VTooltip:tt["a"]}),L()(ut,{Ripple:A["a"]});var vt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"route-container"},[e("Header"),e("v-main",[e("Navigation"),e("div",{staticClass:"d-flex justify-center align-center w-100"},[e("div",{staticClass:"d-flex justify-center align-center flex-column"},[e("h1",[t._v("404 Not Found")]),e("span",{staticClass:"mt-2"},[t._v("お探しのページは存在しないか、鋭意開発中です。")])])])],1)],1)},gt=[],mt=r["a"].extend({name:"Home",components:{Header:F,Navigation:J}}),ft=mt,bt=Object(p["a"])(ft,vt,gt,!1,null,null,null),wt=bt.exports;d()(bt,{VMain:U["a"]}),r["a"].use(b["a"]);var Ct,yt,kt=[{path:"/",redirect:"/tv/"},{path:"/tv/",name:"TV Home",component:et},{path:"/tv/watch/:channel_id",name:"TV Watch",component:ht},{path:"*",name:"NotFound",component:wt}],xt=new b["a"]({mode:"history",base:"/",routes:kt}),It=xt,St=e("aac8"),Pt={extends:St["a"],methods:{updateReverse:function(t,a){var e=this.items.length,n=e-1;return e<=2?t<a:this.continuous?t===n&&0===a||(0!==t||a!==n)&&t<a:t<a}}},Tt=Pt,Nt=Object(p["a"])(Tt,Ct,yt,!1,null,null,null),Ot=Nt.exports,jt=e("9483");Object(jt["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),r["a"].config.productionTip=!1,r["a"].use(l["a"],i.a),r["a"].component("Icon",s["a"]),r["a"].component("v-tabs-items-fix",Ot),r["a"].mixin(N),new r["a"]({router:It,vuetify:f,render:function(t){return t(g)}}).$mount("#app")},cee1:function(t,a,e){},eee7:function(t,a,e){}});
//# sourceMappingURL=app.57127813.js.map