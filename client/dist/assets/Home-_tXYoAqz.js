import{d as D,U as v,P as E,m as F,M as w,u as U,_ as M,r as _,a as T,o as i,c as u,b as c,e,n as h,w as d,F as m,f as g,g as f,h as r,t as l,i as C,j as b,R as y,k as $,l as H,p as I,q as L}from"./index-ndZ4D6My.js";import{H as x,N as z}from"./Navigation-agvUXJ8_.js";import{C as N,u as j}from"./ChannelsStore-xA0_mt5P.js";import{V as A,a as O,b as R,c as W}from"./VWindowItem-yEskoe8l.js";import{V as Z}from"./ssrBoot--GxFJ_Pv.js";import"./index-T_rq9rzx.js";import"./lazy-ow2CGE0z.js";import"./transition-UUEsY4u_.js";const q=D({name:"TV-Home",components:{Header:x,Navigation:z},data(){return{Utils:Object.freeze(v),ChannelUtils:Object.freeze(N),ProgramUtils:Object.freeze(E),tab:null,is_loading:!0,interval_ids:[]}},computed:{...F(j,U)},async created(){var n;this.settingsStore.settings.pinned_channel_ids.length===0&&(this.tab=1);const s=60-new Date().getSeconds();this.interval_ids.push(window.setTimeout(()=>{this.channelsStore.update(!0),this.interval_ids.push(window.setInterval(()=>this.channelsStore.update(!0),30*1e3))},s*1e3)),await this.channelsStore.update(),await v.sleep(.01),((n=this.channelsStore.channels_list_with_pinned.get("ピン留め"))==null?void 0:n.length)===0&&(this.tab=1),this.is_loading=!1},beforeUnmount(){for(const s of this.interval_ids)window.clearInterval(s)},methods:{addPinnedChannel(s){this.settingsStore.settings.pinned_channel_ids.push(s.id),w.show(`${s.name}をピン留めしました。`)},removePinnedChannel(s){var n;this.settingsStore.settings.pinned_channel_ids.splice(this.settingsStore.settings.pinned_channel_ids.indexOf(s.id),1),((n=this.channelsStore.channels_list_with_pinned.get("ピン留め"))==null?void 0:n.length)===0&&(this.tab=1),w.show(`${s.name}のピン留めを外しました。`)},isPinnedChannel(s){return this.settingsStore.settings.pinned_channel_ids.includes(s.id)}}}),a=s=>(I("data-v-dfcb5125"),s=s(),L(),s),X={class:"route-container"},G={class:"channel__broadcaster"},J=["src"],K={class:"channel__broadcaster-content"},Q={class:"channel__broadcaster-name"},Y={class:"channel__broadcaster-status"},ee=a(()=>e("svg",{class:"iconify iconify--fa-solid",width:"10.5px",height:"12px",viewBox:"0 0 448 512"},[e("path",{fill:"currentColor",d:"M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0C69.74 91.17 0 209.96 0 281.6C0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416C154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75c6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97c27.35 52.19 15.81 118.97-33.43 153.42z"})],-1)),se=a(()=>e("span",{class:"ml-1"},"勢い:",-1)),te={class:"ml-1"},ne=a(()=>e("span",{style:{"margin-left":"3px"}}," コメ/分",-1)),ae={class:"channel__broadcaster-status-viewers ml-4"},oe=a(()=>e("svg",{class:"iconify iconify--fa-solid",width:"15.75px",height:"14px",viewBox:"0 0 576 512"},[e("path",{fill:"currentColor",d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144a143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79a47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"})],-1)),ie=a(()=>e("span",{class:"ml-1"},"視聴数:",-1)),re={class:"ml-1"},le=["onClick"],ue=a(()=>e("svg",{class:"iconify iconify--fluent",width:"24px",height:"24px",viewBox:"0 0 20 20"},[e("path",{fill:"currentColor",d:"M13.325 2.617a2 2 0 0 0-3.203.52l-1.73 3.459a1.5 1.5 0 0 1-.784.721l-3.59 1.436a1 1 0 0 0-.335 1.636L6.293 13L3 16.292V17h.707L7 13.706l2.61 2.61a1 1 0 0 0 1.636-.335l1.436-3.59a1.5 1.5 0 0 1 .722-.784l3.458-1.73a2 2 0 0 0 .52-3.203l-4.057-4.057Z"})],-1)),ce=[ue],de={class:"channel__program-present"},_e={class:"channel__program-present-title-wrapper"},he=["innerHTML"],pe={class:"channel__program-present-time"},me=["innerHTML"],ge={class:"channel__program-following"},fe={class:"channel__program-following-title"},ve=a(()=>e("span",{class:"channel__program-following-title-decorate"},"NEXT",-1)),we=a(()=>e("svg",{class:"channel__program-following-title-icon iconify iconify--fluent",width:"16px",height:"16px",viewBox:"0 0 20 20"},[e("path",{fill:"currentColor",d:"M10.018 5.486a1 1 0 0 1 1.592-.806l5.88 4.311a1.25 1.25 0 0 1 0 2.017l-5.88 4.311a1 1 0 0 1-1.592-.806v-3.16L4.61 15.319a1 1 0 0 1-1.592-.806V5.486A1 1 0 0 1 4.61 4.68l5.408 3.966v-3.16Z"})],-1)),Ce=["innerHTML"],be={class:"channel__program-following-time"},ye={class:"channel__progressbar"},Be={key:0,class:"pinned-container d-flex justify-center align-center w-100"},Pe={class:"d-flex justify-center align-center flex-column"},Se=a(()=>e("h2",null,[r("ピン留めされているチャンネルが"),e("br"),r("ありません。")],-1)),Ve={class:"mt-4 text-text-darken-1"},ke=a(()=>e("br",null,null,-1)),De=a(()=>e("div",{class:"mt-2 text-text-darken-1"},[r("チャンネルをピン留めすると、"),e("br"),r("このタブが最初に表示されます。")],-1));function Ee(s,n,Fe,Ue,Me,Te){const B=_("Header"),P=_("Navigation"),S=_("router-link"),V=_("Icon"),k=T("tooltip");return i(),u("div",X,[c(B),e("main",null,[c(P),e("div",{class:h(["channels-container channels-container--home",{"channels-container--loading":s.is_loading}])},[c(A,{class:"channels-tab",color:"primary","align-tabs":"center",height:"51px",modelValue:s.tab,"onUpdate:modelValue":n[0]||(n[0]=o=>s.tab=o)},{default:d(()=>[(i(!0),u(m,null,g(Array.from(s.channelsStore.channels_list_with_pinned),([o])=>(i(),f(R,{class:"channels-tab__item",key:o},{default:d(()=>[r(l(o),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]),c(O,{class:"channels-list",modelValue:s.tab,"onUpdate:modelValue":n[2]||(n[2]=o=>s.tab=o)},{default:d(()=>[(i(!0),u(m,null,g(Array.from(s.channelsStore.channels_list_with_pinned),([o,p])=>(i(),f(W,{class:"channels-tabitem",key:o},{default:d(()=>[e("div",{class:h(["channels",`channels--tab-${o} channels--length-${p.length}`])},[(i(!0),u(m,null,g(p,t=>C((i(),f(S,{class:"channel",key:t.id,to:`/tv/watch/${t.display_channel_id}`},{default:d(()=>[e("div",G,[e("img",{class:"channel__broadcaster-icon",src:`${s.Utils.api_base_url}/channels/${t.id}/logo`},null,8,J),e("div",K,[e("span",Q,"Ch: "+l(t.channel_number)+" "+l(t.name),1),e("div",Y,[e("div",{class:h(["channel__broadcaster-status-force",`channel__broadcaster-status-force--${s.ChannelUtils.getChannelForceType(t.jikkyo_force)}`])},[ee,se,e("span",te,l(t.jikkyo_force??"--"),1),ne],2),e("div",ae,[oe,ie,e("span",re,l(t.viewer_count),1)])])]),C((i(),u("div",{class:h(["channel__broadcaster-pin",{"channel__broadcaster-pin--pinned":s.isPinnedChannel(t)}]),onClick:b($e=>s.isPinnedChannel(t)?s.removePinnedChannel(t):s.addPinnedChannel(t),["prevent","stop"]),onMousedown:n[1]||(n[1]=b(()=>{},["prevent","stop"]))},ce,42,le)),[[y],[k,s.isPinnedChannel(t)?"ピン留めを外す":"ピン留めする"]])]),e("div",de,[e("div",_e,[e("span",{class:"channel__program-present-title",innerHTML:s.ProgramUtils.decorateProgramInfo(t.program_present,"title")},null,8,he),e("span",pe,l(s.ProgramUtils.getProgramTime(t.program_present)),1)]),e("span",{class:"channel__program-present-description",innerHTML:s.ProgramUtils.decorateProgramInfo(t.program_present,"description")},null,8,me)]),c(Z),e("div",ge,[e("div",fe,[ve,we,e("span",{class:"channel__program-following-title-text",innerHTML:s.ProgramUtils.decorateProgramInfo(t.program_following,"title")},null,8,Ce)]),e("span",be,l(s.ProgramUtils.getProgramTime(t.program_following)),1)]),e("div",ye,[e("div",{class:"channel__progressbar-progress",style:$(`width:${s.ProgramUtils.getProgramProgress(t.program_present)}%;`)},null,4)])]),_:2},1032,["to"])),[[y]])),128)),o==="ピン留め"&&p.length===0?(i(),u("div",Be,[e("div",Pe,[Se,e("div",Ve,[r("各チャンネルの "),c(V,{style:{position:"relative",bottom:"-5px"},icon:"fluent:pin-20-filled",width:"22px"}),r(" アイコンから、よくみる"),ke,r("チャンネルをこのタブにピン留めできます。")]),De])])):H("",!0)],2)]),_:2},1024))),128))]),_:1},8,["modelValue"])],2)])])}const Oe=M(q,[["render",Ee],["__scopeId","data-v-dfcb5125"]]);export{Oe as default};
