import{d as Z,c as v,F as G,g as le,k as V,h as m,b as e,e as b,t as c,r as N,n as D,o as d,_ as ee,a as r,w as B,A as M,U as z,P as q,N as me,R as F,q as Q,u as ce,C,l as R,f as pe,p as x,j as ge,Q as A,M as S,ab as _e,E as fe,G as he,T as ye,af as be,ag as ke,ah as we,ai as $e,aj as Me,ak as ae,al as Ve,am as X,an as H,O as Be,ao as Le,ap as Pe,I as Ie,aq as Ce,ar as Re,as as Se,at as He,J as xe,au as ze,X as J,av as oe,a3 as ie,V as T,s as se,B as Ae}from"./index-BMzJ-zKE.js";import{V as Te}from"./VDialog-B9rIm9Gz.js";import{a as Fe,V as De}from"./VCard-87YMq5wN.js";import{V as Ne}from"./ssrBoot-n_bHimPb.js";import{V as re}from"./Videos-ALvBvXhN.js";import{b as We,V as Y,a as j,c as Ee,d as Ue}from"./VSelect-Ct3uHyzZ.js";const Oe={class:"breadcrumbs"},Ye={class:"breadcrumbs__item-text"},je=Z({__name:"Breadcrumbs",props:{crumbs:{}},setup(t){return(s,a)=>{const f=N("Icon"),i=N("router-link");return d(),v("div",Oe,[(d(!0),v(G,null,le(s.crumbs,(u,y)=>(d(),V(i,{key:y,to:u.path,class:D(["breadcrumbs__item",{"breadcrumbs__item--disabled":u.disabled}]),event:u.disabled?"":"click"},{default:m(()=>[e("span",Ye,c(u.name),1),y<s.crumbs.length-1?(d(),V(f,{key:0,icon:"fluent:chevron-right-12-regular",width:"16px",class:"breadcrumbs__item-separator"})):b("",!0)]),_:2},1032,["to","class","event"]))),128))])}}}),_a=ee(je,[["__scopeId","data-v-1a3a34d9"]]),qe={class:"px-5 pb-6"},Ge={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-2"},Ke={class:"video-info__item"},Xe={class:"video-info__item-value"},Je={class:"video-info__item"},Qe={class:"video-info__item-value"},Ze={class:"video-info__item"},et={class:"video-info__item-value"},tt={class:"video-info__item"},at={class:"video-info__item-value"},ot={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},it={class:"video-info__item"},st={class:"video-info__item-value"},rt={class:"video-info__item"},lt={class:"video-info__item-value"},dt={class:"video-info__item"},nt={class:"video-info__item-value"},ut={class:"video-info__item"},vt={class:"video-info__item-value"},mt={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},ct={class:"video-info__item"},pt={class:"video-info__item-value"},gt={class:"video-info__item"},_t={class:"video-info__item-value"},ft={class:"video-info__item"},ht={class:"video-info__item-value"},yt={key:0,class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},bt={class:"video-info__item"},kt={class:"video-info__item-value"},wt={class:"video-info__item"},$t={class:"video-info__item-value"},Mt={class:"video-info__item"},Vt={class:"video-info__item-value"},Bt=Z({__name:"RecordedFileInfoDialog",props:{program:{},show:{type:Boolean}},emits:["update:show"],setup(t){return(s,a)=>{const f=N("Icon");return d(),V(Te,{"max-width":"770",transition:"slide-y-transition","model-value":s.show,"onUpdate:modelValue":a[1]||(a[1]=i=>s.$emit("update:show",i))},{default:m(()=>[r(Fe,{class:"video-info"},{default:m(()=>[r(De,{class:"px-5 pt-6 pb-3 d-flex align-center font-weight-bold",style:{height:"60px"}},{default:m(()=>[r(f,{icon:"fluent:document-20-filled",height:"26px"}),a[2]||(a[2]=e("span",{class:"ml-3"},"録画ファイル情報",-1)),r(Ne),B((d(),v("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:a[0]||(a[0]=i=>s.$emit("update:show",!1))},[r(f,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[F]])]),_:1}),e("div",qe,[e("div",Ge,[r(f,{icon:"fluent:video-clip-20-filled",width:"24px",height:"20px"}),a[3]||(a[3]=e("span",{class:"ml-2"},"ファイル情報",-1))]),e("div",Ke,[a[4]||(a[4]=e("div",{class:"video-info__item-label"},"ファイルパス",-1)),e("div",Xe,c(s.program.recorded_video.file_path),1)]),e("div",Je,[a[5]||(a[5]=e("div",{class:"video-info__item-label"},"ファイルサイズ",-1)),e("div",Qe,c(M(z).formatBytes(s.program.recorded_video.file_size)),1)]),e("div",Ze,[a[6]||(a[6]=e("div",{class:"video-info__item-label"},"録画期間",-1)),e("div",et,c(M(q).getRecordingTime(s.program)),1)]),e("div",tt,[a[7]||(a[7]=e("div",{class:"video-info__item-label"},"最終更新日時",-1)),e("div",at,c(M(me)(s.program.recorded_video.file_modified_at).format("YYYY/MM/DD (dd) HH:mm:ss")),1)]),e("div",ot,[r(f,{icon:"fluent:video-20-filled",width:"24px",height:"20px"}),a[8]||(a[8]=e("span",{class:"ml-2"},"映像情報",-1))]),e("div",it,[a[9]||(a[9]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",st,c(s.program.recorded_video.video_codec)+" ("+c(s.program.recorded_video.video_codec_profile)+")",1)]),e("div",rt,[a[10]||(a[10]=e("div",{class:"video-info__item-label"},"解像度",-1)),e("div",lt,c(s.program.recorded_video.video_resolution_width)+"×"+c(s.program.recorded_video.video_resolution_height),1)]),e("div",dt,[a[11]||(a[11]=e("div",{class:"video-info__item-label"},"フレームレート",-1)),e("div",nt,c(s.program.recorded_video.video_frame_rate)+" fps",1)]),e("div",ut,[a[12]||(a[12]=e("div",{class:"video-info__item-label"},"スキャン方式",-1)),e("div",vt,c(s.program.recorded_video.video_scan_type),1)]),e("div",mt,[r(f,{icon:"fluent:speaker-2-20-filled",width:"24px",height:"20px"}),a[13]||(a[13]=e("span",{class:"ml-2"},"音声情報（主音声）",-1))]),e("div",ct,[a[14]||(a[14]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",pt,c(s.program.recorded_video.primary_audio_codec),1)]),e("div",gt,[a[15]||(a[15]=e("div",{class:"video-info__item-label"},"チャンネル",-1)),e("div",_t,c(s.program.recorded_video.primary_audio_channel),1)]),e("div",ft,[a[16]||(a[16]=e("div",{class:"video-info__item-label"},"サンプリングレート",-1)),e("div",ht,c(s.program.recorded_video.primary_audio_sampling_rate?`${s.program.recorded_video.primary_audio_sampling_rate/1e3}kHz`:"不明"),1)]),s.program.recorded_video.secondary_audio_codec?(d(),v("div",yt,[r(f,{icon:"fluent:speaker-2-20-filled",width:"24px",height:"20px"}),a[17]||(a[17]=e("span",{class:"ml-2"},"音声情報（副音声）",-1))])):b("",!0),s.program.recorded_video.secondary_audio_codec?(d(),v(G,{key:1},[e("div",bt,[a[18]||(a[18]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",kt,c(s.program.recorded_video.secondary_audio_codec),1)]),e("div",wt,[a[19]||(a[19]=e("div",{class:"video-info__item-label"},"チャンネル",-1)),e("div",$t,c(s.program.recorded_video.secondary_audio_channel),1)]),e("div",Mt,[a[20]||(a[20]=e("div",{class:"video-info__item-label"},"サンプリングレート",-1)),e("div",Vt,c(s.program.recorded_video.secondary_audio_sampling_rate?`${s.program.recorded_video.secondary_audio_sampling_rate/1e3}kHz`:"不明"),1)])],64)):b("",!0)])]),_:1})]),_:1},8,["model-value"])}}}),Lt=ee(Bt,[["__scopeId","data-v-66a6f916"]]),Pt={class:"recorded-program__container"},It={class:"recorded-program__thumbnail"},Ct=["src"],Rt={class:"recorded-program__thumbnail-duration"},St={key:0,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--recording"},Ht={key:1,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--analyzing"},xt={key:2,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--partial"},zt={key:3,class:"recorded-program__thumbnail-progress"},At={class:"recorded-program__content"},Tt=["innerHTML"],Ft={class:"recorded-program__content-meta"},Dt={key:0,class:"recorded-program__content-meta-broadcaster"},Nt=["src"],Wt={class:"recorded-program__content-meta-broadcaster-name"},Et={key:1,class:"recorded-program__content-meta-broadcaster"},Ut={class:"recorded-program__content-meta-time"},Ot=["innerHTML"],Yt={key:0,width:"22px",height:"22px",viewBox:"0 0 16 16"},jt={key:0,width:"22px",height:"22px",viewBox:"0 0 16 16"},qt={key:1,width:"22px",height:"22px",viewBox:"0 0 15.2 15.2"},Gt={class:"recorded-program__menu"},Kt=Z({__name:"RecordedProgram",props:{program:{},forMylist:{type:Boolean,default:!1},forWatchedHistory:{type:Boolean,default:!1}},setup(t){const s=t,a=Q(!1),f=()=>{window.location.href=`${z.api_base_url}/videos/${s.program.id}/download`},i=async()=>{S.success("メタデータの再解析を開始します。完了までしばらくお待ちください。"),(await re.reanalyzeVideo(s.program.id)).is_success&&S.success("メタデータの再解析が完了しました。")},u=async(l=!1)=>{S.success("サムネイルの再作成を開始しました。完了までしばらくお待ちください。"),(await re.regenerateThumbnail(s.program.id,l)).is_success&&S.success("サムネイルの再作成が完了しました。")},y=ce(),g=()=>{y.settings.mylist.some(o=>o.type==="RecordedProgram"&&o.id===s.program.id)?(y.settings.mylist=y.settings.mylist.filter(o=>!(o.type==="RecordedProgram"&&o.id===s.program.id)),S.show("マイリストから削除しました。")):(y.settings.mylist.push({type:"RecordedProgram",id:s.program.id,created_at:z.time()}),S.success("マイリストに追加しました。"))},W=C(()=>y.settings.mylist.some(l=>l.type==="RecordedProgram"&&l.id===s.program.id)),K=C(()=>y.settings.watched_history.find(l=>l.video_id===s.program.id)),E=()=>{y.settings.watched_history=y.settings.watched_history.filter(l=>l.video_id!==s.program.id),S.show("視聴履歴から削除しました。")};return(l,o)=>{const h=N("Icon"),w=N("router-link"),L=ge("ftooltip");return d(),v(G,null,[B((d(),V(w,{class:D(["recorded-program",{"recorded-program--recording":l.program.recorded_video.status==="Recording","recorded-program--analyzing":!l.program.recorded_video.has_key_frames}]),to:l.program.recorded_video.status==="Recording"||!l.program.recorded_video.has_key_frames?{path:""}:`/videos/watch/${l.program.id}`},{default:m(()=>[e("div",Pt,[e("div",It,[e("img",{class:"recorded-program__thumbnail-image",loading:"lazy",decoding:"async",src:`${M(z).api_base_url}/videos/${l.program.id}/thumbnail`},null,8,Ct),e("div",Rt,c(M(q).getProgramDuration(l.program)),1),l.program.recorded_video.status==="Recording"?(d(),v("div",St,o[8]||(o[8]=[e("div",{class:"recorded-program__thumbnail-status-dot"},null,-1),R(" 録画中 ")]))):l.program.recorded_video.has_key_frames?l.program.is_partially_recorded?(d(),v("div",xt," ⚠️ 一部のみ録画 ")):b("",!0):(d(),v("div",Ht,[r(h,{icon:"fluent:clock-12-regular",width:"15px",height:"15px"}),o[9]||(o[9]=R(" メタデータ解析中 "))])),K.value?(d(),v("div",zt,[e("div",{class:"recorded-program__thumbnail-progress-bar",style:pe(`width: ${K.value.last_playback_position/l.program.recorded_video.duration*100}%`)},null,4)])):b("",!0)]),e("div",At,[e("div",{class:"recorded-program__content-title",innerHTML:M(q).decorateProgramInfo(l.program,"title")},null,8,Tt),e("div",Ft,[l.program.channel?(d(),v("div",Dt,[e("img",{class:"recorded-program__content-meta-broadcaster-icon",loading:"lazy",decoding:"async",src:`${M(z).api_base_url}/channels/${l.program.channel.id}/logo`},null,8,Nt),e("span",Wt,"Ch: "+c(l.program.channel.channel_number)+" "+c(l.program.channel.name),1)])):(d(),v("div",Et,o[10]||(o[10]=[e("span",{class:"recorded-program__content-meta-broadcaster-name"},"チャンネル情報なし",-1)]))),e("div",Ut,c(M(q).getProgramTime(l.program)),1)]),e("div",{class:"recorded-program__content-description",innerHTML:M(q).decorateProgramInfo(l.program,"description")},null,8,Ot)]),l.forWatchedHistory?b("",!0):B((d(),v("div",{key:0,class:D(["recorded-program__mylist",{"recorded-program__mylist--highlight":W.value&&!l.forMylist}]),onClick:x(g,["prevent","stop"]),onMousedown:o[0]||(o[0]=x(()=>{},["prevent","stop"]))},[l.forMylist?(d(),v("svg",Yt,o[11]||(o[11]=[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0M6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5"},null,-1)]))):(d(),v(G,{key:1},[W.value?(d(),v("svg",jt,o[12]||(o[12]=[e("path",{fill:"currentColor",d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032"},null,-1)]))):(d(),v("svg",qt,o[13]||(o[13]=[e("path",{fill:"currentColor",d:"M8 2.5a.5.5 0 0 0-1 0V7H2.5a.5.5 0 0 0 0 1H7v4.5a.5.5 0 0 0 1 0V8h4.5a.5.5 0 0 0 0-1H8z"},null,-1)])))],64))],34)),[[F],[L,W.value?"マイリストから削除する":"マイリストに追加する"]]),l.forWatchedHistory?B((d(),v("div",{key:1,class:"recorded-program__mylist",onClick:x(E,["prevent","stop"]),onMousedown:o[1]||(o[1]=x(()=>{},["prevent","stop"]))},o[14]||(o[14]=[e("svg",{width:"22px",height:"22px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0M6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5"})],-1)]),32)),[[F],[L,"視聴履歴から削除する"]]):b("",!0),e("div",Gt,[r(Ee,{location:"bottom end","close-on-content-click":!0},{activator:m(({props:P})=>[B((d(),v("div",A({class:"recorded-program__menu-button"},P,{onClick:o[2]||(o[2]=x(()=>{},["prevent","stop"])),onMousedown:o[3]||(o[3]=x(()=>{},["prevent","stop"]))}),o[15]||(o[15]=[e("svg",{width:"19px",height:"19px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M9.5 13a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0"})],-1)]),16)),[[F]])]),default:m(()=>[r(We,{density:"compact","bg-color":"background-lighten-1",class:"recorded-program__menu-list"},{default:m(()=>[r(Y,{onClick:o[4]||(o[4]=P=>a.value=!0)},{prepend:m(()=>o[16]||(o[16]=[e("svg",{width:"20px",height:"20px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M8.499 7.5a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm.25-2a.749.749 0 1 1-1.499 0a.749.749 0 0 1 1.498 0M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1M2 8a6 6 0 1 1 12 0A6 6 0 0 1 2 8"})],-1)])),default:m(()=>[r(j,{class:"ml-3"},{default:m(()=>o[17]||(o[17]=[R("録画ファイル情報を表示")])),_:1})]),_:1}),r(Y,{onClick:f,disabled:l.program.recorded_video.status==="Recording"},{prepend:m(()=>[r(h,{icon:"fluent:arrow-download-24-regular",width:"20px",height:"20px"})]),default:m(()=>[r(j,{class:"ml-3"},{default:m(()=>[R("録画ファイルをダウンロード ("+c(M(z).formatBytes(l.program.recorded_video.file_size))+")",1)]),_:1})]),_:1},8,["disabled"]),B((d(),V(Y,{onClick:i},{prepend:m(()=>[r(h,{icon:"fluent:book-arrow-clockwise-20-regular",width:"20px",height:"20px"})]),default:m(()=>[r(j,{class:"ml-3"},{default:m(()=>o[18]||(o[18]=[R("メタデータを再解析")])),_:1})]),_:1})),[[L,"再生時に必要な録画ファイル情報や番組情報などを解析し直します"]]),B((d(),V(Y,{onClick:o[5]||(o[5]=P=>u(!0))},{prepend:m(()=>[r(h,{icon:"fluent:image-arrow-counterclockwise-24-regular",width:"20px",height:"20px"})]),default:m(()=>[r(j,{class:"ml-3"},{default:m(()=>o[19]||(o[19]=[R("サムネイルを更新")])),_:1})]),_:1})),[[L,"既存のシークバー用サムネイルから代表サムネイルを選び直します 変更反映にはブラウザキャッシュの削除が必要です"]]),B((d(),V(Y,{onClick:o[6]||(o[6]=P=>u(!1))},{prepend:m(()=>[r(h,{icon:"fluent:image-arrow-counterclockwise-24-regular",width:"20px",height:"20px"})]),default:m(()=>[r(j,{class:"ml-3"},{default:m(()=>o[20]||(o[20]=[R("サムネイルを再作成")])),_:1})]),_:1})),[[L,"サムネイルを完全に作り直します（数分かかります） 変更反映にはブラウザキャッシュの削除が必要です"]])]),_:1})]),_:1})])])]),_:1},8,["to","class"])),[[F]]),r(Lt,{program:l.program,show:a.value,"onUpdate:show":o[7]||(o[7]=P=>a.value=P)},null,8,["program","show"])],64)}}}),Xt=ee(Kt,[["__scopeId","data-v-1cddd4e4"]]);function Jt(){const t=Q([]);_e(()=>t.value=[]);function s(a,f){t.value[f]=a}return{refs:t,updateRef:s}}const Qt=he({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:J,default:"$first"},prevIcon:{type:J,default:"$prev"},nextIcon:{type:J,default:"$next"},lastIcon:{type:J,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ze(),...xe(),...He(),...Se(),...Re(),...Ce(),...Ie({tag:"nav"}),...Pe(),...Le({variant:"text"})},"VPagination"),Zt=fe()({name:"VPagination",props:Qt(),emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,s){let{slots:a,emit:f}=s;const i=ye(t,"modelValue"),{t:u,n:y}=be(),{isRtl:g}=ke(),{themeClasses:W}=we(t),{width:K}=$e(),E=Me(-1);ae(void 0,{scoped:!0});const{resizeRef:l}=Ve(n=>{if(!n.length)return;const{target:p,contentRect:_}=n[0],k=p.querySelector(".v-pagination__list > *");if(!k)return;const $=_.width,O=k.offsetWidth+parseFloat(getComputedStyle(k).marginRight)*2;E.value=L($,O)}),o=C(()=>parseInt(t.length,10)),h=C(()=>parseInt(t.start,10)),w=C(()=>t.totalVisible!=null?parseInt(t.totalVisible,10):E.value>=0?E.value:L(K.value,58));function L(n,p){const _=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((n-p*_)/p).toFixed(2)))}const P=C(()=>{if(o.value<=0||isNaN(o.value)||o.value>Number.MAX_SAFE_INTEGER)return[];if(w.value<=0)return[];if(w.value===1)return[i.value];if(o.value<=w.value)return X(o.value,h.value);const n=w.value%2===0,p=n?w.value/2:Math.floor(w.value/2),_=n?p:p+1,k=o.value-p;if(_-i.value>=0)return[...X(Math.max(1,w.value-1),h.value),t.ellipsis,o.value];if(i.value-k>=(n?1:0)){const $=w.value-1,O=o.value-$+h.value;return[h.value,t.ellipsis,...X($,O)]}else{const $=Math.max(1,w.value-2),O=$===1?i.value:i.value-Math.ceil($/2)+h.value;return[h.value,t.ellipsis,...X($,O),t.ellipsis,o.value]}});function U(n,p,_){n.preventDefault(),i.value=p,_&&f(_,p)}const{refs:de,updateRef:ne}=Jt();ae({VPaginationBtn:{color:H(t,"color"),border:H(t,"border"),density:H(t,"density"),size:H(t,"size"),variant:H(t,"variant"),rounded:H(t,"rounded"),elevation:H(t,"elevation")}});const ue=C(()=>P.value.map((n,p)=>{const _=k=>ne(k,p);if(typeof n=="string")return{isActive:!1,key:`ellipsis-${p}`,page:n,props:{ref:_,ellipsis:!0,icon:!0,disabled:!0}};{const k=n===i.value;return{isActive:k,key:n,page:y(n),props:{ref:_,ellipsis:!1,icon:!0,disabled:!!t.disabled||+t.length<2,color:k?t.activeColor:t.color,"aria-current":k,"aria-label":u(k?t.currentPageAriaLabel:t.pageAriaLabel,n),onClick:$=>U($,n)}}}})),I=C(()=>{const n=!!t.disabled||i.value<=h.value,p=!!t.disabled||i.value>=h.value+o.value-1;return{first:t.showFirstLastPage?{icon:g.value?t.lastIcon:t.firstIcon,onClick:_=>U(_,h.value,"first"),disabled:n,"aria-label":u(t.firstAriaLabel),"aria-disabled":n}:void 0,prev:{icon:g.value?t.nextIcon:t.prevIcon,onClick:_=>U(_,i.value-1,"prev"),disabled:n,"aria-label":u(t.previousAriaLabel),"aria-disabled":n},next:{icon:g.value?t.prevIcon:t.nextIcon,onClick:_=>U(_,i.value+1,"next"),disabled:p,"aria-label":u(t.nextAriaLabel),"aria-disabled":p},last:t.showFirstLastPage?{icon:g.value?t.firstIcon:t.lastIcon,onClick:_=>U(_,h.value+o.value-1,"last"),disabled:p,"aria-label":u(t.lastAriaLabel),"aria-disabled":p}:void 0}});function te(){var p;const n=i.value-h.value;(p=de.value[n])==null||p.$el.focus()}function ve(n){n.key===oe.left&&!t.disabled&&i.value>+t.start?(i.value=i.value-1,ie(te)):n.key===oe.right&&!t.disabled&&i.value<h.value+o.value-1&&(i.value=i.value+1,ie(te))}return Be(()=>r(t.tag,{ref:l,class:["v-pagination",W.value,t.class],style:t.style,role:"navigation","aria-label":u(t.ariaLabel),onKeydown:ve,"data-test":"v-pagination-root"},{default:()=>[r("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&r("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(I.value.first):r(T,A({_as:"VPaginationBtn"},I.value.first),null)]),r("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(I.value.prev):r(T,A({_as:"VPaginationBtn"},I.value.prev),null)]),ue.value.map((n,p)=>r("li",{key:n.key,class:["v-pagination__item",{"v-pagination__item--is-active":n.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(n):r(T,A({_as:"VPaginationBtn"},n.props),{default:()=>[n.page]})])),r("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(I.value.next):r(T,A({_as:"VPaginationBtn"},I.value.next),null)]),t.showFirstLastPage&&r("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(I.value.last):r(T,A({_as:"VPaginationBtn"},I.value.last),null)])])]})),{}}}),ea={key:0,class:"recorded-program-list__header"},ta={class:"recorded-program-list__title"},aa={class:"recorded-program-list__title-text"},oa={key:1,class:"recorded-program-list__title-count"},ia={key:0,class:"recorded-program-list__empty"},sa={class:"recorded-program-list__empty-content"},ra=["innerHTML"],la=["innerHTML"],da={key:1,class:"recorded-program-list__pagination"},na=Z({__name:"RecordedProgramList",props:{title:{},programs:{},total:{},page:{default:1},sortOrder:{default:"desc"},hideHeader:{type:Boolean,default:!1},hideSort:{type:Boolean,default:!1},hidePagination:{type:Boolean,default:!1},showMoreButton:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},showEmptyMessage:{type:Boolean,default:!0},emptyIcon:{default:"fluent:warning-20-regular"},emptyMessage:{default:"録画番組が見つかりませんでした。"},emptySubMessage:{default:'サーバー設定で録画フォルダのパスを<br class="d-sm-none">正しく設定できているか確認してください。'},isLoading:{type:Boolean,default:!1},forMylist:{type:Boolean,default:!1},forWatchedHistory:{type:Boolean,default:!1}},emits:["update:page","update:sortOrder","more"],setup(t){Ae();const s=t,a=Q(s.page),f=Q(s.sortOrder);return se(()=>s.page,i=>{a.value=i}),se(()=>s.sortOrder,i=>{f.value=i}),(i,u)=>{const y=N("Icon");return d(),v("div",{class:D(["recorded-program-list",{"recorded-program-list--show-sort":!i.hideSort}])},[i.hideHeader?b("",!0):(d(),v("div",ea,[e("h2",ta,[i.showBackButton?B((d(),v("div",{key:0,class:"recorded-program-list__title-back",onClick:u[0]||(u[0]=g=>i.$router.back())},[r(y,{icon:"fluent:chevron-left-12-filled",width:"27px"})])),[[F]]):b("",!0),e("span",aa,c(i.title),1),i.showMoreButton?b("",!0):(d(),v("div",oa,c(i.total)+"件",1))]),e("div",{class:D(["recorded-program-list__actions",{"recorded-program-list__actions--mylist":i.forMylist}])},[i.hideSort?b("",!0):(d(),V(Ue,{key:0,modelValue:f.value,"onUpdate:modelValue":[u[1]||(u[1]=g=>f.value=g),u[2]||(u[2]=g=>i.$emit("update:sortOrder",g))],items:i.forMylist?[{title:"追加が新しい順",value:"mylist_added_desc"},{title:"追加が古い順",value:"mylist_added_asc"},{title:"録画が新しい順",value:"recorded_desc"},{title:"録画が古い順",value:"recorded_asc"}]:[{title:"新しい順",value:"desc"},{title:"古い順",value:"asc"}],"item-title":"title","item-value":"value",class:"recorded-program-list__sort",color:"primary","bg-color":"background-lighten-1",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue","items"])),i.showMoreButton?(d(),V(T,{key:1,variant:"text",class:"recorded-program-list__more",onClick:u[3]||(u[3]=g=>i.$emit("more"))},{default:m(()=>[u[6]||(u[6]=e("span",{class:"text-primary"},"もっと見る",-1)),r(y,{icon:"fluent:chevron-right-12-regular",width:"18px",class:"ml-1 text-text-darken-1",style:{margin:"0px -4px"}})]),_:1})):b("",!0)],2)])),e("div",{class:D(["recorded-program-list__grid",{"recorded-program-list__grid--loading":i.isLoading,"recorded-program-list__grid--empty":i.total===0&&i.showEmptyMessage}])},[i.total===0&&i.showEmptyMessage?(d(),v("div",ia,[e("div",sa,[r(y,{class:"recorded-program-list__empty-icon",icon:i.emptyIcon,width:"54px",height:"54px"},null,8,["icon"]),e("h2",{innerHTML:i.emptyMessage},null,8,ra),i.emptySubMessage?(d(),v("div",{key:0,class:"recorded-program-list__empty-submessage",innerHTML:i.emptySubMessage},null,8,la)):b("",!0)])])):b("",!0),(d(!0),v(G,null,le(i.programs,g=>(d(),V(Xt,{key:g.id,program:g,forMylist:i.forMylist,forWatchedHistory:i.forWatchedHistory},null,8,["program","forMylist","forWatchedHistory"]))),128))],2),!i.hidePagination&&i.total>0?(d(),v("div",da,[r(Zt,{modelValue:a.value,"onUpdate:modelValue":[u[4]||(u[4]=g=>a.value=g),u[5]||(u[5]=g=>i.$emit("update:page",g))],"active-color":"primary",density:"comfortable",length:Math.ceil(i.total/30),"total-visible":7},null,8,["modelValue","length"])])):b("",!0)],2)}}}),fa=ee(na,[["__scopeId","data-v-8527514e"]]);export{_a as B,fa as R};
